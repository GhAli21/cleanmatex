/*
SELECT
    c.relname AS table_name,
    COALESCE(d.description, '') AS table_comment
FROM pg_class c
LEFT JOIN pg_description d
    ON d.objoid = c.oid AND d.objsubid = 0  -- only table-level comments
WHERE c.relkind = 'r'  -- ordinary tables only
  AND c.relnamespace = (SELECT oid FROM pg_namespace WHERE nspname = 'public')
ORDER BY c.relname;
*/


| table name                              | table description                                                                                                                                                                                                                                   |
| --------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cmx_effective_permissions               | Precomputed effective permissions for fast RLS checks (O(1) lookup)                                                                                                                                                                            |
| hq_audit_logs                           | Platform HQ Console - Immutable audit trail of all administrative actions                                                                                                                                                                      |
| hq_roles                                | Platform HQ Console - Role definitions with permissions                                                                                                                                                                                        |
| hq_session_tokens                       | Platform HQ Console - JWT session management and refresh tokens                                                                                                                                                                                |
| hq_tenant_status_history                | Audit trail for tenant status and lifecycle transitions                                                                                                                                                                                        |
| hq_users                                | Platform HQ Console - Admin users with separate authentication from tenant users                                                                                                                                                               |
| org_auth_user_permissions               | Global user permission overrides (tenant-wide, overrides role defaults)                                                                                                                                                                        |
| org_auth_user_resource_permissions      | Resource-scoped user permission overrides (most specific, wins)                                                                                                                                                                                |
| org_auth_user_resource_roles            | User role assignments on specific resources (branch/store/POS/route/device)                                                                                                                                                                    |
| org_auth_user_roles                     | User role assignments at tenant level (supports multiple roles per user)                                                                                                                                                                       |
| org_auth_user_workflow_roles            | Workflow role assignments (separate from user roles, supports multiple workflow roles)                                                                                                                                                         |
| org_branches_mst                        | Tenant branch locations                                                                                                                                                                                                                        |
| org_customer_addresses                  | Customer addresses with multi-tenant isolation                                                                                                                                                                                                 |
| org_customer_merge_log                  | Audit trail for customer merge operations                                                                                                                                                                                                      |
| org_customers_mst                       | Junction table linking global customers to tenants                                                                                                                                                                                             |
| org_discount_rules_cf                   | Automated discount rules and campaigns                                                                                                                                                                                                         |
| org_gift_card_transactions              | Audit trail of all gift card balance changes                                                                                                                                                                                                   |
| org_gift_cards_mst                      | Gift card tracking with balance management                                                                                                                                                                                                     |
| org_invoice_mst                         | Tenant invoices                                                                                                                                                                                                                                |
| org_order_history                       | Canonical audit trail for all order actions (replaces org_order_status_history)                                                                                                                                                                |
| org_order_item_issues                   | Track issues (damage, stains, complaints) for individual order items                                                                                                                                                                           |
| org_order_item_processing_steps         | Track 5-step processing workflow per item                                                                                                                                                                                                      |
| org_order_items_dtl                     | Order line items (detail)                                                                                                                                                                                                                      |
| org_order_status_history                | DEPRECATED: Use org_order_history instead. This table is kept for backward compatibility only. All new status changes should go to org_order_history with action_type = STATUS_CHANGE. Migration completed in 0022_order_history_canonical.sql |
| org_orders_mst                          | Tenant orders (master)                                                                                                                                                                                                                         |
| org_payments_dtl_tr                     | Payment transactions                                                                                                                                                                                                                           |
| org_pln_change_history_tr               | Audit trail of subscription plan changes                                                                                                                                                                                                       |
| org_pln_subscriptions_mst               | Tenant subscription records - which plan each tenant is on                                                                                                                                                                                     |
| org_price_list_items_dtl                | Price list line items linking products to prices                                                                                                                                                                                               |
| org_price_lists_mst                     | Tenant price list headers for flexible pricing strategies                                                                                                                                                                                      |
| org_product_data_mst                    | Tenant product/detail service catalog                                                                                                                                                                                                          |
| org_promo_codes_mst                     | Promotional codes/coupons for order discounts                                                                                                                                                                                                  |
| org_promo_usage_log                     | Track promotional code usage history for audit and limit enforcement                                                                                                                                                                           |
| org_service_category_cf                 | Tenant-specific service category enablement                                                                                                                                                                                                    |
| org_subscriptions_mst                   | Tenant subscription plans and limits                                                                                                                                                                                                           |
| org_tenant_service_category_workflow_cf | Per-category workflow overrides (NULL values inherit from tenant settings)                                                                                                                                                                     |
| org_tenant_settings_cf                  |                                                                                                                                                                                                                                                |
| org_tenant_workflow_settings_cf         | Workflow feature flags enabling/disabling specific screens and features                                                                                                                                                                        |
| org_tenant_workflow_templates_cf        | Tenant assignments to global workflow templates                                                                                                                                                                                                |
| org_tenants_mst                         | Tenant organizations (laundry businesses)                                                                                                                                                                                                      |
| org_usage_tracking                      | Tracks resource usage per tenant per billing period                                                                                                                                                                                            |
| org_users_mst                           | Links Supabase auth users to tenants with role-based access control                                                                                                                                                                            |
| org_workflow_rules                      | DEPRECATED: Replaced by sys_workflow_template_transitions in PRD-010 system. 
      Use workflow templates for transition rules instead.                                                                                                      |
| org_workflow_settings_cf                | DEPRECATED: Replaced by sys_workflow_template_* system (PRD-010). New system supports global templates with tenant-level configuration via org_tenant_workflow_templates_cf and org_tenant_workflow_settings_cf                                |
| sys_audit_log                           | Comprehensive audit trail for all system actions                                                                                                                                                                                               |
| sys_auth_permissions                    | Platform-wide permission definitions                                                                                                                                                                                                           |
| sys_auth_role_default_permissions       | Maps default permissions to roles                                                                                                                                                                                                              |
| sys_auth_roles                          | Role definitions (system and custom)                                                                                                                                                                                                           |
| sys_bill_discount_codes_mst             | Discount codes and promotional offers                                                                                                                                                                                                          |
| sys_bill_discount_redemptions_tr        | Tracking of discount code redemptions                                                                                                                                                                                                          |
| sys_bill_dunning_mst                    | Dunning management for failed payments                                                                                                                                                                                                         |
| sys_bill_invoice_payments_tr            | Payment transactions for invoices                                                                                                                                                                                                              |
| sys_bill_invoices_mst                   | Tenant invoices for subscription and usage charges                                                                                                                                                                                             |
| sys_bill_payment_gateways_cf            | Payment gateway configurations for online payment_gateway type (Stripe, HyperPay, PayTabs)                                                                                                                                                     |
| sys_bill_payment_method_codes_cd        | Payment method codes configuration (Cash, Bank Transfer, Card, Check, Payment Gateway)                                                                                                                                                         |
| sys_bill_payment_methods_mst            |                                                                                                                                                                                                                                                |
| sys_bill_revenue_metrics_monthly        | Monthly revenue metrics (MRR, ARR, etc.)                                                                                                                                                                                                       |
| sys_bill_usage_metrics_daily            | Daily aggregated usage metrics per tenant                                                                                                                                                                                                      |
| sys_code_table_audit_log                | Complete audit trail for all changes to system code tables                                                                                                                                                                                     |
| sys_code_tables_registry                | Registry of all system code tables with configuration and metadata                                                                                                                                                                             |
| sys_customers_mst                       | Global customer identities (shared across tenants)                                                                                                                                                                                             |
| sys_item_type_cd                        | Item type classifications (TOPS, BOTTOMS, RETAIL_GOODS, etc.)                                                                                                                                                                                  |
| sys_order_status_cd                     | System-wide order status codes defining the complete order lifecycle                                                                                                                                                                           |
| sys_order_type_cd                       | Global order types (POS, pickup, delivery)                                                                                                                                                                                                     |
| sys_otp_codes                           | OTP verification codes for phone registration                                                                                                                                                                                                  |
| sys_payment_gateway_cd                  | Payment gateway configurations (Stripe, HyperPay, PayTabs, etc.)                                                                                                                                                                               |
| sys_payment_method_cd                   | ALL payment_methods in the system: Pay on collect, cash, card, paymet gateways...                                                                                                                                                              |
| sys_payment_status_cd                   | Payment processing status codes (PENDING, PROCESSING, COMPLETED, FAILED, REFUNDED)                                                                                                                                                             |
| sys_payment_type_cd                     | Payment type such as: Pay In Advance, Pay on Collect, Pay on Delivery, Pay on Pickup                                                                                                                                                           |
| sys_plan_limits                         | Defines subscription plan tiers and their limits                                                                                                                                                                                               |
| sys_pln_subscription_plans_mst          | System subscription plans available to all tenants                                                                                                                                                                                             |
| sys_service_category_cd                 | Global service categories                                                                                                                                                                                                                      |
| sys_service_prod_templates_cd           | Master catalog of product templates for tenant initialization                                                                                                                                                                                  |
| sys_tenant_lifecycle                    | Tracks tenant lifecycle stages, health scores, and onboarding progress                                                                                                                                                                         |
| sys_tenant_metrics_daily                | Daily aggregated metrics for tenant analytics and reporting                                                                                                                                                                                    |
| sys_tenant_settings_cd                  |                                                                                                                                                                                                                                                |
| sys_workflow_template_cd                | Global workflow template definitions shared across all tenants                                                                                                                                                                                 |
| sys_workflow_template_stages            | Stages per workflow template with sequence and metadata                                                                                                                                                                                        |
| sys_workflow_template_transitions       | Allowed transitions between stages with validation rules                                                                                                                                                                                       |
