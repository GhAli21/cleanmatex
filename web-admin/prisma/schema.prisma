generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["auth", "public"]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model audit_log_entries {
  instance_id String?   @db.Uuid
  id          String    @id @db.Uuid
  payload     Json?     @db.Json
  created_at  DateTime? @db.Timestamptz(6)
  ip_address  String    @default("") @db.VarChar(64)

  @@index([instance_id], map: "audit_logs_instance_id_idx")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model instances {
  id              String    @id @db.Uuid
  uuid            String?   @db.Uuid
  raw_base_config String?
  created_at      DateTime? @db.Timestamptz(6)
  updated_at      DateTime? @db.Timestamptz(6)

  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model refresh_tokens {
  instance_id String?   @db.Uuid
  id          BigInt    @id @default(autoincrement())
  token       String?   @unique(map: "refresh_tokens_token_unique") @db.VarChar(255)
  user_id     String?   @db.VarChar(255)
  revoked     Boolean?
  created_at  DateTime? @db.Timestamptz(6)
  updated_at  DateTime? @db.Timestamptz(6)
  parent      String?   @db.VarChar(255)
  session_id  String?   @db.Uuid
  sessions    sessions? @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([instance_id])
  @@index([instance_id, user_id])
  @@index([parent])
  @@index([session_id, revoked])
  @@index([updated_at(sort: Desc)])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model schema_migrations {
  version String @id @db.VarChar(255)

  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model users {
  instance_id                                                   String?                           @db.Uuid
  id                                                            String                            @id @db.Uuid
  aud                                                           String?                           @db.VarChar(255)
  role                                                          String?                           @db.VarChar(255)
  email                                                         String?                           @db.VarChar(255)
  encrypted_password                                            String?                           @db.VarChar(255)
  email_confirmed_at                                            DateTime?                         @db.Timestamptz(6)
  invited_at                                                    DateTime?                         @db.Timestamptz(6)
  confirmation_token                                            String?                           @db.VarChar(255)
  confirmation_sent_at                                          DateTime?                         @db.Timestamptz(6)
  recovery_token                                                String?                           @db.VarChar(255)
  recovery_sent_at                                              DateTime?                         @db.Timestamptz(6)
  email_change_token_new                                        String?                           @db.VarChar(255)
  email_change                                                  String?                           @db.VarChar(255)
  email_change_sent_at                                          DateTime?                         @db.Timestamptz(6)
  last_sign_in_at                                               DateTime?                         @db.Timestamptz(6)
  raw_app_meta_data                                             Json?
  raw_user_meta_data                                            Json?
  is_super_admin                                                Boolean?
  created_at                                                    DateTime?                         @db.Timestamptz(6)
  updated_at                                                    DateTime?                         @db.Timestamptz(6)
  phone                                                         String?                           @unique
  phone_confirmed_at                                            DateTime?                         @db.Timestamptz(6)
  phone_change                                                  String?                           @default("")
  phone_change_token                                            String?                           @default("") @db.VarChar(255)
  phone_change_sent_at                                          DateTime?                         @db.Timestamptz(6)
  confirmed_at                                                  DateTime?                         @default(dbgenerated("LEAST(email_confirmed_at, phone_confirmed_at)")) @db.Timestamptz(6)
  email_change_token_current                                    String?                           @default("") @db.VarChar(255)
  email_change_confirm_status                                   Int?                              @default(0) @db.SmallInt
  banned_until                                                  DateTime?                         @db.Timestamptz(6)
  reauthentication_token                                        String?                           @default("") @db.VarChar(255)
  reauthentication_sent_at                                      DateTime?                         @db.Timestamptz(6)
  is_sso_user                                                   Boolean                           @default(false)
  deleted_at                                                    DateTime?                         @db.Timestamptz(6)
  is_anonymous                                                  Boolean                           @default(false)
  identities                                                    identities[]
  mfa_factors                                                   mfa_factors[]
  one_time_tokens                                               one_time_tokens[]
  sessions                                                      sessions[]
  cmx_effective_permissions                                     cmx_effective_permissions[] @ignore
  org_order_history                                             org_order_history[]
  org_order_item_issues_org_order_item_issues_created_byTousers org_order_item_issues[]           @relation("org_order_item_issues_created_byTousers")
  org_order_item_issues_org_order_item_issues_solved_byTousers  org_order_item_issues[]           @relation("org_order_item_issues_solved_byTousers")
  org_order_item_processing_steps                               org_order_item_processing_steps[]
  org_order_status_history                                      org_order_status_history[]
  org_users_mst                                                 org_users_mst[]
  sys_audit_log                                                 sys_audit_log[]

  @@index([instance_id])
  @@index([is_anonymous])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flow_state {
  id                     String                @id @db.Uuid
  user_id                String?               @db.Uuid
  auth_code              String
  code_challenge_method  code_challenge_method
  code_challenge         String
  provider_type          String
  provider_access_token  String?
  provider_refresh_token String?
  created_at             DateTime?             @db.Timestamptz(6)
  updated_at             DateTime?             @db.Timestamptz(6)
  authentication_method  String
  auth_code_issued_at    DateTime?             @db.Timestamptz(6)
  saml_relay_states      saml_relay_states[]

  @@index([created_at(sort: Desc)])
  @@index([auth_code], map: "idx_auth_code")
  @@index([user_id, authentication_method], map: "idx_user_id_auth_method")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model identities {
  provider_id     String
  user_id         String    @db.Uuid
  identity_data   Json
  provider        String
  last_sign_in_at DateTime? @db.Timestamptz(6)
  created_at      DateTime? @db.Timestamptz(6)
  updated_at      DateTime? @db.Timestamptz(6)
  email           String?   @default(dbgenerated("lower((identity_data ->> 'email'::text))"))
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  users           users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([provider_id, provider], map: "identities_provider_id_provider_unique")
  @@index([email])
  @@index([user_id])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_amr_claims {
  session_id            String   @db.Uuid
  created_at            DateTime @db.Timestamptz(6)
  updated_at            DateTime @db.Timestamptz(6)
  authentication_method String
  id                    String   @id(map: "amr_id_pk") @db.Uuid
  sessions              sessions @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([session_id, authentication_method], map: "mfa_amr_claims_session_id_authentication_method_pkey")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_challenges {
  id                     String      @id @db.Uuid
  factor_id              String      @db.Uuid
  created_at             DateTime    @db.Timestamptz(6)
  verified_at            DateTime?   @db.Timestamptz(6)
  ip_address             String      @db.Inet
  otp_code               String?
  web_authn_session_data Json?
  mfa_factors            mfa_factors @relation(fields: [factor_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "mfa_challenges_auth_factor_id_fkey")

  @@index([created_at(sort: Desc)], map: "mfa_challenge_created_at_idx")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model mfa_factors {
  id                   String           @id @db.Uuid
  user_id              String           @db.Uuid
  friendly_name        String?
  factor_type          factor_type
  status               factor_status
  created_at           DateTime         @db.Timestamptz(6)
  updated_at           DateTime         @db.Timestamptz(6)
  secret               String?
  phone                String?
  last_challenged_at   DateTime?        @unique @db.Timestamptz(6)
  web_authn_credential Json?
  web_authn_aaguid     String?          @db.Uuid
  mfa_challenges       mfa_challenges[]
  users                users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, phone], map: "unique_phone_factor_per_user")
  @@index([user_id, created_at], map: "factor_id_created_at_idx")
  @@index([user_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth_clients {
  id                 String                  @id @db.Uuid
  client_id          String                  @unique
  client_secret_hash String
  registration_type  oauth_registration_type
  redirect_uris      String
  grant_types        String
  client_name        String?
  client_uri         String?
  logo_uri           String?
  created_at         DateTime                @default(now()) @db.Timestamptz(6)
  updated_at         DateTime                @default(now()) @db.Timestamptz(6)
  deleted_at         DateTime?               @db.Timestamptz(6)

  @@index([client_id])
  @@index([deleted_at])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model one_time_tokens {
  id         String              @id @db.Uuid
  user_id    String              @db.Uuid
  token_type one_time_token_type
  token_hash String
  relates_to String
  created_at DateTime            @default(now()) @db.Timestamp(6)
  updated_at DateTime            @default(now()) @db.Timestamp(6)
  users      users               @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, token_type])
  @@index([relates_to], map: "one_time_tokens_relates_to_hash_idx", type: Hash)
  @@index([token_hash], map: "one_time_tokens_token_hash_hash_idx", type: Hash)
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model saml_providers {
  id                String        @id @db.Uuid
  sso_provider_id   String        @db.Uuid
  entity_id         String        @unique
  metadata_xml      String
  metadata_url      String?
  attribute_mapping Json?
  created_at        DateTime?     @db.Timestamptz(6)
  updated_at        DateTime?     @db.Timestamptz(6)
  name_id_format    String?
  sso_providers     sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([sso_provider_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model saml_relay_states {
  id              String        @id @db.Uuid
  sso_provider_id String        @db.Uuid
  request_id      String
  for_email       String?
  redirect_to     String?
  created_at      DateTime?     @db.Timestamptz(6)
  updated_at      DateTime?     @db.Timestamptz(6)
  flow_state_id   String?       @db.Uuid
  flow_state      flow_state?   @relation(fields: [flow_state_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sso_providers   sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)])
  @@index([for_email])
  @@index([sso_provider_id])
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sessions {
  id             String           @id @db.Uuid
  user_id        String           @db.Uuid
  created_at     DateTime?        @db.Timestamptz(6)
  updated_at     DateTime?        @db.Timestamptz(6)
  factor_id      String?          @db.Uuid
  aal            aal_level?
  not_after      DateTime?        @db.Timestamptz(6)
  refreshed_at   DateTime?        @db.Timestamp(6)
  user_agent     String?
  ip             String?          @db.Inet
  tag            String?
  mfa_amr_claims mfa_amr_claims[]
  refresh_tokens refresh_tokens[]
  users          users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([not_after(sort: Desc)])
  @@index([user_id])
  @@index([user_id, created_at], map: "user_id_created_at_idx")
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model sso_domains {
  id              String        @id @db.Uuid
  sso_provider_id String        @db.Uuid
  domain          String
  created_at      DateTime?     @db.Timestamptz(6)
  updated_at      DateTime?     @db.Timestamptz(6)
  sso_providers   sso_providers @relation(fields: [sso_provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([sso_provider_id])
  @@schema("auth")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model sso_providers {
  id                String              @id @db.Uuid
  resource_id       String?
  created_at        DateTime?           @db.Timestamptz(6)
  updated_at        DateTime?           @db.Timestamptz(6)
  disabled          Boolean?
  saml_providers    saml_providers[]
  saml_relay_states saml_relay_states[]
  sso_domains       sso_domains[]

  @@index([resource_id], map: "sso_providers_resource_id_pattern_idx")
  @@schema("auth")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_branches_mst {
  id                          String                        @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id               String                        @db.Uuid
  branch_name                 String?
  s_date                      DateTime?                     @default(now()) @db.Timestamp(6)
  phone                       String?                       @db.VarChar(50)
  email                       String?                       @db.VarChar(255)
  type                        String?                       @default("walk_in") @db.VarChar(20)
  address                     String?
  country                     String?
  city                        String?
  area                        String?
  street                      String?
  building                    String?
  floor                       String?
  latitude                    Float?
  longitude                   Float?
  rec_order                   Int?
  rec_status                  Int?                          @default(1) @db.SmallInt
  is_active                   Boolean                       @default(true)
  rec_notes                   String?                       @db.VarChar(200)
  created_at                  DateTime?                     @default(now()) @db.Timestamp(6)
  created_by                  String?                       @db.VarChar(120)
  created_info                String?
  updated_at                  DateTime?                     @db.Timestamp(6)
  updated_by                  String?                       @db.VarChar(120)
  updated_info                String?
  name                        String?
  name2                       String?
  is_main                     Boolean?                      @default(false)
  org_asm_locations_mst       org_asm_locations_mst[]
  org_tenants_mst             org_tenants_mst               @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_branch_tenant")
  org_dlv_routes_mst          org_dlv_routes_mst[]
  org_dlv_slots_mst           org_dlv_slots_mst[]
  org_invoice_mst             org_invoice_mst[]
  org_orders_mst              org_orders_mst[]
  org_stng_audit_log_tr       org_stng_audit_log_tr[]
  org_stng_effective_cache_cf org_stng_effective_cache_cf[]

  @@id([id, tenant_org_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_customer_addresses {
  id                String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  customer_id       String            @db.Uuid
  tenant_org_id     String            @db.Uuid
  address_type      String?           @default("home") @db.VarChar(20)
  label             String?           @db.VarChar(100)
  building          String?           @db.VarChar(100)
  floor             String?           @db.VarChar(50)
  apartment         String?           @db.VarChar(50)
  street            String?           @db.VarChar(200)
  area              String?           @db.VarChar(100)
  city              String?           @db.VarChar(100)
  country           String?           @default("OM") @db.VarChar(2)
  postal_code       String?           @db.VarChar(20)
  latitude          Decimal?          @db.Decimal(10, 8)
  longitude         Decimal?          @db.Decimal(11, 8)
  is_default        Boolean?          @default(false)
  delivery_notes    String?
  created_at        DateTime?         @default(now()) @db.Timestamp(6)
  created_by        String?           @db.VarChar(120)
  updated_at        DateTime?         @default(now()) @db.Timestamp(6)
  updated_by        String?           @db.VarChar(120)
  is_active         Boolean?          @default(true)
  org_customers_mst org_customers_mst @relation(fields: [customer_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_address_customer")
  org_tenants_mst   org_tenants_mst   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_address_tenant")

  @@index([customer_id, tenant_org_id], map: "idx_addresses_customer")
  @@index([tenant_org_id], map: "idx_addresses_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_customer_merge_log {
  id                    String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id         String          @db.Uuid
  source_customer_id    String          @db.Uuid
  target_customer_id    String          @db.Uuid
  merged_by             String          @db.Uuid
  merge_reason          String?
  orders_moved          Int?            @default(0)
  loyalty_points_merged Int?            @default(0)
  created_at            DateTime?       @default(now()) @db.Timestamp(6)
  org_tenants_mst       org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_merge_log_date")
  @@index([source_customer_id], map: "idx_merge_log_source")
  @@index([target_customer_id], map: "idx_merge_log_target")
  @@index([tenant_org_id], map: "idx_merge_log_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_customers_mst {
  id                     String                   @id(map: "pk_org_customers_mst") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id          String                   @db.Uuid
  customer_id            String?                  @db.Uuid
  name                   String?
  name2                  String?
  display_name           String?
  first_name             String?
  last_name              String?
  phone                  String?
  email                  String?
  type                   String?                  @default("walk_in")
  address                String?
  area                   String?
  building               String?
  floor                  String?
  preferences            Json?                    @default("{}")
  customer_source_type   String                   @default("DIRECT")
  s_date                 DateTime                 @default(now()) @db.Timestamp(6)
  loyalty_points         Int?                     @default(0)
  rec_order              Int?
  rec_status             Int?                     @default(1) @db.SmallInt
  is_active              Boolean                  @default(true)
  rec_notes              String?
  created_at             DateTime?                @default(now()) @db.Timestamp(6)
  created_by             String?                  @db.Uuid
  created_info           String?
  updated_at             DateTime?                @db.Timestamp(6)
  updated_by             String?                  @db.Uuid
  updated_info           String?
  org_customer_addresses org_customer_addresses[]
  sys_customers_mst      sys_customers_mst?       @relation(fields: [customer_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_cust_sys")
  org_tenants_mst        org_tenants_mst          @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_cust_tenant")
  org_invoice_mst        org_invoice_mst[]
  org_orders_mst         org_orders_mst[]
  org_payments_dtl_tr    org_payments_dtl_tr[]

  @@unique([tenant_org_id, customer_id], map: "ak_global_customer_id_org_cust")
  @@index([tenant_org_id], map: "idx_org_customers_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_invoice_mst {
  id                       String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  order_id                 String?                @db.Uuid
  customer_id              String?                @db.Uuid
  tenant_org_id            String                 @db.Uuid
  branch_id                String?                @db.Uuid
  invoice_no               String
  invoice_date             DateTime?              @db.Date
  subtotal                 Decimal?               @default(0) @db.Decimal(10, 3)
  discount                 Decimal?               @default(0) @db.Decimal(10, 3)
  tax                      Decimal?               @default(0) @db.Decimal(10, 3)
  tax_rate                 Decimal?               @db.Decimal(5, 3)
  total                    Decimal?               @default(0) @db.Decimal(10, 3)
  status                   String?                @default("pending")
  due_date                 DateTime?              @db.Date
  payment_method_code      String?                @db.VarChar(50)
  payment_terms            String?                @db.VarChar(50)
  paid_amount              Decimal?               @default(0) @db.Decimal(10, 3)
  paid_at                  DateTime?              @db.Timestamp(6)
  paid_by                  String?                @db.VarChar(255)
  paid_by_name             String?                @db.VarChar(255)
  handed_to_name           String?                @db.VarChar(255)
  handed_to_mobile_no      String?                @db.VarChar(50)
  handed_to_date           DateTime?              @db.Timestamp(6)
  handed_to_by_user        String?                @db.Uuid
  trans_desc               String?                @db.VarChar(255)
  customer_reference       String?                @db.VarChar(120)
  service_charge           Decimal?               @default(0) @db.Decimal(19, 4)
  service_charge_type      String?                @db.VarChar(50)
  gift_card_id             String?                @db.Uuid
  gift_card_discount_amount Decimal?              @default(0) @db.Decimal(19, 4)
  metadata                 Json?
  rec_notes                String?                @db.VarChar(1000)
  rec_status               Int?                   @default(1) @db.SmallInt
  is_active                Boolean                @default(true)
  created_at               DateTime               @default(now()) @db.Timestamp(6)
  created_by               String?                @db.VarChar(120)
  created_info             String?
  updated_at               DateTime?              @db.Timestamp(6)
  updated_by               String?                @db.VarChar(120)
  updated_info             String?
  currency_code            String?                @db.VarChar(3)
  currency_ex_rate         Decimal                @default(1.000000) @db.Decimal(10, 6)
  vat_rate                 Decimal?               @default(0) @db.Decimal(5, 2)
  vat_amount               Decimal?               @default(0) @db.Decimal(19, 4)
  discount_rate            Decimal?               @default(0) @db.Decimal(5, 2)
  discount_type            String?                @db.VarChar(20)
  promo_code_id            String?                @db.Uuid
  promo_discount_amount    Decimal?               @default(0) @db.Decimal(19, 4)
  org_branches_mst         org_branches_mst?      @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_invoice_branch")
  org_customers_mst        org_customers_mst?     @relation(fields: [customer_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_invoice_customer")
  org_gift_cards_mst       org_gift_cards_mst?   @relation(fields: [gift_card_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_invoice_gift_card")
  org_orders_mst           org_orders_mst?        @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_invoice_order")
  org_payments_dtl_tr      org_payments_dtl_tr[]
  org_tenants_mst          org_tenants_mst        @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_invoice_tenant")
  org_promo_codes_mst      org_promo_codes_mst?   @relation(fields: [promo_code_id], references: [id], onUpdate: NoAction, map: "fk_invoice_promo_code")
  org_users_mst_handed_to  org_users_mst?         @relation("invoice_handed_to_user", fields: [handed_to_by_user], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_invoice_handed_to_user")
  sys_payment_method_cd    sys_payment_method_cd? @relation(fields: [payment_method_code], references: [payment_method_code], onDelete: Restrict, onUpdate: NoAction, map: "fk_org_invoice_payment_method")

  @@unique([tenant_org_id, invoice_no])
  @@index([order_id], map: "idx_org_invoice_order")
  @@index([tenant_org_id, invoice_no], map: "idx_org_invoice_tenant_no")
  @@index([tenant_org_id, customer_id], map: "idx_org_invoice_customer")
  @@index([tenant_org_id, branch_id], map: "idx_org_invoice_branch")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_items_dtl {
  id                              String                            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  order_id                        String                            @db.Uuid
  tenant_org_id                   String                            @db.Uuid
  service_category_code           String?                           @db.VarChar(120)
  order_item_srno                 String?
  product_id                      String?                           @db.Uuid
  barcode                         String?
  quantity                        Int?                              @default(1)
  price_per_unit                  Decimal                           @db.Decimal(10, 3)
  total_price                     Decimal                           @db.Decimal(10, 3)
  status                          String?                           @default("processing")
  notes                           String?
  color                           String?                           @db.VarChar(50)
  brand                           String?                           @db.VarChar(100)
  has_stain                       Boolean?
  has_damage                      Boolean?
  metadata                        Json?                             @default("{}")
  created_at                      DateTime?                         @default(now()) @db.Timestamp(6)
  product_name                    String?                           @db.VarChar(250)
  product_name2                   String?                           @db.VarChar(250)
  stain_notes                     String?
  damage_notes                    String?
  item_status                     String?
  item_stage                      String?
  item_is_rejected                Boolean?                          @default(false)
  item_issue_id                   String?                           @db.Uuid
  item_last_step                  String?
  item_last_step_at               DateTime?                         @db.Timestamptz(6)
  item_last_step_by               String?                           @db.Uuid
  quantity_ready                  Int?                              @default(0)
  price_override                  Decimal?                          @db.Decimal(10, 3)
  override_reason                 String?
  override_by                     String?                           @db.Uuid
  org_asm_items_dtl               org_asm_items_dtl[]
  org_order_item_issues           org_order_item_issues[]
  org_order_item_pieces_dtl       org_order_item_pieces_dtl[]
  org_order_item_processing_steps org_order_item_processing_steps[]
  org_service_category_cf         org_service_category_cf?          @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_items_ctg")
  org_orders_mst                  org_orders_mst                    @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_items_order")
  org_product_data_mst            org_product_data_mst?             @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_items_prod")
  org_users_mst                   org_users_mst?                    @relation(fields: [override_by], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([id, tenant_org_id], map: "org_order_items_tenant_org_id_id_key")
  @@unique([id, order_id, tenant_org_id], map: "org_order_items_tenant_org_id_order_id_key")
  @@index([tenant_org_id], map: "idx_order_items_tenant")
  @@index([order_id], map: "idx_org_items_order")
  @@index([tenant_org_id], map: "idx_org_items_tenant")
  @@index([tenant_org_id, item_stage], map: "idx_order_items_stage")
  @@index([tenant_org_id, item_status], map: "idx_order_items_status")
  @@index([tenant_org_id, barcode], map: "idx_order_items_tenant_barcode")
  @@index([tenant_org_id, order_id], map: "idx_order_items_tenant_order")
  @@index([tenant_org_id, status], map: "idx_order_items_tenant_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_status_history {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  order_id        String          @db.Uuid
  tenant_org_id   String          @db.Uuid
  from_status     String?         @db.VarChar(50)
  to_status       String          @db.VarChar(50)
  changed_by      String?         @db.Uuid
  changed_by_name String?         @db.VarChar(255)
  changed_at      DateTime?       @default(now()) @db.Timestamp(6)
  notes           String?
  metadata        Json?           @default("{}")
  created_at      DateTime?       @default(now()) @db.Timestamp(6)
  org_orders_mst  org_orders_mst  @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_status_history_order")
  org_tenants_mst org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_status_history_tenant")
  users           users?          @relation(fields: [changed_by], references: [id], onUpdate: NoAction, map: "fk_status_history_user")

  @@index([order_id, changed_at(sort: Desc)], map: "idx_status_history_order")
  @@index([tenant_org_id, changed_at(sort: Desc)], map: "idx_status_history_tenant")
  @@index([tenant_org_id, to_status, changed_at(sort: Desc)], map: "idx_status_history_to_status")
  @@index([changed_by], map: "idx_status_history_user")
  @@index([tenant_org_id, order_id, changed_at(sort: Desc)], map: "idx_status_history_tenant_order")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_orders_mst {
  id                              String                            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                   String                            @db.Uuid
  branch_id                       String?                           @db.Uuid
  customer_id                     String                            @db.Uuid
  order_type_id                   String?                           @db.VarChar(30)
  order_no                        String                            @db.VarChar(100)
  status                          String?                           @default("intake")
  priority                        String?                           @default("normal")
  total_items                     Int?                              @default(0)
  subtotal                        Decimal?                          @default(0) @db.Decimal(10, 3)
  discount                        Decimal?                          @default(0) @db.Decimal(10, 3)
  tax                             Decimal?                          @default(0) @db.Decimal(10, 3)
  total                           Decimal?                          @default(0) @db.Decimal(10, 3)
  payment_status                  String?                           @default("pending") @db.VarChar(20)
  payment_method_code             String?                           @db.VarChar(50)
  paid_amount                     Decimal?                          @default(0) @db.Decimal(10, 3)
  paid_at                         DateTime?                         @db.Timestamp(6)
  paid_by                         String?                           @db.VarChar(255)
  payment_notes                   String?
  received_at                     DateTime?                         @default(now()) @db.Timestamp(6)
  ready_by                        DateTime?                         @db.Timestamp(6)
  ready_at                        DateTime?                         @db.Timestamp(6)
  delivered_at                    DateTime?                         @db.Timestamp(6)
  customer_notes                  String?
  internal_notes                  String?
  created_at                      DateTime?                         @default(now()) @db.Timestamp(6)
  updated_at                      DateTime?                         @default(now()) @db.Timestamp(6)
  preparation_status              String?                           @default("pending") @db.VarChar(20)
  prepared_at                     DateTime?                         @db.Timestamp(6)
  prepared_by                     String?                           @db.Uuid
  ready_by_override               DateTime?                         @db.Timestamp(6)
  priority_multiplier             Decimal?                          @default(1.0) @db.Decimal(4, 2)
  photo_urls                      Json?                             @default("[]")
  bag_count                       Int?                              @default(1)
  qr_code                         String?
  barcode                         String?
  service_category_code           String?                           @db.VarChar(120)
  workflow_template_id            String?                           @db.Uuid
  current_status                  String?
  current_stage                   String?
  parent_order_id                 String?                           @db.Uuid
  order_subtype                   String?
  has_split                       Boolean?                          @default(false)
  is_rejected                     Boolean?                          @default(false)
  rejected_from_stage             String?
  issue_id                        String?                           @db.Uuid
  has_issue                       Boolean?                          @default(false)
  ready_by_at_new                 DateTime?                         @db.Timestamptz(6)
  last_transition_at              DateTime?                         @db.Timestamptz(6)
  last_transition_by              String?                           @db.Uuid
  is_order_quick_drop             Boolean?                          @default(false)
  quick_drop_quantity             Int?
  rack_location                   String?                           @db.VarChar(100)
  tax_rate                        Decimal?                          @db.Decimal(5, 3)
  currency_code                   String?                           @db.VarChar(3)
  currency_ex_rate                Decimal                           @default(1.000000) @db.Decimal(10, 6)
  vat_rate                        Decimal?                          @default(0) @db.Decimal(5, 2)
  vat_amount                      Decimal?                          @default(0) @db.Decimal(19, 4)
  discount_rate                   Decimal?                          @default(0) @db.Decimal(5, 2)
  discount_type                   String?                           @db.VarChar(20)
  promo_code_id                   String?                           @db.Uuid
  gift_card_id                    String?                           @db.Uuid
  promo_discount_amount           Decimal?                          @default(0) @db.Decimal(19, 4)
  gift_card_discount_amount       Decimal?                          @default(0) @db.Decimal(19, 4)
  payment_type_code               String?                           @db.VarChar(30)
  service_charge                  Decimal?                          @default(0) @db.Decimal(19, 4)
  service_charge_type             String?                           @db.VarChar(50)
  payment_terms                   String?                           @db.VarChar(50)
  payment_due_date                DateTime?                         @db.Date
  org_asm_tasks_mst               org_asm_tasks_mst[]
  org_dlv_stops_dtl               org_dlv_stops_dtl[]
  org_invoice_mst                 org_invoice_mst[]
  org_ord_transition_events       org_ord_transition_events[]
  org_order_history               org_order_history[]
  org_order_item_issues           org_order_item_issues[]
  org_order_item_pieces_dtl       org_order_item_pieces_dtl[]
  org_order_item_processing_steps org_order_item_processing_steps[]
  org_order_items_dtl             org_order_items_dtl[]
  org_order_status_history        org_order_status_history[]
  org_orders_mst                  org_orders_mst?                   @relation("org_orders_mstToorg_orders_mst", fields: [parent_order_id], references: [id], onUpdate: NoAction, map: "fk_order_parent_order")
  other_org_orders_mst            org_orders_mst[]                  @relation("org_orders_mstToorg_orders_mst")
  org_gift_cards_mst              org_gift_cards_mst?               @relation(fields: [gift_card_id], references: [id], onUpdate: NoAction, map: "fk_orders_gift_card")
  sys_payment_type_cd             sys_payment_type_cd?              @relation(fields: [payment_type_code], references: [payment_type_code], onUpdate: NoAction, map: "fk_orders_payment_type")
  org_promo_codes_mst             org_promo_codes_mst?              @relation(fields: [promo_code_id], references: [id], onUpdate: NoAction, map: "fk_orders_promo_code")
  org_branches_mst                org_branches_mst?                 @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_order_branch")
  org_customers_mst               org_customers_mst                 @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_order_customer")
  org_tenants_mst                 org_tenants_mst                   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_order_tenant")
  sys_order_type_cd               sys_order_type_cd?                @relation(fields: [order_type_id], references: [order_type_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_order_type")
  sys_payment_method_cd           sys_payment_method_cd?            @relation(fields: [payment_method_code], references: [payment_method_code], onDelete: Restrict, onUpdate: NoAction, map: "fk_org_orders_payment_method")
  sys_workflow_template_cd        sys_workflow_template_cd?         @relation(fields: [workflow_template_id], references: [template_id], onUpdate: NoAction)
  org_payments_dtl_tr             org_payments_dtl_tr[]
  org_pck_packing_lists_mst       org_pck_packing_lists_mst[]
  org_qa_decisions_tr             org_qa_decisions_tr[]
  org_rcpt_receipts_mst           org_rcpt_receipts_mst[]

  @@unique([tenant_org_id, order_no])
  @@unique([id, tenant_org_id], map: "org_orders_mst_tenant_org_id_order_id_key")
  @@index([tenant_org_id, preparation_status], map: "idx_orders_preparation_status")
  @@index([tenant_org_id, ready_by], map: "idx_orders_ready_by")
  @@index([tenant_org_id, received_at(sort: Desc)], map: "idx_orders_received_at")
  @@index([tenant_org_id, service_category_code], map: "idx_orders_service_category")
  @@index([tenant_org_id, status], map: "idx_orders_status")
  @@index([tenant_org_id, status, received_at(sort: Desc)], map: "idx_orders_status_received")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_org_orders_created")
  @@index([tenant_org_id, customer_id], map: "idx_org_orders_customer")
  @@index([tenant_org_id, status], map: "idx_org_orders_status")
  @@index([tenant_org_id, order_no], map: "idx_org_orders_tenant_no")
  @@index([tenant_org_id, current_status], map: "idx_orders_current_status")
  @@index([tenant_org_id, parent_order_id], map: "idx_orders_parent_order")
  @@index([tenant_org_id, current_status, last_transition_at(sort: Desc)], map: "idx_orders_status_transition")
  @@index([tenant_org_id, workflow_template_id], map: "idx_orders_workflow_template")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_payments_dtl_tr {
  id                       String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  invoice_id               String?               @db.Uuid
  tenant_org_id            String                @db.Uuid
  paid_amount              Decimal?              @default(0) @db.Decimal(19, 4)
  status                   String?               @default("pending")
  due_date                 DateTime?             @db.Date
  payment_method_code      String                @db.VarChar(50)
  paid_at                  DateTime?             @db.Timestamp(6)
  paid_by                  String?               @db.VarChar(255)
  gateway                  String?
  transaction_id           String?
  metadata                 Json?
  rec_notes                String?               @db.VarChar(1000)
  created_at               DateTime              @default(now()) @db.Timestamp(6)
  created_by               String?               @db.VarChar(120)
  created_info             String?
  updated_at               DateTime?             @db.Timestamp(6)
  updated_by               String?               @db.VarChar(120)
  updated_info             String?
  order_id                 String?               @db.Uuid
  customer_id              String?               @db.Uuid
  currency_code            String                @db.VarChar(3)
  tax_amount               Decimal?              @default(0) @db.Decimal(19, 4)
  vat_amount               Decimal?              @default(0) @db.Decimal(19, 4)
  payment_type_code        String?               @db.VarChar(30)
  subtotal                 Decimal?              @default(0) @db.Decimal(19, 4)
  discount_rate            Decimal?              @default(0) @db.Decimal(5, 2)
  discount_amount          Decimal?              @default(0) @db.Decimal(19, 4)
  vat_rate                 Decimal?              @default(0) @db.Decimal(5, 2)
  manual_discount_amount   Decimal?              @default(0) @db.Decimal(19, 4)
  promo_discount_amount    Decimal?              @default(0) @db.Decimal(19, 4)
  gift_card_applied_amount Decimal?              @default(0) @db.Decimal(19, 4)
  promo_code_id            String?               @db.Uuid
  gift_card_id             String?               @db.Uuid
  currency_ex_rate         Decimal               @default(1.000000) @db.Decimal(10, 6)
  check_number             String?               @db.VarChar(100)
  check_bank               String?               @db.VarChar(100)
  check_date               DateTime?             @db.Date
  payment_channel          String?               @default("web_admin") @db.VarChar(30)
  trans_desc               String?               @db.VarChar(500)
  org_invoice_mst          org_invoice_mst?      @relation(fields: [invoice_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_payment_invoice")
  org_tenants_mst          org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_payment_tenant")
  sys_payment_method_cd    sys_payment_method_cd @relation(fields: [payment_method_code], references: [payment_method_code], onUpdate: NoAction, map: "fk_org_payments_payment_method")
  sys_payment_type_cd      sys_payment_type_cd?  @relation(fields: [payment_type_code], references: [payment_type_code], onUpdate: NoAction, map: "fk_org_payments_payment_type")
  org_gift_cards_mst       org_gift_cards_mst?   @relation(fields: [gift_card_id], references: [id], onUpdate: NoAction, map: "fk_payments_gift_card")
  org_promo_codes_mst      org_promo_codes_mst?  @relation(fields: [promo_code_id], references: [id], onUpdate: NoAction, map: "fk_payments_promo_code")
  org_customers_mst        org_customers_mst?    @relation(fields: [customer_id], references: [id], onUpdate: NoAction)
  org_orders_mst           org_orders_mst?       @relation(fields: [order_id], references: [id], onUpdate: NoAction)

  @@index([invoice_id], map: "idx_org_payments_invoice")
  @@index([tenant_org_id], map: "idx_org_payments_tenant")
  org_payment_audit_log org_payment_audit_log[]
  @@schema("public")
}

/// Payment audit log: append-only history (CREATED, CANCELLED, REFUNDED, NOTES_UPDATED)
model org_payment_audit_log {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id String   @db.Uuid
  payment_id    String   @db.Uuid
  action_type   String   @db.VarChar(30)
  before_value  Json?
  after_value   Json?
  changed_by    String?  @db.VarChar(120)
  changed_at    DateTime @default(now()) @db.Timestamptz(6)
  metadata      Json?
  org_payments_dtl_tr org_payments_dtl_tr @relation(fields: [payment_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_tenants_mst      org_tenants_mst    @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  @@index([tenant_org_id, payment_id])
  @@index([tenant_org_id, changed_at(sort: Desc)])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_product_data_mst {
  id                         String                      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id              String                      @db.Uuid
  service_category_code      String?
  product_code               String
  product_name               String?
  product_name2              String?
  hint_text                  String?
  is_retail_item             Boolean?                    @default(false)
  product_group1             String?
  product_group2             String?
  product_group3             String?
  product_type               Int?
  price_type                 String?
  product_unit               String?                     @db.VarChar(60)
  default_sell_price         Decimal?                    @db.Decimal(10, 3)
  default_express_sell_price Decimal?                    @db.Decimal(10, 3)
  product_cost               Decimal?                    @db.Decimal(10, 3)
  min_sell_price             Decimal?                    @db.Decimal(10, 3)
  min_quantity               Int?
  pieces_per_product         Int?
  extra_days                 Int?
  turnaround_hh              Decimal?                    @db.Decimal(4, 2)
  turnaround_hh_express      Decimal?                    @db.Decimal(4, 2)
  multiplier_express         Decimal?                    @db.Decimal(4, 2)
  product_order              Int?
  is_tax_exempt              Int?
  tags                       Json?                       @db.Json
  id_sku                     String?
  is_active                  Boolean                     @default(true)
  product_color1             String?
  product_color2             String?
  product_color3             String?
  product_icon               String?
  product_image              String?
  rec_order                  Int?
  rec_notes                  String?
  rec_status                 Int?                        @default(1) @db.SmallInt
  created_at                 DateTime?                   @default(now()) @db.Timestamp(6)
  created_by                 String?
  created_info               String?
  updated_at                 DateTime?                   @db.Timestamp(6)
  updated_by                 String?
  updated_info               String?
  item_type_code             String?                     @db.VarChar(50)
  org_order_item_pieces_dtl  org_order_item_pieces_dtl[]
  org_order_items_dtl        org_order_items_dtl[]
  org_price_history_audit    org_price_history_audit[]
  org_price_list_items_dtl   org_price_list_items_dtl[]
  org_service_category_cf    org_service_category_cf?    @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_prod_ctg")
  org_tenants_mst            org_tenants_mst             @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_prod_tenant")
  sys_item_type_cd           sys_item_type_cd?           @relation(fields: [item_type_code], references: [item_type_code], onUpdate: NoAction, map: "fk_product_item_type")

  @@unique([tenant_org_id, product_code])
  @@unique([tenant_org_id, id], map: "uk_org_products_tenant_id")
  @@index([tenant_org_id, service_category_code], map: "idx_org_products_category")
  @@index([tenant_org_id], map: "idx_org_products_tenant")
  @@index([tenant_org_id, item_type_code], map: "idx_products_item_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_service_category_cf {
  tenant_org_id                           String                                   @db.Uuid
  service_category_code                   String                                   @db.VarChar(120)
  is_enabled                              Boolean?                                 @default(true)
  is_active                               Boolean?                                 @default(true)
  rec_order                               Int?                                     @default(1)
  rec_notes                               String?
  rec_status                              Int?                                     @default(1) @db.SmallInt
  created_at                              DateTime                                 @default(now()) @db.Timestamp(6)
  created_by                              String?
  created_info                            String?
  updated_at                              DateTime?                                @db.Timestamp(6)
  updated_by                              String?
  updated_info                            String?
  name                                    String?
  name2                                   String?
  display_name                            String?
  org_order_item_pieces_dtl               org_order_item_pieces_dtl[]
  org_order_items_dtl                     org_order_items_dtl[]
  org_product_data_mst                    org_product_data_mst[]
  sys_service_category_cd                 sys_service_category_cd                  @relation(fields: [service_category_code], references: [service_category_code], onDelete: NoAction, onUpdate: NoAction, map: "fk_org_ctg_sys")
  org_tenants_mst                         org_tenants_mst                          @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_ctg_tenant")
  org_svc_cat_proc_steps_cf               org_svc_cat_proc_steps_cf[]
  org_tenant_service_category_workflow_cf org_tenant_service_category_workflow_cf?
  org_workflow_settings_cf                org_workflow_settings_cf?

  @@id([tenant_org_id, service_category_code])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_subscriptions_mst {
  id                       String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id            String                 @db.Uuid
  plan                     String?                @default("free") @db.VarChar(20)
  status                   String?                @default("trial") @db.VarChar(20)
  orders_limit             Int?                   @default(20)
  orders_used              Int?                   @default(0)
  branch_limit             Int?                   @default(1)
  user_limit               Int?                   @default(2)
  start_date               DateTime?              @default(now()) @db.Timestamp(6)
  end_date                 DateTime               @db.Timestamp(6)
  trial_ends               DateTime?              @db.Timestamp(6)
  last_payment_date        DateTime?              @db.Timestamp(6)
  last_payment_amount      Decimal?               @db.Decimal(10, 2)
  last_payment_method_code String?                @db.VarChar(50)
  payment_reference        String?                @db.VarChar(100)
  payment_notes            String?
  last_invoice_number      String?                @db.VarChar(50)
  last_invoice_date        DateTime?              @db.Timestamp(6)
  is_active                Boolean?               @default(true)
  is_enabled               Boolean?               @default(true)
  rec_status               Int?                   @default(1) @db.SmallInt
  rec_notes                String?
  created_at               DateTime?              @default(now()) @db.Timestamp(6)
  created_by               String?
  created_info             String?
  updated_at               DateTime?              @db.Timestamp(6)
  updated_by               String?
  updated_info             String?
  auto_renew               Boolean?               @default(true)
  cancellation_date        DateTime?              @db.Timestamp(6)
  cancellation_reason      String?
  sys_payment_method_cd    sys_payment_method_cd? @relation(fields: [last_payment_method_code], references: [payment_method_code], onDelete: Restrict, onUpdate: NoAction, map: "fk_org_subs_payment_method")
  org_tenants_mst          org_tenants_mst        @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_subs_tenant")

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_tenants_mst {
  id                               String                             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name                             String                             @db.VarChar(255)
  name2                            String?                            @db.VarChar(255)
  slug                             String                             @unique @db.VarChar(100)
  email                            String                             @unique @db.VarChar(255)
  phone                            String                             @db.VarChar(50)
  s_current_plan                   String?                            @default("FREE_TRIAL") @db.VarChar(120)
  address                          String?
  city                             String?                            @db.VarChar(100)
  country                          String?                            @default("OM") @db.VarChar(2)
  currency                         String?                            @default("OMR") @db.VarChar(3)
  timezone                         String?                            @default("Asia/Muscat") @db.VarChar(50)
  language                         String?                            @default("en") @db.VarChar(5)
  is_active                        Boolean?                           @default(true)
  status                           String?                            @default("trial") @db.VarChar(20)
  created_at                       DateTime?                          @default(now()) @db.Timestamp(6)
  updated_at                       DateTime?                          @default(now()) @db.Timestamp(6)
  logo_url                         String?                            @db.VarChar(500)
  brand_color_primary              String?                            @default("#3B82F6") @db.VarChar(7)
  brand_color_secondary            String?                            @default("#10B981") @db.VarChar(7)
  business_hours                   Json?                              @default("{\"fri\": {\"open\": \"08:00\", \"close\": \"18:00\"}, \"mon\": {\"open\": \"08:00\", \"close\": \"18:00\"}, \"sat\": {\"open\": \"09:00\", \"close\": \"14:00\"}, \"sun\": null, \"thu\": {\"open\": \"08:00\", \"close\": \"18:00\"}, \"tue\": {\"open\": \"08:00\", \"close\": \"18:00\"}, \"wed\": {\"open\": \"08:00\", \"close\": \"18:00\"}}")
  feature_flags                    Json?                              @default("{\"printing\": false, \"api_access\": false, \"driver_app\": false, \"white_label\": false, \"multi_branch\": false, \"pdf_invoices\": false, \"b2b_contracts\": false, \"in_app_receipts\": false, \"loyalty_programs\": false, \"whatsapp_receipts\": true, \"advanced_analytics\": false, \"marketplace_listings\": false}")
  business_type                    String?                            @db.VarChar(50)
  onboarding_completed             Boolean?                           @default(false)
  country_code                     String?                            @default("OM") @db.VarChar(2)
  phone_country_code               String?                            @default("+968") @db.VarChar(5)
  date_format                      String?                            @default("DD/MM/YYYY") @db.VarChar(20)
  time_format                      String?                            @default("24h") @db.VarChar(5)
  first_day_of_week                Int?                               @default(6)
  business_type_code               String?                            @db.VarChar(60)
  stng_profile_code                String?
  stng_profile_version_applied     Int?
  stng_profile_locked              Boolean?                           @default(false)
  created_by                       String?
  created_info                     String?
  updated_by                       String?
  updated_info                     String?
  rec_status                       Int?                               @default(1) @db.SmallInt
  rec_order                        Int?
  rec_notes                        String?
  cmx_effective_permissions        cmx_effective_permissions[] @ignore
  hq_tenant_status_history         hq_tenant_status_history[]
  org_asm_locations_mst            org_asm_locations_mst[]
  org_asm_tasks_mst                org_asm_tasks_mst[]
  org_branches_mst                 org_branches_mst[]
  org_customer_addresses           org_customer_addresses[]
  org_customer_merge_log           org_customer_merge_log[]
  org_customers_mst                org_customers_mst[]
  org_discount_rules_cf            org_discount_rules_cf[]
  org_dlv_routes_mst               org_dlv_routes_mst[]
  org_dlv_slots_mst                org_dlv_slots_mst[]
  org_ff_overrides_cf              org_ff_overrides_cf[]
  org_gift_card_transactions       org_gift_card_transactions[]
  org_gift_cards_mst               org_gift_cards_mst[]
  org_invoice_mst                  org_invoice_mst[]
  org_order_history                org_order_history[]
  org_order_item_issues            org_order_item_issues[]
  org_order_item_pieces_dtl        org_order_item_pieces_dtl[]
  org_order_item_processing_steps  org_order_item_processing_steps[]
  org_order_status_history         org_order_status_history[]
  org_orders_mst                   org_orders_mst[]
  org_payment_audit_log             org_payment_audit_log[]
  org_payment_reconciliation_log   org_payment_reconciliation_log[]
  org_payments_dtl_tr              org_payments_dtl_tr[]
  org_pck_packing_lists_mst        org_pck_packing_lists_mst[]
  org_pln_change_history_tr        org_pln_change_history_tr[]
  org_pln_subscriptions_mst        org_pln_subscriptions_mst[]
  org_price_history_audit          org_price_history_audit[]
  org_price_list_items_dtl         org_price_list_items_dtl[]
  org_price_lists_mst              org_price_lists_mst[]
  org_product_data_mst             org_product_data_mst[]
  org_promo_codes_mst              org_promo_codes_mst[]
  org_promo_usage_log              org_promo_usage_log[]
  org_rcpt_receipts_mst            org_rcpt_receipts_mst[]
  org_rcpt_templates_cf            org_rcpt_templates_cf[]
  org_service_category_cf          org_service_category_cf[]
  org_stng_audit_log_tr            org_stng_audit_log_tr[]
  org_stng_effective_cache_cf      org_stng_effective_cache_cf[]
  org_subscriptions_mst            org_subscriptions_mst[]
  org_svc_cat_proc_steps_cf        org_svc_cat_proc_steps_cf[]
  org_tenant_settings_cf           org_tenant_settings_cf[]
  org_tenant_workflow_settings_cf  org_tenant_workflow_settings_cf?
  org_tenant_workflow_templates_cf org_tenant_workflow_templates_cf[]
  sys_main_business_type_cd        sys_main_business_type_cd?         @relation(fields: [business_type_code], references: [business_type_code], onUpdate: NoAction, map: "fk_tenant_business_type")
  sys_stng_profiles_mst            sys_stng_profiles_mst?             @relation(fields: [stng_profile_code], references: [stng_profile_code], onDelete: NoAction, onUpdate: NoAction)
  org_usage_tracking               org_usage_tracking[]
  org_users_mst                    org_users_mst[]
  org_workflow_rules               org_workflow_rules[]
  org_workflow_settings_cf         org_workflow_settings_cf[]
  sys_audit_log                    sys_audit_log[]
  sys_bill_discount_redemptions_tr sys_bill_discount_redemptions_tr[]
  sys_bill_dunning_mst             sys_bill_dunning_mst[]
  sys_bill_invoice_payments_tr     sys_bill_invoice_payments_tr[]
  sys_bill_invoices_mst            sys_bill_invoices_mst[]
  sys_bill_payment_methods_mst     sys_bill_payment_methods_mst[]
  sys_bill_usage_metrics_daily     sys_bill_usage_metrics_daily[]
  sys_tenant_lifecycle             sys_tenant_lifecycle?
  sys_tenant_metrics_daily         sys_tenant_metrics_daily[]

  @@index([business_type_code], map: "idx_tenant_business_type")
  @@index([stng_profile_code], map: "idx_org_tenants_profile")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model org_usage_tracking {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id   String          @db.Uuid
  period_start    DateTime        @db.Date
  period_end      DateTime        @db.Date
  orders_count    Int?            @default(0)
  users_count     Int?            @default(0)
  branches_count  Int?            @default(0)
  storage_mb      Decimal?        @default(0) @db.Decimal(10, 2)
  api_calls       Int?            @default(0)
  created_at      DateTime?       @default(now()) @db.Timestamp(6)
  updated_at      DateTime?       @default(now()) @db.Timestamp(6)
  org_tenants_mst org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, period_start])
  @@index([tenant_org_id, period_start(sort: Desc)], map: "idx_usage_tenant_period")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_users_mst {
  id                          String                        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                     String                        @db.Uuid
  tenant_org_id               String                        @db.Uuid
  display_name                String?                       @db.VarChar(255)
  role                        String                        @default("viewer") @db.VarChar(50)
  is_active                   Boolean                       @default(true)
  last_login_at               DateTime?                     @db.Timestamp(6)
  login_count                 Int?                          @default(0)
  preferences                 Json?                         @default("{}")
  created_at                  DateTime?                     @default(now()) @db.Timestamp(6)
  created_by                  String?                       @db.VarChar(120)
  created_info                String?
  updated_at                  DateTime?                     @db.Timestamp(6)
  updated_by                  String?                       @db.VarChar(120)
  updated_info                String?
  rec_status                  Int?                          @default(1) @db.SmallInt
  rec_notes                   String?                       @db.VarChar(200)
  failed_login_attempts       Int?                          @default(0)
  last_failed_login_at        DateTime?                     @db.Timestamp(6)
  locked_until                DateTime?                     @db.Timestamp(6)
  lock_reason                 String?                       @db.VarChar(200)
  main_branch_id              String?                       @db.Uuid
  name                        String?
  name2                       String?
  first_name                  String?
  last_name                   String?
  password_hash               String?
  phone                       String?                       @db.VarChar(50)
  email                       String?                       @db.VarChar(255)
  type                        String?                       @default("employee") @db.VarChar(120)
  address                     String?
  area                        String?
  building                    String?
  floor                       String?
  is_user                     Boolean                       @default(true)
  org_invoice_mst_handed_to   org_invoice_mst[]             @relation("invoice_handed_to_user")
  org_order_items_dtl         org_order_items_dtl[]
  org_stng_audit_log_tr       org_stng_audit_log_tr[]
  org_stng_effective_cache_cf org_stng_effective_cache_cf[]
  org_tenants_mst             org_tenants_mst               @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                       users                         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, tenant_org_id])
  @@index([last_login_at(sort: Desc)], map: "idx_org_users_last_login")
  @@index([user_id], map: "idx_org_users_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_workflow_rules {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String          @db.Uuid
  from_status      String          @db.VarChar(50)
  to_status        String          @db.VarChar(50)
  is_allowed       Boolean?        @default(true)
  requires_role    String?         @db.VarChar(50)
  validation_rules Json?           @default("{}")
  created_at       DateTime?       @default(now()) @db.Timestamp(6)
  updated_at       DateTime?       @db.Timestamp(6)
  org_tenants_mst  org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_workflow_rules_tenant")

  @@unique([tenant_org_id, from_status, to_status])
  @@index([tenant_org_id], map: "idx_workflow_rules_tenant")
  @@index([tenant_org_id, from_status, to_status], map: "idx_workflow_rules_transition")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_workflow_settings_cf {
  id                      String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id           String                   @db.Uuid
  service_category_code   String?                  @db.VarChar(120)
  workflow_steps          Json                     @default("[\"DRAFT\", \"INTAKE\", \"PREPARATION\", \"SORTING\", \"WASHING\", \"DRYING\", \"FINISHING\", \"ASSEMBLY\", \"QA\", \"PACKING\", \"READY\", \"OUT_FOR_DELIVERY\", \"DELIVERED\", \"CLOSED\"]")
  status_transitions      Json                     @default("{}")
  quality_gate_rules      Json?                    @default("{}")
  is_active               Boolean?                 @default(true)
  created_at              DateTime?                @default(now()) @db.Timestamp(6)
  updated_at              DateTime?                @db.Timestamp(6)
  created_by              String?                  @db.Uuid
  updated_by              String?                  @db.Uuid
  org_service_category_cf org_service_category_cf? @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_workflow_settings_category")
  org_tenants_mst         org_tenants_mst          @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_workflow_settings_tenant")

  @@unique([tenant_org_id, service_category_code])
  @@index([tenant_org_id, service_category_code], map: "idx_workflow_settings_category")
  @@index([tenant_org_id], map: "idx_workflow_settings_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_audit_log {
  id              String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id         String?          @db.Uuid
  tenant_org_id   String?          @db.Uuid
  action          String           @db.VarChar(100)
  entity_type     String?          @db.VarChar(100)
  entity_id       String?          @db.Uuid
  old_values      Json?
  new_values      Json?
  ip_address      String?          @db.Inet
  user_agent      String?
  request_id      String?          @db.VarChar(120)
  status          String?          @default("success") @db.VarChar(20)
  error_message   String?
  created_at      DateTime?        @default(now()) @db.Timestamp(6)
  org_tenants_mst org_tenants_mst? @relation(fields: [tenant_org_id], references: [id], onUpdate: NoAction)
  users           users?           @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([action, created_at(sort: Desc)], map: "idx_audit_action")
  @@index([created_at(sort: Desc)], map: "idx_audit_created")
  @@index([entity_type, entity_id], map: "idx_audit_entity")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_audit_tenant")
  @@index([user_id, created_at(sort: Desc)], map: "idx_audit_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model sys_customers_mst {
  id                   String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  customer_source_type String              @default("DIRECT")
  first_name           String?
  last_name            String?
  display_name         String?
  name                 String?
  name2                String?
  phone                String?
  email                String?
  type                 String?             @default("walk_in")
  address              String?
  area                 String?
  building             String?
  floor                String?
  preferences          Json?               @default("{}")
  first_tenant_org_id  String?             @db.Uuid
  created_at           DateTime?           @default(now()) @db.Timestamp(6)
  updated_at           DateTime?           @default(now()) @db.Timestamp(6)
  customer_number      String?             @db.VarChar(50)
  profile_status       String?             @default("guest") @db.VarChar(20)
  phone_verified       Boolean?            @default(false)
  email_verified       Boolean?            @default(false)
  avatar_url           String?             @db.VarChar(500)
  created_by           String?
  created_info         String?
  updated_by           String?
  updated_info         String?
  org_customers_mst    org_customers_mst[]

  @@index([profile_status], map: "idx_customers_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_order_type_cd {
  order_type_id     String           @id @db.VarChar(30)
  order_type_name   String?          @db.VarChar(250)
  order_type_name2  String?          @db.VarChar(250)
  is_active         Boolean          @default(true)
  rec_notes         String?          @db.VarChar(200)
  created_at        DateTime?        @default(now()) @db.Timestamp(6)
  updated_at        DateTime?        @db.Timestamp(6)
  order_type_color1 String?          @db.VarChar(60)
  order_type_color2 String?          @db.VarChar(60)
  order_type_color3 String?          @db.VarChar(60)
  order_type_icon   String?          @db.VarChar(120)
  order_type_image  String?          @db.VarChar(120)
  org_orders_mst    org_orders_mst[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_otp_codes {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  phone       String    @db.VarChar(50)
  code        String    @db.VarChar(6)
  purpose     String    @db.VarChar(20)
  expires_at  DateTime  @db.Timestamp(6)
  verified_at DateTime? @db.Timestamp(6)
  attempts    Int?      @default(0)
  created_at  DateTime? @default(now()) @db.Timestamp(6)

  @@index([expires_at], map: "idx_otp_expires")
  @@index([phone, expires_at], map: "idx_otp_phone")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_plan_limits {
  plan_code         String    @id @db.VarChar(50)
  plan_name         String    @db.VarChar(100)
  plan_name2        String?   @db.VarChar(100)
  plan_description  String?
  plan_description2 String?
  orders_limit      Int
  users_limit       Int
  branches_limit    Int
  storage_mb_limit  Int
  price_monthly     Decimal   @db.Decimal(10, 2)
  price_yearly      Decimal?  @db.Decimal(10, 2)
  feature_flags     Json
  is_public         Boolean?  @default(true)
  display_order     Int?
  is_active         Boolean?  @default(true)
  created_at        DateTime? @default(now()) @db.Timestamp(6)
  updated_at        DateTime? @default(now()) @db.Timestamp(6)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_service_category_cd {
  service_category_code         String                          @id @db.VarChar(120)
  ctg_name                      String                          @db.VarChar(250)
  ctg_name2                     String?                         @db.VarChar(250)
  ctg_desc                      String?                         @db.VarChar(600)
  turnaround_hh                 Decimal?                        @db.Decimal(4, 2)
  turnaround_hh_express         Decimal?                        @db.Decimal(4, 2)
  multiplier_express            Decimal?                        @db.Decimal(4, 2)
  is_builtin                    Boolean                         @default(false)
  has_fee                       Boolean                         @default(false)
  is_mandatory                  Boolean                         @default(false)
  is_active                     Boolean                         @default(true)
  rec_order                     Int?                            @default(1)
  rec_status                    Int?                            @default(1) @db.SmallInt
  rec_notes                     String?                         @db.VarChar(200)
  created_at                    DateTime?                       @default(now()) @db.Timestamp(6)
  updated_at                    DateTime?                       @db.Timestamp(6)
  service_category_color1       String?                         @db.VarChar(60)
  service_category_color2       String?                         @db.VarChar(60)
  service_category_color3       String?                         @db.VarChar(60)
  service_category_icon         String?                         @db.VarChar(120)
  service_category_image        String?                         @db.VarChar(120)
  code                          String                          @unique(map: "idx_service_category_code_unique") @db.VarChar(50)
  name                          String                          @db.VarChar(250)
  name2                         String?                         @db.VarChar(250)
  description                   String?
  description2                  String?
  display_order                 Int?                            @default(0)
  icon                          String?                         @db.VarChar(100)
  color                         String?                         @db.VarChar(60)
  is_system                     Boolean?                        @default(true)
  metadata                      Json?
  created_by                    String?                         @db.Uuid
  updated_by                    String?                         @db.Uuid
  org_service_category_cf       org_service_category_cf[]
  sys_service_prod_templates_cd sys_service_prod_templates_cd[]
  sys_svc_cat_proc_steps        sys_svc_cat_proc_steps[]

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_history {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id   String          @db.Uuid
  order_id        String          @db.Uuid
  action_type     String
  from_value      String?
  to_value        String?
  payload         Json?           @default("{}")
  done_by         String?         @db.Uuid
  done_at         DateTime?       @default(now()) @db.Timestamptz(6)
  created_at      DateTime?       @default(now()) @db.Timestamptz(6)
  org_orders_mst  org_orders_mst  @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_history_order")
  org_tenants_mst org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_history_tenant")
  users           users?          @relation(fields: [done_by], references: [id], onUpdate: NoAction, map: "fk_history_user")

  @@index([tenant_org_id, action_type, done_at(sort: Desc)], map: "idx_history_action_type")
  @@index([order_id, action_type, done_at(sort: Desc)], map: "idx_history_order_action")
  @@index([order_id, done_at(sort: Desc)], map: "idx_history_order_timeline")
  @@index([tenant_org_id, done_at(sort: Desc)], map: "idx_history_tenant")
  @@index([tenant_org_id, action_type, done_at(sort: Desc)], map: "idx_history_tenant_action")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_item_issues {
  id                                            String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                                 String              @db.Uuid
  order_id                                      String              @db.Uuid
  order_item_id                                 String              @db.Uuid
  issue_code                                    String
  issue_text                                    String
  photo_url                                     String?
  priority                                      String?             @default("normal")
  created_by                                    String?             @db.Uuid
  created_at                                    DateTime?           @default(now()) @db.Timestamptz(6)
  solved_at                                     DateTime?           @db.Timestamptz(6)
  solved_by                                     String?             @db.Uuid
  solved_notes                                  String?
  metadata                                      Json?               @default("{}")
  users_org_order_item_issues_created_byTousers users?              @relation("org_order_item_issues_created_byTousers", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_issue_created_by")
  org_orders_mst                                org_orders_mst      @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_issue_order")
  org_order_items_dtl                           org_order_items_dtl @relation(fields: [order_item_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_issue_order_item")
  users_org_order_item_issues_solved_byTousers  users?              @relation("org_order_item_issues_solved_byTousers", fields: [solved_by], references: [id], onUpdate: NoAction, map: "fk_issue_solved_by")
  org_tenants_mst                               org_tenants_mst     @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_issue_tenant")

  @@index([order_id, created_at(sort: Desc)], map: "idx_issue_order")
  @@index([order_item_id, created_at(sort: Desc)], map: "idx_issue_order_item")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_issue_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_item_processing_steps {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id       String              @db.Uuid
  order_id            String              @db.Uuid
  order_item_id       String              @db.Uuid
  step_code           String
  step_seq            Int
  done_by             String?             @db.Uuid
  done_at             DateTime?           @default(now()) @db.Timestamptz(6)
  notes               String?
  metadata            Json?               @default("{}")
  users               users?              @relation(fields: [done_by], references: [id], onUpdate: NoAction, map: "fk_step_done_by")
  org_orders_mst      org_orders_mst      @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_step_order")
  org_order_items_dtl org_order_items_dtl @relation(fields: [order_item_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_step_order_item")
  org_tenants_mst     org_tenants_mst     @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_step_tenant")

  @@index([tenant_org_id, step_code, done_at(sort: Desc)], map: "idx_step_code")
  @@index([order_item_id, step_seq], map: "idx_step_item_sequence")
  @@index([order_id, done_at(sort: Desc)], map: "idx_step_order")
  @@index([order_item_id, done_at(sort: Desc)], map: "idx_step_order_item")
  @@index([tenant_org_id, done_at(sort: Desc)], map: "idx_step_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_price_list_items_dtl {
  id                   String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id        String               @db.Uuid
  price_list_id        String               @db.Uuid
  product_id           String               @db.Uuid
  price                Decimal              @db.Decimal(10, 3)
  discount_percent     Decimal?             @default(0) @db.Decimal(5, 2)
  min_quantity         Int?                 @default(1)
  max_quantity         Int?
  created_at           DateTime?            @default(now()) @db.Timestamp(6)
  created_by           String?              @db.VarChar(120)
  created_info         String?
  updated_at           DateTime?            @db.Timestamp(6)
  updated_by           String?              @db.VarChar(120)
  updated_info         String?
  rec_status           Int?                 @default(1) @db.SmallInt
  is_active            Boolean              @default(true)
  org_price_lists_mst  org_price_lists_mst  @relation(fields: [price_list_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_tenants_mst      org_tenants_mst      @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_product_data_mst org_product_data_mst @relation(fields: [tenant_org_id, product_id], references: [tenant_org_id, id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([price_list_id, product_id, min_quantity], map: "unique_price_list_product")
  @@index([price_list_id, is_active], map: "idx_price_list_items_active")
  @@index([price_list_id], map: "idx_price_list_items_list")
  @@index([tenant_org_id, product_id], map: "idx_price_list_items_product")
  @@index([tenant_org_id], map: "idx_price_list_items_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_price_lists_mst {
  id                       String                     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id            String                     @db.Uuid
  name                     String                     @db.VarChar(255)
  name2                    String?                    @db.VarChar(255)
  description              String?
  description2             String?
  price_list_type          String                     @db.VarChar(50)
  effective_from           DateTime?                  @db.Date
  effective_to             DateTime?                  @db.Date
  is_default               Boolean?                   @default(false)
  priority                 Int?                       @default(0)
  created_at               DateTime?                  @default(now()) @db.Timestamp(6)
  created_by               String?                    @db.VarChar(120)
  created_info             String?
  updated_at               DateTime?                  @db.Timestamp(6)
  updated_by               String?                    @db.VarChar(120)
  updated_info             String?
  rec_status               Int?                       @default(1) @db.SmallInt
  rec_order                Int?
  rec_notes                String?                    @db.VarChar(200)
  is_active                Boolean                    @default(true)
  org_price_history_audit  org_price_history_audit[]
  org_price_list_items_dtl org_price_list_items_dtl[]
  org_tenants_mst          org_tenants_mst            @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([tenant_org_id], map: "idx_price_lists_tenant")
  @@index([tenant_org_id, is_active], map: "idx_price_lists_tenant_active")
  @@index([tenant_org_id, price_list_type, is_active], map: "idx_price_lists_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_tenant_service_category_workflow_cf {
  id                       String                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id            String                    @db.Uuid
  service_category_code    String                    @db.VarChar(120)
  workflow_template_id     String?                   @db.Uuid
  use_preparation_screen   Boolean?
  use_assembly_screen      Boolean?
  use_qa_screen            Boolean?
  track_individual_piece   Boolean?
  created_at               DateTime?                 @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                 @db.Timestamptz(6)
  created_by               String?                   @db.Uuid
  updated_by               String?                   @db.Uuid
  org_service_category_cf  org_service_category_cf   @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_service_category_workflow_category")
  sys_workflow_template_cd sys_workflow_template_cd? @relation(fields: [workflow_template_id], references: [template_id], onUpdate: NoAction, map: "org_tenant_service_category_workflow__workflow_template_id_fkey")

  @@unique([tenant_org_id, service_category_code], map: "org_tenant_service_category_w_tenant_org_id_service_categor_key")
  @@index([tenant_org_id, service_category_code], map: "idx_service_category_workflow")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_tenant_workflow_settings_cf {
  tenant_org_id          String          @id @db.Uuid
  use_preparation_screen Boolean?        @default(false)
  use_assembly_screen    Boolean?        @default(false)
  use_qa_screen          Boolean?        @default(false)
  track_individual_piece Boolean?        @default(false)
  orders_split_enabled   Boolean?        @default(false)
  created_at             DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?       @db.Timestamptz(6)
  created_by             String?         @db.Uuid
  updated_by             String?         @db.Uuid
  org_tenants_mst        org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_tenant_workflow_templates_cf {
  id                       String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id            String                   @db.Uuid
  template_id              String                   @db.Uuid
  is_default               Boolean?                 @default(false)
  allow_back_steps         Boolean?                 @default(false)
  extra_config             Json?                    @default("{}")
  is_active                Boolean?                 @default(true)
  created_at               DateTime?                @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                @db.Timestamptz(6)
  org_tenants_mst          org_tenants_mst          @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tenant_workflow_templates_tenant")
  sys_workflow_template_cd sys_workflow_template_cd @relation(fields: [template_id], references: [template_id], onUpdate: NoAction)

  @@index([tenant_org_id, is_default], map: "idx_tenant_templates_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_workflow_template_cd {
  template_id                             String                                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_code                           String                                    @unique @db.VarChar(50)
  template_name                           String                                    @db.VarChar(250)
  template_name2                          String?                                   @db.VarChar(250)
  template_desc                           String?
  is_active                               Boolean                                   @default(true)
  rec_order                               Int?                                      @default(0)
  rec_status                              Int?                                      @default(1) @db.SmallInt
  created_at                              DateTime?                                 @default(now()) @db.Timestamptz(6)
  updated_at                              DateTime?                                 @db.Timestamptz(6)
  org_orders_mst                          org_orders_mst[]
  org_tenant_service_category_workflow_cf org_tenant_service_category_workflow_cf[]
  org_tenant_workflow_templates_cf        org_tenant_workflow_templates_cf[]
  sys_ord_workflow_template_versions      sys_ord_workflow_template_versions[]
  sys_workflow_template_stages            sys_workflow_template_stages[]
  sys_workflow_template_transitions       sys_workflow_template_transitions[]

  @@index([template_code], map: "idx_template_code")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_workflow_template_stages {
  id                       String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_id              String                   @db.Uuid
  stage_code               String                   @db.VarChar(50)
  stage_name               String                   @db.VarChar(250)
  stage_name2              String?                  @db.VarChar(250)
  stage_type               String                   @db.VarChar(50)
  seq_no                   Int
  is_terminal              Boolean?                 @default(false)
  is_active                Boolean?                 @default(true)
  created_at               DateTime?                @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                @db.Timestamptz(6)
  sys_workflow_template_cd sys_workflow_template_cd @relation(fields: [template_id], references: [template_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([template_id, stage_code])
  @@index([template_id, seq_no], map: "idx_stages_template")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_workflow_template_transitions {
  id                       String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_id              String                   @db.Uuid
  from_stage_code          String                   @db.VarChar(50)
  to_stage_code            String                   @db.VarChar(50)
  requires_scan_ok         Boolean?                 @default(false)
  requires_invoice         Boolean?                 @default(false)
  requires_pod             Boolean?                 @default(false)
  allow_manual             Boolean?                 @default(true)
  auto_when_done           Boolean?                 @default(false)
  is_active                Boolean?                 @default(true)
  created_at               DateTime?                @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                @db.Timestamptz(6)
  sys_workflow_template_cd sys_workflow_template_cd @relation(fields: [template_id], references: [template_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([template_id, from_stage_code, to_stage_code], map: "sys_workflow_template_transit_template_id_from_stage_code_t_key")
  @@index([template_id, from_stage_code], map: "idx_transitions_template")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_discount_rules_cf {
  id                         String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id              String          @db.Uuid
  rule_code                  String          @db.VarChar(50)
  rule_name                  String          @db.VarChar(250)
  rule_name2                 String?         @db.VarChar(250)
  description                String?
  description2               String?
  rule_type                  String          @db.VarChar(30)
  discount_type              String          @db.VarChar(20)
  discount_value             Decimal         @db.Decimal(10, 3)
  conditions                 Json
  priority                   Int?            @default(0)
  can_stack_with_promo       Boolean?        @default(false)
  can_stack_with_other_rules Boolean?        @default(false)
  valid_from                 DateTime        @default(now()) @db.Timestamptz(6)
  valid_to                   DateTime?       @db.Timestamptz(6)
  is_active                  Boolean         @default(true)
  is_enabled                 Boolean         @default(true)
  metadata                   Json?
  created_at                 DateTime        @default(now()) @db.Timestamptz(6)
  created_by                 String?         @db.VarChar(120)
  created_info               String?
  updated_at                 DateTime?       @db.Timestamptz(6)
  updated_by                 String?         @db.VarChar(120)
  updated_info               String?
  rec_status                 Int?            @default(1) @db.SmallInt
  rec_order                  Int?
  rec_notes                  String?         @db.VarChar(1000)
  org_tenants_mst            org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_discount_rules_tenant_fk")

  @@unique([tenant_org_id, rule_code], map: "org_discount_rules_unique")
  @@index([tenant_org_id], map: "idx_discount_rules_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_gift_card_transactions {
  id                 String             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id      String             @db.Uuid
  gift_card_id       String             @db.Uuid
  transaction_type   String             @db.VarChar(20)
  amount             Decimal            @db.Decimal(10, 3)
  balance_before     Decimal            @db.Decimal(10, 3)
  balance_after      Decimal            @db.Decimal(10, 3)
  order_id           String?            @db.Uuid
  invoice_id         String?            @db.Uuid
  notes              String?
  transaction_date   DateTime           @default(now()) @db.Timestamptz(6)
  processed_by       String?            @db.VarChar(120)
  metadata           Json?
  org_gift_cards_mst org_gift_cards_mst @relation(fields: [gift_card_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_gift_card_trans_card_fk")
  org_tenants_mst    org_tenants_mst    @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_gift_card_trans_tenant_fk")

  @@index([tenant_org_id, gift_card_id], map: "idx_gift_card_trans_card")
  @@index([tenant_org_id, transaction_date(sort: Desc)], map: "idx_gift_card_trans_date")
  @@index([tenant_org_id, order_id], map: "idx_gift_card_trans_order")
  @@index([tenant_org_id], map: "idx_gift_card_trans_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_gift_cards_mst {
  id                         String                       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id              String                       @db.Uuid
  card_number                String                       @unique @db.VarChar(50)
  card_pin                   String?                      @db.VarChar(20)
  card_name                  String?                      @db.VarChar(250)
  card_name2                 String?                      @db.VarChar(250)
  original_amount            Decimal                      @db.Decimal(10, 3)
  current_balance            Decimal                      @db.Decimal(10, 3)
  issued_date                DateTime                     @default(now()) @db.Timestamptz(6)
  expiry_date                DateTime?                    @db.Timestamptz(6)
  issued_to_customer_id      String?                      @db.Uuid
  status                     String                       @default("active") @db.VarChar(20)
  is_active                  Boolean                      @default(true)
  metadata                   Json?
  rec_notes                  String?                      @db.VarChar(1000)
  created_at                 DateTime                     @default(now()) @db.Timestamptz(6)
  created_by                 String?                      @db.VarChar(120)
  created_info               String?
  updated_at                 DateTime?                    @db.Timestamptz(6)
  updated_by                 String?                      @db.VarChar(120)
  updated_info               String?
  rec_status                 Int?                         @default(1) @db.SmallInt
  rec_order                  Int?
  org_gift_card_transactions org_gift_card_transactions[]
  org_tenants_mst            org_tenants_mst              @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_gift_cards_tenant_fk")
  org_invoice_mst            org_invoice_mst[]
  org_orders_mst             org_orders_mst[]
  org_payments_dtl_tr        org_payments_dtl_tr[]

  @@index([tenant_org_id, issued_to_customer_id], map: "idx_gift_cards_customer")
  @@index([tenant_org_id], map: "idx_gift_cards_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_promo_codes_mst {
  id                    String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id         String                @db.Uuid
  promo_code            String                @db.VarChar(50)
  promo_name            String?               @db.VarChar(250)
  promo_name2           String?               @db.VarChar(250)
  description           String?
  description2          String?
  discount_type         String                @db.VarChar(20)
  discount_value        Decimal               @db.Decimal(10, 3)
  max_discount_amount   Decimal?              @db.Decimal(10, 3)
  min_order_amount      Decimal?              @default(0) @db.Decimal(10, 3)
  max_order_amount      Decimal?              @db.Decimal(10, 3)
  applicable_categories Json?
  max_uses              Int?
  max_uses_per_customer Int?                  @default(1)
  current_uses          Int?                  @default(0)
  valid_from            DateTime              @default(now()) @db.Timestamptz(6)
  valid_to              DateTime?             @db.Timestamptz(6)
  is_active             Boolean               @default(true)
  is_enabled            Boolean               @default(true)
  metadata              Json?
  created_at            DateTime              @default(now()) @db.Timestamptz(6)
  created_by            String?               @db.VarChar(120)
  created_info          String?
  updated_at            DateTime?             @db.Timestamptz(6)
  updated_by            String?               @db.VarChar(120)
  updated_info          String?
  rec_status            Int?                  @default(1) @db.SmallInt
  rec_order             Int?
  rec_notes             String?               @db.VarChar(1000)
  org_invoice_mst       org_invoice_mst[]
  org_orders_mst        org_orders_mst[]
  org_payments_dtl_tr   org_payments_dtl_tr[]
  org_tenants_mst       org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_promo_codes_tenant_fk")
  org_promo_usage_log   org_promo_usage_log[]

  @@unique([tenant_org_id, promo_code], map: "org_promo_codes_unique")
  @@index([tenant_org_id], map: "idx_promo_codes_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_promo_usage_log {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id       String              @db.Uuid
  promo_code_id       String              @db.Uuid
  customer_id         String?             @db.Uuid
  order_id            String?             @db.Uuid
  invoice_id          String?             @db.Uuid
  discount_amount     Decimal             @db.Decimal(10, 3)
  order_total_before  Decimal             @db.Decimal(10, 3)
  order_total_after   Decimal             @db.Decimal(10, 3)
  used_at             DateTime            @default(now()) @db.Timestamptz(6)
  used_by             String?             @db.VarChar(120)
  metadata            Json?
  org_promo_codes_mst org_promo_codes_mst @relation(fields: [promo_code_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_promo_usage_promo_fk")
  org_tenants_mst     org_tenants_mst     @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "org_promo_usage_tenant_fk")

  @@index([tenant_org_id, customer_id], map: "idx_promo_usage_customer")
  @@index([tenant_org_id, order_id], map: "idx_promo_usage_order")
  @@index([tenant_org_id, promo_code_id], map: "idx_promo_usage_promo")
  @@index([tenant_org_id], map: "idx_promo_usage_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_payment_method_cd {
  payment_method_code            String                           @id(map: "pk_sys_payment_method_cd")
  payment_method_name            String?
  payment_method_name2           String?
  is_enabled                     Boolean                          @default(true)
  is_active                      Boolean                          @default(true)
  rec_notes                      String?
  created_at                     DateTime?                        @default(now()) @db.Timestamp(6)
  updated_at                     DateTime?                        @db.Timestamp(6)
  payment_method_color1          String?
  payment_method_color2          String?
  payment_method_color3          String?
  payment_method_icon            String?
  payment_method_image           String?
  org_invoice_mst                org_invoice_mst[]
  org_orders_mst                 org_orders_mst[]
  org_payment_reconciliation_log org_payment_reconciliation_log[]
  org_payments_dtl_tr            org_payments_dtl_tr[]
  org_subscriptions_mst          org_subscriptions_mst[]
  sys_bill_invoice_payments_tr   sys_bill_invoice_payments_tr[]
  sys_bill_invoices_mst          sys_bill_invoices_mst[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_payment_type_cd {
  payment_type_code            String                         @id(map: "pk_sys_payment_type_cd")
  payment_type_name            String?
  payment_type_name2           String?
  is_enabled                   Boolean                        @default(false)
  has_plan                     Boolean                        @default(false)
  is_active                    Boolean                        @default(true)
  rec_notes                    String?
  created_at                   DateTime?                      @default(now()) @db.Timestamp(6)
  updated_at                   DateTime?                      @db.Timestamp(6)
  payment_type_color1          String?
  payment_type_color2          String?
  payment_type_color3          String?
  payment_type_icon            String?
  payment_type_image           String?
  org_orders_mst               org_orders_mst[]
  org_payments_dtl_tr          org_payments_dtl_tr[]
  sys_bill_invoice_payments_tr sys_bill_invoice_payments_tr[]

  @@schema("public")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model cmx_effective_permissions {
  user_id         String          @db.Uuid
  tenant_org_id   String          @db.Uuid
  permission_code String
  resource_type   String?
  resource_id     String?         @db.Uuid
  allow           Boolean         @default(true)
  created_at      DateTime?       @default(now()) @db.Timestamptz(6)
  org_tenants_mst org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users           users           @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([tenant_org_id, permission_code], map: "idx_cmx_effective_perms_tenant_perm")
  @@index([user_id, tenant_org_id], map: "idx_cmx_effective_perms_user_tenant")
  @@index([user_id, tenant_org_id, permission_code], map: "idx_cmx_effective_perms_user_tenant_perm")
  @@ignore
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_auth_user_permissions {
  id                   String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id              String               @db.Uuid
  tenant_org_id        String               @db.Uuid
  allow                Boolean              @default(true)
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  created_by           String?              @db.VarChar(120)
  updated_at           DateTime?            @db.Timestamptz(6)
  updated_by           String?              @db.VarChar(120)
  permission_code      String
  sys_auth_permissions sys_auth_permissions @relation(fields: [permission_code], references: [code], onDelete: Cascade)

  @@unique([user_id, tenant_org_id, permission_code], map: "org_auth_user_permissions_unique")
  @@index([tenant_org_id], map: "idx_org_auth_user_perms_tenant")
  @@index([user_id], map: "idx_org_auth_user_perms_user")
  @@index([permission_code], map: "idx_org_auth_user_perms_perm_code")
  @@index([permission_code], map: "idx_org_auth_user_perms_permission_code")
  @@index([tenant_org_id, permission_code], map: "idx_org_auth_user_perms_tenant_permission")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_auth_user_resource_permissions {
  id                   String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id              String               @db.Uuid
  tenant_org_id        String               @db.Uuid
  resource_type        String
  resource_id          String               @db.Uuid
  allow                Boolean              @default(true)
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  created_by           String?              @db.VarChar(120)
  updated_at           DateTime?            @db.Timestamptz(6)
  updated_by           String?              @db.VarChar(120)
  permission_code      String
  sys_auth_permissions sys_auth_permissions @relation(fields: [permission_code], references: [code], onDelete: Cascade)

  @@unique([user_id, tenant_org_id, resource_type, resource_id, permission_code], map: "org_auth_user_resource_permissions_unique")
  @@index([resource_type, resource_id], map: "idx_org_auth_user_resource_perms_resource")
  @@index([tenant_org_id], map: "idx_org_auth_user_resource_perms_tenant")
  @@index([user_id], map: "idx_org_auth_user_resource_perms_user")
  @@index([permission_code], map: "idx_org_auth_user_resource_perms_permission_code")
  @@index([tenant_org_id, permission_code], map: "idx_org_auth_user_resource_perms_tenant_permission")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_auth_user_resource_roles {
  id             String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id        String         @db.Uuid
  tenant_org_id  String         @db.Uuid
  resource_type  String
  resource_id    String         @db.Uuid
  is_active      Boolean        @default(true)
  created_at     DateTime?      @default(now()) @db.Timestamptz(6)
  created_by     String?        @db.VarChar(120)
  updated_at     DateTime?      @db.Timestamptz(6)
  updated_by     String?        @db.VarChar(120)
  role_code      String
  sys_auth_roles sys_auth_roles @relation(fields: [role_code], references: [code], onDelete: Cascade)

  @@unique([user_id, tenant_org_id, resource_type, resource_id, role_code], map: "org_auth_user_resource_roles_unique")
  @@index([user_id], map: "idx_org_auth_user_resource_roles_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_auth_user_roles {
  id             String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id        String         @db.Uuid
  tenant_org_id  String         @db.Uuid
  is_active      Boolean        @default(true)
  created_at     DateTime?      @default(now()) @db.Timestamptz(6)
  created_by     String?        @db.VarChar(120)
  updated_at     DateTime?      @db.Timestamptz(6)
  updated_by     String?        @db.VarChar(120)
  role_code      String
  sys_auth_roles sys_auth_roles @relation(fields: [role_code], references: [code], onDelete: Cascade)

  @@unique([user_id, tenant_org_id, role_code], map: "org_auth_user_roles_user_tenant_role_unique")
  @@index([user_id], map: "idx_org_auth_user_roles_user")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_auth_user_workflow_roles {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id       String    @db.Uuid
  tenant_org_id String    @db.Uuid
  workflow_role String
  is_active     Boolean   @default(true)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  created_by    String?   @db.VarChar(120)
  updated_at    DateTime? @db.Timestamptz(6)
  updated_by    String?   @db.VarChar(120)

  @@unique([user_id, tenant_org_id, workflow_role])
  @@index([user_id], map: "idx_org_auth_user_workflow_roles_user")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model org_tenant_settings_cf {
  id                     String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id          String          @db.Uuid
  setting_code           String
  setting_name           String?
  setting_name2          String?
  setting_desc           String?
  setting_value_type     String?
  setting_value          String?
  is_active              Boolean         @default(true)
  branch_id              String?         @db.Uuid
  user_id                String?         @db.Uuid
  rec_order              Int?
  rec_notes              String?
  rec_status             Int?            @default(1) @db.SmallInt
  created_at             DateTime        @default(now()) @db.Timestamptz(6)
  created_by             String?
  created_info           String?
  updated_at             DateTime?       @db.Timestamptz(6)
  updated_by             String?
  updated_info           String?
  stng_override_source   String?
  stng_locked_by_profile Boolean?        @default(false)
  stng_override_reason   String?
  value_jsonb            Json?
  org_tenants_mst        org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onUpdate: Restrict, map: "fk_ots_tenant")

  @@index([stng_locked_by_profile], map: "idx_org_tenant_settings_locked")
  @@index([stng_override_source], map: "idx_org_tenant_settings_source")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_auth_permissions {
  code                               String                               @id @unique
  name                               String?
  name2                              String?
  category                           String?
  description                        String?
  is_active                          Boolean                              @default(true)
  created_at                         DateTime?                            @default(now()) @db.Timestamptz(6)
  description2                       String?
  category_main                      String?
  for_feature_only                   Int?                                 @default(0) @db.SmallInt
  for_screen_only                    Int?                                 @default(0) @db.SmallInt
  feature_code                       String?
  screen_code                        String?
  is_internal_use_only               Boolean                              @default(false)
  is_enabled                         Boolean                              @default(true)
  rec_status                         Int?                                 @default(1) @db.SmallInt
  rec_notes                          String?
  created_by                         String?
  created_info                       String?
  updated_at                         DateTime?                            @db.Timestamp(6)
  updated_by                         String?
  updated_info                       String?
  org_auth_user_permissions          org_auth_user_permissions[]
  org_auth_user_resource_permissions org_auth_user_resource_permissions[]
  sys_auth_role_default_permissions  sys_auth_role_default_permissions[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_auth_role_default_permissions {
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  role_code            String
  permission_code      String
  is_enabled           Boolean              @default(true)
  is_active            Boolean              @default(true)
  rec_status           Int?                 @default(1) @db.SmallInt
  rec_notes            String?
  created_by           String?
  created_info         String?
  updated_at           DateTime?            @db.Timestamp(6)
  updated_by           String?
  updated_info         String?
  sys_auth_permissions sys_auth_permissions @relation(fields: [permission_code], references: [code], onDelete: Cascade, onUpdate: NoAction, map: "fk_sys_default_perm_permission_code")
  sys_auth_roles       sys_auth_roles       @relation(fields: [role_code], references: [code], onDelete: Cascade, onUpdate: NoAction, map: "fk_sys_default_perm_role_code")

  @@id([role_code, permission_code])
  @@index([permission_code], map: "idx_sys_auth_role_perms_permission_code")
  @@index([role_code], map: "idx_sys_auth_role_perms_role_code")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_auth_roles {
  code                              String                              @id @unique
  name                              String
  name2                             String?
  description                       String?
  is_system                         Boolean                             @default(false)
  created_at                        DateTime?                           @default(now()) @db.Timestamptz(6)
  description2                      String?
  is_active                         Boolean                             @default(true)
  updated_at                        DateTime?                           @db.Timestamp(6)
  updated_by                        String?                             @db.VarChar(120)
  created_by                        String?                             @db.VarChar(120)
  old_role_id                       String?                             @db.Uuid
  org_auth_user_resource_roles      org_auth_user_resource_roles[]
  org_auth_user_roles               org_auth_user_roles[]
  sys_auth_role_default_permissions sys_auth_role_default_permissions[]

  @@index([code], map: "idx_sys_auth_roles_code")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model sys_tenant_settings_cd {
  setting_code                String                        @id
  setting_name                String?
  setting_name2               String?
  setting_desc                String?
  setting_value_type          String?
  setting_value               String?
  is_for_tenants_org          Boolean                       @default(true)
  is_active                   Boolean                       @default(true)
  is_per_tenant_org_id        Boolean                       @default(true)
  is_per_branch_id            Boolean                       @default(false)
  is_per_user_id              Boolean                       @default(false)
  rec_order                   Int?
  rec_notes                   String?
  rec_status                  Int?                          @default(1) @db.SmallInt
  created_at                  DateTime                      @default(now()) @db.Timestamptz(6)
  created_by                  String?
  created_info                String?
  updated_at                  DateTime?                     @db.Timestamptz(6)
  updated_by                  String?
  updated_info                String?
  stng_category_code          String?
  stng_scope                  String?
  stng_data_type              String?
  stng_default_value_jsonb    Json?
  stng_validation_jsonb       Json?
  stng_is_overridable         Boolean?                      @default(true)
  stng_is_sensitive           Boolean?                      @default(false)
  stng_requires_restart       Boolean?                      @default(false)
  stng_depends_on_flags       Json?
  sys_stng_profile_values_dtl sys_stng_profile_values_dtl[]
  sys_stng_categories_cd      sys_stng_categories_cd?       @relation(fields: [stng_category_code], references: [stng_category_code], onDelete: NoAction, onUpdate: NoAction)

  @@index([stng_category_code], map: "idx_sys_settings_category")
  @@index([stng_is_overridable], map: "idx_sys_settings_overridable")
  @@index([stng_scope], map: "idx_sys_settings_scope")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model hq_audit_logs {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id       String?   @db.Uuid
  user_email    String?   @db.VarChar(255)
  action        String    @db.VarChar(100)
  resource_type String?   @db.VarChar(50)
  resource_id   String?   @db.VarChar(255)
  details       Json?
  ip_address    String?   @db.Inet
  user_agent    String?
  success       Boolean?  @default(true)
  error_message String?
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  hq_users      hq_users? @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([action, created_at(sort: Desc)], map: "idx_hq_audit_action")
  @@index([created_at(sort: Desc)], map: "idx_hq_audit_created")
  @@index([resource_type, resource_id, created_at(sort: Desc)], map: "idx_hq_audit_resource")
  @@index([user_id, created_at(sort: Desc)], map: "idx_hq_audit_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model hq_roles {
  role_code           String     @id @db.VarChar(50)
  role_name           String     @db.VarChar(250)
  role_name_ar        String?    @db.VarChar(250)
  role_description    String?
  role_description_ar String?
  permissions         Json       @default("[]")
  is_system_role      Boolean?   @default(false)
  is_active           Boolean?   @default(true)
  created_at          DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?  @default(now()) @db.Timestamptz(6)
  created_by          String?    @db.Uuid
  updated_by          String?    @db.Uuid
  hq_users            hq_users[]

  @@index([is_active], map: "idx_hq_roles_active")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model hq_session_tokens {
  id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id            String    @db.Uuid
  token_hash         String    @unique @db.VarChar(255)
  refresh_token_hash String?   @db.VarChar(255)
  ip_address         String?   @db.Inet
  user_agent         String?
  expires_at         DateTime  @db.Timestamptz(6)
  created_at         DateTime? @default(now()) @db.Timestamptz(6)
  last_used_at       DateTime? @default(now()) @db.Timestamptz(6)
  hq_users           hq_users  @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([expires_at], map: "idx_hq_session_expires")
  @@index([token_hash], map: "idx_hq_session_token")
  @@index([user_id, expires_at(sort: Desc)], map: "idx_hq_session_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model hq_tenant_status_history {
  id                   String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id            String          @db.Uuid
  from_status          String?         @db.VarChar(50)
  to_status            String          @db.VarChar(50)
  lifecycle_stage_from String?         @db.VarChar(50)
  lifecycle_stage_to   String?         @db.VarChar(50)
  changed_by           String?         @db.Uuid
  changed_at           DateTime?       @default(now()) @db.Timestamptz(6)
  reason               String?
  metadata             Json?
  org_tenants_mst      org_tenants_mst @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([changed_at(sort: Desc)], map: "idx_tenant_status_history_date")
  @@index([tenant_id], map: "idx_tenant_status_history_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model hq_users {
  id                    String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email                 String              @unique @db.VarChar(255)
  full_name             String?             @db.VarChar(255)
  full_name_ar          String?             @db.VarChar(255)
  password_hash         String              @db.VarChar(255)
  role_code             String              @db.VarChar(50)
  is_active             Boolean?            @default(true)
  is_email_verified     Boolean?            @default(false)
  mfa_enabled           Boolean?            @default(false)
  mfa_secret            String?
  last_login_at         DateTime?           @db.Timestamptz(6)
  last_login_ip         String?             @db.Inet
  password_changed_at   DateTime?           @default(now()) @db.Timestamptz(6)
  failed_login_attempts Int?                @default(0)
  locked_until          DateTime?           @db.Timestamptz(6)
  created_at            DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?           @default(now()) @db.Timestamptz(6)
  created_by            String?             @db.Uuid
  updated_by            String?             @db.Uuid
  hq_audit_logs         hq_audit_logs[]
  hq_session_tokens     hq_session_tokens[]
  hq_roles              hq_roles            @relation(fields: [role_code], references: [role_code], onUpdate: NoAction)

  @@index([is_active], map: "idx_hq_users_active")
  @@index([email], map: "idx_hq_users_email")
  @@index([last_login_at(sort: Desc)], map: "idx_hq_users_last_login")
  @@index([role_code], map: "idx_hq_users_role")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_tenant_lifecycle {
  id                        String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id             String          @unique @db.Uuid
  lifecycle_stage           String          @default("trial") @db.VarChar(50)
  onboarding_status         String?         @default("not_started") @db.VarChar(50)
  onboarding_started_at     DateTime?       @db.Timestamptz(6)
  onboarding_completed_at   DateTime?       @db.Timestamptz(6)
  onboarding_checklist      Json?           @default("[]")
  suspension_reason         String?
  suspended_at              DateTime?       @db.Timestamptz(6)
  suspended_by              String?         @db.Uuid
  cancellation_reason       String?
  cancelled_at              DateTime?       @db.Timestamptz(6)
  cancelled_by              String?         @db.Uuid
  data_retention_until      DateTime?       @db.Date
  health_score              Decimal?        @default(0.00) @db.Decimal(5, 2)
  churn_prediction_score    Decimal?        @db.Decimal(3, 2)
  last_health_calculated_at DateTime?       @db.Timestamptz(6)
  last_activity_at          DateTime?       @db.Timestamptz(6)
  last_order_at             DateTime?       @db.Timestamptz(6)
  last_login_at             DateTime?       @db.Timestamptz(6)
  created_at                DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at                DateTime?       @default(now()) @db.Timestamptz(6)
  org_tenants_mst           org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([churn_prediction_score(sort: Desc)], map: "idx_churn_score")
  @@index([health_score(sort: Desc)], map: "idx_health_score")
  @@index([last_activity_at(sort: Desc)], map: "idx_last_activity")
  @@index([lifecycle_stage], map: "idx_lifecycle_stage")
  @@index([onboarding_status], map: "idx_onboarding_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_tenant_metrics_daily {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String          @db.Uuid
  metric_date      DateTime        @db.Date
  orders_created   Int?            @default(0)
  orders_completed Int?            @default(0)
  orders_cancelled Int?            @default(0)
  revenue          Decimal?        @default(0) @db.Decimal(10, 2)
  avg_order_value  Decimal?        @default(0) @db.Decimal(10, 2)
  active_customers Int?            @default(0)
  new_customers    Int?            @default(0)
  active_users     Int?            @default(0)
  total_logins     Int?            @default(0)
  storage_mb_used  Decimal?        @default(0) @db.Decimal(10, 2)
  api_calls        Int?            @default(0)
  created_at       DateTime?       @default(now()) @db.Timestamptz(6)
  org_tenants_mst  org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, metric_date], map: "unique_tenant_metric_date")
  @@index([metric_date(sort: Desc)], map: "idx_metrics_date")
  @@index([tenant_org_id, metric_date(sort: Desc)], map: "idx_metrics_tenant_date")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model org_pln_change_history_tr {
  id                                                                                                           String                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                                                                                                String                    @db.Uuid
  subscription_id                                                                                              String                    @db.Uuid
  from_plan_code                                                                                               String?                   @db.VarChar(50)
  to_plan_code                                                                                                 String                    @db.VarChar(50)
  change_type                                                                                                  String                    @db.VarChar(20)
  proration_amount                                                                                             Decimal?                  @db.Decimal(10, 3)
  proration_invoice_id                                                                                         String?                   @db.Uuid
  change_reason                                                                                                String?
  effective_date                                                                                               DateTime                  @db.Date
  created_at                                                                                                   DateTime?                 @default(now()) @db.Timestamp(6)
  created_by                                                                                                   String?                   @db.VarChar(120)
  sys_bill_invoices_mst                                                                                        sys_bill_invoices_mst?    @relation(fields: [proration_invoice_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  org_pln_subscriptions_mst_org_pln_change_history_tr_subscription_idToorg_pln_subscriptions_mst               org_pln_subscriptions_mst @relation("org_pln_change_history_tr_subscription_idToorg_pln_subscriptions_mst", fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  org_tenants_mst                                                                                              org_tenants_mst           @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_pln_subscriptions_mst_org_pln_change_history_tr_tenant_org_id_subscription_idToorg_pln_subscriptions_mst org_pln_subscriptions_mst @relation("org_pln_change_history_tr_tenant_org_id_subscription_idToorg_pln_subscriptions_mst", fields: [tenant_org_id, subscription_id], references: [tenant_org_id, id], onDelete: NoAction, onUpdate: NoAction)

  @@index([subscription_id], map: "idx_org_pln_change_sub")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_org_pln_change_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_pln_subscriptions_mst {
  id                                                                                                           String                      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                                                                                                String                      @db.Uuid
  plan_code                                                                                                    String                      @db.VarChar(50)
  plan_name                                                                                                    String?                     @db.VarChar(250)
  status                                                                                                       String?                     @default("trial") @db.VarChar(20)
  base_price                                                                                                   Decimal                     @db.Decimal(10, 3)
  currency                                                                                                     String?                     @default("OMR") @db.VarChar(3)
  billing_cycle                                                                                                String?                     @default("monthly") @db.VarChar(20)
  current_period_start                                                                                         DateTime                    @db.Date
  current_period_end                                                                                           DateTime                    @db.Date
  trial_start                                                                                                  DateTime?                   @db.Date
  trial_end                                                                                                    DateTime?                   @db.Date
  activated_at                                                                                                 DateTime?                   @db.Timestamp(6)
  suspended_at                                                                                                 DateTime?                   @db.Timestamp(6)
  cancelled_at                                                                                                 DateTime?                   @db.Timestamp(6)
  cancellation_reason                                                                                          String?
  discount_code                                                                                                String?                     @db.VarChar(50)
  discount_value                                                                                               Decimal?                    @db.Decimal(10, 3)
  discount_type                                                                                                String?                     @db.VarChar(20)
  discount_duration_months                                                                                     Int?
  discount_applied_at                                                                                          DateTime?                   @db.Timestamp(6)
  scheduled_plan_code                                                                                          String?                     @db.VarChar(50)
  scheduled_plan_change_date                                                                                   DateTime?                   @db.Date
  plan_change_scheduled_at                                                                                     DateTime?                   @db.Timestamp(6)
  plan_changed_at                                                                                              DateTime?                   @db.Timestamp(6)
  previous_plan_code                                                                                           String?                     @db.VarChar(50)
  default_payment_method_id                                                                                    String?                     @db.Uuid
  subscription_notes                                                                                           String?
  created_at                                                                                                   DateTime?                   @default(now()) @db.Timestamp(6)
  created_by                                                                                                   String?                     @db.VarChar(120)
  created_info                                                                                                 String?
  updated_at                                                                                                   DateTime?                   @db.Timestamp(6)
  updated_by                                                                                                   String?                     @db.VarChar(120)
  updated_info                                                                                                 String?
  rec_status                                                                                                   Int?                        @default(1) @db.SmallInt
  rec_order                                                                                                    Int?
  rec_notes                                                                                                    String?                     @db.VarChar(200)
  is_active                                                                                                    Boolean                     @default(true)
  org_pln_change_history_tr_org_pln_change_history_tr_subscription_idToorg_pln_subscriptions_mst               org_pln_change_history_tr[] @relation("org_pln_change_history_tr_subscription_idToorg_pln_subscriptions_mst")
  org_pln_change_history_tr_org_pln_change_history_tr_tenant_org_id_subscription_idToorg_pln_subscriptions_mst org_pln_change_history_tr[] @relation("org_pln_change_history_tr_tenant_org_id_subscription_idToorg_pln_subscriptions_mst")
  org_tenants_mst                                                                                              org_tenants_mst             @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sys_bill_invoices_mst                                                                                        sys_bill_invoices_mst[]

  @@unique([tenant_org_id, id])
  @@index([current_period_end], map: "idx_org_pln_subs_period")
  @@index([plan_code], map: "idx_org_pln_subs_plan")
  @@index([status, is_active], map: "idx_org_pln_subs_status")
  @@index([tenant_org_id], map: "idx_org_pln_subs_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_discount_codes_mst {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code             String    @unique @db.VarChar(50)
  description      String?
  description_ar   String?
  type             String    @db.VarChar(20)
  value            Decimal   @db.Decimal(10, 3)
  applies_to       String?   @default("all_plans") @db.VarChar(20)
  plan_codes       Json?     @default("[]")
  max_redemptions  Int?      @default(-1)
  max_per_customer Int?      @default(1)
  times_redeemed   Int?      @default(0)
  valid_from       DateTime? @db.Date
  valid_until      DateTime? @db.Date
  duration_months  Int?
  is_active        Boolean?  @default(true)
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  created_by       String?   @db.VarChar(120)
  created_info     String?
  updated_at       DateTime? @db.Timestamp(6)
  updated_by       String?   @db.VarChar(120)
  updated_info     String?
  rec_status       Int?      @default(1) @db.SmallInt
  rec_notes        String?   @db.VarChar(200)

  @@index([is_active, valid_until], map: "idx_sys_bill_disc_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_discount_redemptions_tr {
  id                    String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id         String                 @db.Uuid
  discount_code         String                 @db.VarChar(50)
  redeemed_at           DateTime?              @default(now()) @db.Timestamp(6)
  invoice_id            String?                @db.Uuid
  discount_amount       Decimal?               @db.Decimal(10, 3)
  created_by            String?                @db.VarChar(120)
  sys_bill_invoices_mst sys_bill_invoices_mst? @relation(fields: [invoice_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  org_tenants_mst       org_tenants_mst        @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([discount_code], map: "idx_sys_bill_disc_red_code")
  @@index([tenant_org_id], map: "idx_sys_bill_disc_red_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_dunning_mst {
  id                                                                                         String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                                                                              String                @db.Uuid
  invoice_id                                                                                 String                @db.Uuid
  status                                                                                     String?               @default("active") @db.VarChar(20)
  first_failure_date                                                                         DateTime              @db.Date
  last_retry_date                                                                            DateTime?             @db.Date
  retry_count                                                                                Int?                  @default(0)
  max_retries                                                                                Int?                  @default(4)
  emails_sent                                                                                Int?                  @default(0)
  calls_made                                                                                 Int?                  @default(0)
  resolved_at                                                                                DateTime?             @db.Timestamp(6)
  resolution_method                                                                          String?               @db.VarChar(50)
  created_at                                                                                 DateTime?             @default(now()) @db.Timestamp(6)
  created_by                                                                                 String?               @db.VarChar(120)
  updated_at                                                                                 DateTime?             @db.Timestamp(6)
  updated_by                                                                                 String?               @db.VarChar(120)
  sys_bill_invoices_mst_sys_bill_dunning_mst_invoice_idTosys_bill_invoices_mst               sys_bill_invoices_mst @relation("sys_bill_dunning_mst_invoice_idTosys_bill_invoices_mst", fields: [invoice_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_tenants_mst                                                                            org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sys_bill_invoices_mst_sys_bill_dunning_mst_tenant_org_id_invoice_idTosys_bill_invoices_mst sys_bill_invoices_mst @relation("sys_bill_dunning_mst_tenant_org_id_invoice_idTosys_bill_invoices_mst", fields: [tenant_org_id, invoice_id], references: [tenant_org_id, id], onDelete: NoAction, onUpdate: NoAction)

  @@index([invoice_id], map: "idx_sys_bill_dun_invoice")
  @@index([status, first_failure_date], map: "idx_sys_bill_dun_status")
  @@index([tenant_org_id], map: "idx_sys_bill_dun_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_invoice_payments_tr {
  id                                                                                                 String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  invoice_id                                                                                         String                @db.Uuid
  tenant_org_id                                                                                      String                @db.Uuid
  payment_date                                                                                       DateTime              @db.Date
  amount                                                                                             Decimal               @db.Decimal(19, 4)
  currency_code                                                                                      String                @db.VarChar(3)
  payment_method_code                                                                                String                @db.VarChar(50)
  payment_gateway                                                                                    String?               @db.VarChar(50)
  payment_gateway_ref                                                                                String?               @db.VarChar(255)
  payment_gateway_fee                                                                                Decimal?              @db.Decimal(10, 3)
  status                                                                                             String?               @default("pending") @db.VarChar(20)
  failure_reason                                                                                     String?
  notes                                                                                              String?
  created_at                                                                                         DateTime?             @default(now()) @db.Timestamp(6)
  created_by                                                                                         String?               @db.VarChar(120)
  created_info                                                                                       String?
  payment_type_code                                                                                  String?               @db.VarChar(30)
  tax                                                                                                Decimal?              @default(0) @db.Decimal(19, 4)
  vat                                                                                                Decimal?              @default(0) @db.Decimal(19, 4)
  sys_payment_method_cd                                                                              sys_payment_method_cd @relation(fields: [payment_method_code], references: [payment_method_code], onUpdate: NoAction, map: "fk_sys_bill_pay_method")
  sys_bill_invoices_mst_sys_bill_invoice_payments_tr_invoice_idTosys_bill_invoices_mst               sys_bill_invoices_mst @relation("sys_bill_invoice_payments_tr_invoice_idTosys_bill_invoices_mst", fields: [invoice_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sys_payment_type_cd                                                                                sys_payment_type_cd?  @relation(fields: [payment_type_code], references: [payment_type_code], onUpdate: NoAction)
  org_tenants_mst                                                                                    org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  sys_bill_invoices_mst_sys_bill_invoice_payments_tr_tenant_org_id_invoice_idTosys_bill_invoices_mst sys_bill_invoices_mst @relation("sys_bill_invoice_payments_tr_tenant_org_id_invoice_idTosys_bill_invoices_mst", fields: [tenant_org_id, invoice_id], references: [tenant_org_id, id], onDelete: NoAction, onUpdate: NoAction)

  @@index([invoice_id], map: "idx_sys_bill_pay_invoice")
  @@index([status], map: "idx_sys_bill_pay_status")
  @@index([tenant_org_id, payment_date(sort: Desc)], map: "idx_sys_bill_pay_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_bill_invoices_mst {
  id                                                                                                        String                             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id                                                                                             String                             @db.Uuid
  subscription_id                                                                                           String?                            @db.Uuid
  invoice_no                                                                                                String                             @unique @db.VarChar(100)
  invoice_date                                                                                              DateTime                           @db.Date
  due_date                                                                                                  DateTime                           @db.Date
  billing_period_start                                                                                      DateTime                           @db.Date
  billing_period_end                                                                                        DateTime                           @db.Date
  plan_code                                                                                                 String                             @db.VarChar(50)
  plan_name                                                                                                 String?                            @db.VarChar(255)
  line_items                                                                                                Json                               @default("[]")
  subtotal                                                                                                  Decimal                            @db.Decimal(10, 3)
  discount_total                                                                                            Decimal?                           @default(0) @db.Decimal(10, 3)
  tax                                                                                                       Decimal?                           @default(0) @db.Decimal(10, 3)
  total                                                                                                     Decimal                            @db.Decimal(10, 3)
  amount_paid                                                                                               Decimal?                           @default(0) @db.Decimal(10, 3)
  amount_due                                                                                                Decimal                            @db.Decimal(10, 3)
  currency                                                                                                  String?                            @default("OMR") @db.VarChar(3)
  status                                                                                                    String?                            @default("pending") @db.VarChar(20)
  paid_at                                                                                                   DateTime?                          @db.Timestamp(6)
  payment_method_code                                                                                       String?                            @db.VarChar(50)
  payment_gateway                                                                                           String?                            @db.VarChar(50)
  payment_gateway_ref                                                                                       String?                            @db.VarChar(255)
  payment_gateway_fee                                                                                       Decimal?                           @db.Decimal(10, 3)
  notes                                                                                                     String?
  internal_notes                                                                                            String?
  created_at                                                                                                DateTime?                          @default(now()) @db.Timestamp(6)
  created_by                                                                                                String?                            @db.VarChar(120)
  created_info                                                                                              String?
  updated_at                                                                                                DateTime?                          @db.Timestamp(6)
  updated_by                                                                                                String?                            @db.VarChar(120)
  updated_info                                                                                              String?
  rec_status                                                                                                Int?                               @default(1) @db.SmallInt
  rec_order                                                                                                 Int?
  rec_notes                                                                                                 String?                            @db.VarChar(200)
  org_pln_change_history_tr                                                                                 org_pln_change_history_tr[]
  sys_bill_discount_redemptions_tr                                                                          sys_bill_discount_redemptions_tr[]
  sys_bill_dunning_mst_sys_bill_dunning_mst_invoice_idTosys_bill_invoices_mst                               sys_bill_dunning_mst[]             @relation("sys_bill_dunning_mst_invoice_idTosys_bill_invoices_mst")
  sys_bill_dunning_mst_sys_bill_dunning_mst_tenant_org_id_invoice_idTosys_bill_invoices_mst                 sys_bill_dunning_mst[]             @relation("sys_bill_dunning_mst_tenant_org_id_invoice_idTosys_bill_invoices_mst")
  sys_bill_invoice_payments_tr_sys_bill_invoice_payments_tr_invoice_idTosys_bill_invoices_mst               sys_bill_invoice_payments_tr[]     @relation("sys_bill_invoice_payments_tr_invoice_idTosys_bill_invoices_mst")
  sys_bill_invoice_payments_tr_sys_bill_invoice_payments_tr_tenant_org_id_invoice_idTosys_bill_invoices_mst sys_bill_invoice_payments_tr[]     @relation("sys_bill_invoice_payments_tr_tenant_org_id_invoice_idTosys_bill_invoices_mst")
  sys_payment_method_cd                                                                                     sys_payment_method_cd?             @relation(fields: [payment_method_code], references: [payment_method_code], onDelete: Restrict, onUpdate: NoAction, map: "fk_sys_bill_inv_payment_method")
  org_pln_subscriptions_mst                                                                                 org_pln_subscriptions_mst?         @relation(fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  org_tenants_mst                                                                                           org_tenants_mst                    @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, id])
  @@index([invoice_no], map: "idx_sys_bill_inv_no")
  @@index([billing_period_start, billing_period_end], map: "idx_sys_bill_inv_period")
  @@index([status, due_date], map: "idx_sys_bill_inv_status")
  @@index([subscription_id], map: "idx_sys_bill_inv_subscription")
  @@index([tenant_org_id, invoice_date(sort: Desc)], map: "idx_sys_bill_inv_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_payment_gateways_cf {
  id                         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  gateway_code               String    @unique @db.VarChar(50)
  gateway_name               String    @db.VarChar(250)
  is_active                  Boolean?  @default(true)
  is_default                 Boolean?  @default(false)
  regions                    Json?     @default("[\"GCC\", \"INTL\"]")
  credentials_encrypted      String?
  payment_methods            Json?     @default("[\"card\"]")
  transaction_fee_percentage Decimal?  @default(0) @db.Decimal(5, 2)
  transaction_fee_fixed      Decimal?  @default(0) @db.Decimal(10, 3)
  min_amount                 Decimal?  @default(0) @db.Decimal(10, 3)
  max_amount                 Decimal?  @db.Decimal(10, 3)
  auto_capture               Boolean?  @default(true)
  retry_enabled              Boolean?  @default(true)
  max_retries                Int?      @default(3)
  created_at                 DateTime? @default(now()) @db.Timestamp(6)
  created_by                 String?   @db.VarChar(120)
  updated_at                 DateTime? @db.Timestamp(6)
  updated_by                 String?   @db.VarChar(120)
  rec_status                 Int?      @default(1) @db.SmallInt
  is_active_flag             Boolean?  @default(true)

  @@index([is_active, is_default], map: "idx_sys_bill_gw_active")
  @@index([gateway_code], map: "idx_sys_bill_gw_code")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_payment_method_codes_cd {
  id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  method_code           String    @unique @db.VarChar(50)
  method_name           String    @db.VarChar(250)
  method_name_ar        String?   @db.VarChar(250)
  description           String?
  description_ar        String?
  type                  String    @db.VarChar(20)
  is_default            Boolean?  @default(false)
  is_active             Boolean?  @default(true)
  requires_verification Boolean?  @default(false)
  auto_approve          Boolean?  @default(false)
  display_order         Int?      @default(0)
  method_icon           String?   @db.VarChar(120)
  method_color          String?   @db.VarChar(60)
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.VarChar(120)
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.VarChar(120)
  rec_status            Int?      @default(1) @db.SmallInt
  rec_notes             String?   @db.VarChar(200)

  @@index([is_active, display_order], map: "idx_sys_bill_pm_codes_active")
  @@index([type, is_active], map: "idx_sys_bill_pm_codes_type")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model sys_bill_payment_methods_mst {
  id                        String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id             String          @db.Uuid
  type                      String          @db.VarChar(20)
  gateway                   String?         @db.VarChar(50)
  gateway_customer_id       String?         @db.VarChar(255)
  gateway_payment_method_id String?         @db.VarChar(255)
  card_brand                String?         @db.VarChar(20)
  card_last4                String?         @db.VarChar(4)
  card_exp_month            Int?
  card_exp_year             Int?
  bank_name                 String?         @db.VarChar(100)
  bank_account_last4        String?         @db.VarChar(4)
  is_default                Boolean?        @default(false)
  is_active                 Boolean?        @default(true)
  is_verified               Boolean?        @default(false)
  created_at                DateTime?       @default(now()) @db.Timestamp(6)
  created_by                String?         @db.VarChar(120)
  updated_at                DateTime?       @db.Timestamp(6)
  updated_by                String?         @db.VarChar(120)
  org_tenants_mst           org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, id])
  @@index([gateway, gateway_customer_id], map: "idx_sys_bill_pm_gateway")
  @@index([tenant_org_id], map: "idx_sys_bill_pm_tenant")
  @@index([type], map: "idx_sys_bill_pm_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_revenue_metrics_monthly {
  id                    String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  metric_month          DateTime  @unique @db.Date
  mrr                   Decimal?  @default(0) @db.Decimal(12, 3)
  arr                   Decimal?  @default(0) @db.Decimal(12, 3)
  mrr_growth_percentage Decimal?  @default(0) @db.Decimal(5, 2)
  new_mrr               Decimal?  @default(0) @db.Decimal(10, 3)
  expansion_mrr         Decimal?  @default(0) @db.Decimal(10, 3)
  contraction_mrr       Decimal?  @default(0) @db.Decimal(10, 3)
  churned_mrr           Decimal?  @default(0) @db.Decimal(10, 3)
  total_customers       Int?      @default(0)
  paying_customers      Int?      @default(0)
  trial_customers       Int?      @default(0)
  new_customers         Int?      @default(0)
  churned_customers     Int?      @default(0)
  arpu                  Decimal?  @default(0) @db.Decimal(10, 3)
  arpc                  Decimal?  @default(0) @db.Decimal(10, 3)
  ltv                   Decimal?  @default(0) @db.Decimal(10, 3)
  cac                   Decimal?  @default(0) @db.Decimal(10, 3)
  ltv_cac_ratio         Decimal?  @default(0) @db.Decimal(5, 2)
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  updated_at            DateTime? @db.Timestamp(6)

  @@index([metric_month(sort: Desc)], map: "idx_sys_bill_rev_month")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_bill_usage_metrics_daily {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String          @db.Uuid
  metric_date      DateTime        @db.Date
  orders_count     Int?            @default(0)
  orders_completed Int?            @default(0)
  orders_cancelled Int?            @default(0)
  revenue          Decimal?        @default(0) @db.Decimal(10, 3)
  active_users     Int?            @default(0)
  total_users      Int?            @default(0)
  storage_mb_used  Decimal?        @default(0) @db.Decimal(10, 2)
  api_calls        Int?            @default(0)
  branches_count   Int?            @default(0)
  created_at       DateTime?       @default(now()) @db.Timestamp(6)
  updated_at       DateTime?       @db.Timestamp(6)
  org_tenants_mst  org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, metric_date])
  @@index([metric_date], map: "idx_sys_bill_usage_date")
  @@index([tenant_org_id, metric_date(sort: Desc)], map: "idx_sys_bill_usage_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_pln_subscription_plans_mst {
  id                           String                         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  plan_code                    String                         @unique @db.VarChar(50)
  plan_name                    String                         @db.VarChar(250)
  plan_name_ar                 String?                        @db.VarChar(250)
  description                  String?
  description_ar               String?
  base_price                   Decimal                        @default(0) @db.Decimal(10, 3)
  annual_price                 Decimal?                       @db.Decimal(10, 3)
  setup_fee                    Decimal?                       @db.Decimal(10, 3)
  currency                     String?                        @default("OMR") @db.VarChar(3)
  billing_cycle                String                         @default("monthly") @db.VarChar(20)
  trial_days                   Int?                           @default(0)
  features                     Json                           @default("{\"printing\": false, \"api_access\": false, \"driver_app\": false, \"white_label\": false, \"multi_branch\": false, \"pdf_invoices\": false, \"b2b_contracts\": false, \"in_app_receipts\": false, \"loyalty_programs\": false, \"whatsapp_receipts\": false, \"advanced_analytics\": false, \"marketplace_listings\": false}")
  limits                       Json                           @default("{\"max_users\": 1, \"max_branches\": 1, \"max_storage_mb\": 1000, \"max_orders_per_month\": -1, \"max_api_calls_per_month\": 0}")
  overage_pricing              Json?                          @default("{\"per_user\": null, \"per_order\": null, \"per_gb_storage\": null}")
  is_public                    Boolean?                       @default(true)
  is_active                    Boolean?                       @default(true)
  is_default                   Boolean?                       @default(false)
  display_order                Int?                           @default(0)
  recommended                  Boolean?                       @default(false)
  plan_color                   String?                        @db.VarChar(60)
  plan_icon                    String?                        @db.VarChar(120)
  created_at                   DateTime?                      @default(now()) @db.Timestamp(6)
  created_by                   String?                        @db.VarChar(120)
  created_info                 String?
  updated_at                   DateTime?                      @db.Timestamp(6)
  updated_by                   String?                        @db.VarChar(120)
  updated_info                 String?
  rec_status                   Int?                           @default(1) @db.SmallInt
  rec_order                    Int?
  rec_notes                    String?                        @db.VarChar(200)
  sys_ff_pln_flag_mappings_dtl sys_ff_pln_flag_mappings_dtl[]

  @@index([is_active, display_order], map: "idx_sys_pln_plans_active")
  @@index([plan_code], map: "idx_sys_pln_plans_code")
  @@index([is_public, is_active], map: "idx_sys_pln_plans_public")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_code_table_audit_log {
  id                             String                     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  table_name                     String                     @db.VarChar(100)
  record_code                    String                     @db.VarChar(50)
  action                         String                     @db.VarChar(20)
  old_values                     Json?
  new_values                     Json?
  changed_fields                 String[]
  changed_by                     String                     @db.Uuid
  changed_at                     DateTime?                  @default(now()) @db.Timestamp(6)
  change_reason                  String?
  ip_address                     String?                    @db.VarChar(50)
  user_agent                     String?
  is_rollback                    Boolean?                   @default(false)
  rollback_of_id                 String?                    @db.Uuid
  sys_code_table_audit_log       sys_code_table_audit_log?  @relation("sys_code_table_audit_logTosys_code_table_audit_log", fields: [rollback_of_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_sys_code_table_audit_log sys_code_table_audit_log[] @relation("sys_code_table_audit_logTosys_code_table_audit_log")

  @@index([table_name, record_code, changed_at(sort: Desc)], map: "idx_audit_record")
  @@index([table_name, changed_at(sort: Desc)], map: "idx_audit_table")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_code_tables_registry {
  table_name               String    @id @db.VarChar(100)
  display_name             String    @db.VarChar(250)
  display_name2            String?   @db.VarChar(250)
  description              String?
  description2             String?
  is_editable              Boolean?  @default(true)
  is_extensible            Boolean?  @default(false)
  supports_tenant_override Boolean?  @default(false)
  code_pattern             String?   @db.VarChar(100)
  max_code_length          Int?      @default(50)
  requires_unique_name     Boolean?  @default(true)
  category                 String?   @db.VarChar(50)
  display_order            Int?      @default(0)
  current_version          Int?      @default(1)
  last_seeded_at           DateTime? @db.Timestamp(6)
  metadata                 Json?
  created_at               DateTime? @default(now()) @db.Timestamp(6)
  updated_at               DateTime? @db.Timestamp(6)

  @@index([category, display_order], map: "idx_code_registry_category")
  @@index([is_editable, is_extensible], map: "idx_code_registry_editable")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_order_status_cd {
  code                  String    @id @db.VarChar(50)
  name                  String    @db.VarChar(250)
  name2                 String?   @db.VarChar(250)
  description           String?
  description2          String?
  display_order         Int?      @default(0)
  icon                  String?   @db.VarChar(100)
  color                 String?   @db.VarChar(60)
  is_initial_status     Boolean?  @default(false)
  is_final_status       Boolean?  @default(false)
  allowed_next_statuses String[]  @db.VarChar(50)
  is_default            Boolean?  @default(false)
  is_system             Boolean?  @default(true)
  is_active             Boolean?  @default(true)
  default_sla_hours     Int?
  metadata              Json?
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.Uuid
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.Uuid
  rec_status            Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_order_status_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_payment_gateway_cd {
  code                      String    @id @db.VarChar(50)
  name                      String    @db.VarChar(250)
  name2                     String?   @db.VarChar(250)
  description               String?
  description2              String?
  display_order             Int?      @default(0)
  icon                      String?   @db.VarChar(100)
  logo_url                  String?   @db.VarChar(500)
  gateway_type              String    @db.VarChar(50)
  is_online                 Boolean?  @default(true)
  requires_api_key          Boolean?  @default(true)
  supported_payment_methods String[]  @db.VarChar(50)
  supported_currencies      String[]  @db.VarChar(10)
  has_transaction_fee       Boolean?  @default(false)
  fee_percentage            Decimal?  @db.Decimal(5, 2)
  fee_fixed_amount          Decimal?  @db.Decimal(10, 3)
  available_for_plans       String[]  @db.VarChar(50)
  min_transaction_amount    Decimal?  @db.Decimal(10, 3)
  max_transaction_amount    Decimal?  @db.Decimal(10, 3)
  is_default                Boolean?  @default(false)
  is_system                 Boolean?  @default(true)
  is_active                 Boolean?  @default(true)
  metadata                  Json?
  created_at                DateTime? @default(now()) @db.Timestamp(6)
  created_by                String?   @db.Uuid
  updated_at                DateTime? @db.Timestamp(6)
  updated_by                String?   @db.Uuid
  rec_status                Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_payment_gateway_active")
  @@index([gateway_type], map: "idx_payment_gateway_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_payment_status_cd {
  code          String    @id @db.VarChar(50)
  name          String    @db.VarChar(250)
  name2         String?   @db.VarChar(250)
  description   String?
  description2  String?
  display_order Int?      @default(0)
  icon          String?   @db.VarChar(100)
  color         String?   @db.VarChar(60)
  is_final      Boolean?  @default(false)
  is_successful Boolean?  @default(false)
  is_failed     Boolean?  @default(false)
  allows_retry  Boolean?  @default(false)
  is_default    Boolean?  @default(false)
  is_system     Boolean?  @default(true)
  is_active     Boolean?  @default(true)
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  created_by    String?   @db.Uuid
  updated_at    DateTime? @db.Timestamp(6)
  updated_by    String?   @db.Uuid
  rec_status    Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_payment_status_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_billing_cycle_cd {
  code                String    @id @db.VarChar(50)
  name                String    @db.VarChar(250)
  name2               String?   @db.VarChar(250)
  description         String?
  description2        String?
  display_order       Int?      @default(0)
  icon                String?   @db.VarChar(100)
  color               String?   @db.VarChar(60)
  cycle_type          String    @db.VarChar(20)
  months              Int
  days                Int?      @default(0)
  discount_percentage Decimal?  @default(0) @db.Decimal(5, 2)
  is_prepaid          Boolean?  @default(true)
  is_default          Boolean?  @default(false)
  is_system           Boolean?  @default(true)
  is_active           Boolean?  @default(true)
  metadata            Json?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  created_by          String?   @db.Uuid
  updated_at          DateTime? @db.Timestamp(6)
  updated_by          String?   @db.Uuid
  rec_status          Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_billing_cycle_active")
  @@index([cycle_type, is_active], map: "idx_billing_cycle_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_business_type_template_cf {
  item_code                     String                        @db.VarChar(60)
  service_category_code         String                        @db.VarChar(120)
  business_type_code            String                        @db.VarChar(60)
  is_enabled                    Boolean?                      @default(true)
  is_default                    Boolean?                      @default(false)
  rec_order                     Int?
  rec_notes                     String?
  rec_status                    Int?                          @default(1) @db.SmallInt
  created_at                    DateTime?                     @default(now()) @db.Timestamp(6)
  created_by                    String?
  created_info                  String?
  updated_at                    DateTime?                     @db.Timestamp(6)
  updated_by                    String?
  updated_info                  String?
  sys_main_business_type_cd     sys_main_business_type_cd     @relation(fields: [business_type_code], references: [business_type_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_btt_business_type")
  sys_service_prod_templates_cd sys_service_prod_templates_cd @relation(fields: [item_code, service_category_code], references: [item_code, service_category_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_btt_item_template")

  @@id([item_code, service_category_code, business_type_code])
  @@index([business_type_code], map: "idx_btt_business_type")
  @@index([item_code, service_category_code], map: "idx_btt_template")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_country_cd {
  code                  String    @id @db.VarChar(2)
  name                  String    @db.VarChar(250)
  name2                 String?   @db.VarChar(250)
  description           String?
  description2          String?
  display_order         Int?      @default(0)
  icon                  String?   @db.VarChar(100)
  color                 String?   @db.VarChar(60)
  iso_code              String    @unique @db.VarChar(2)
  iso_alpha3            String?   @db.VarChar(3)
  iso_numeric           Int?
  region                String?   @db.VarChar(50)
  subregion             String?   @db.VarChar(50)
  continent             String?   @db.VarChar(20)
  default_currency_code String?   @db.VarChar(3)
  default_language_code String?   @db.VarChar(2)
  default_timezone_code String?   @db.VarChar(50)
  phone_code            String?   @db.VarChar(10)
  address_format        String?
  is_default            Boolean?  @default(false)
  is_system             Boolean?  @default(true)
  is_active             Boolean?  @default(true)
  metadata              Json?
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.Uuid
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.Uuid
  rec_status            Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_country_active")
  @@index([continent, is_active], map: "idx_country_continent")
  @@index([region, is_active], map: "idx_country_region")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_currency_cd {
  code                String    @id @db.VarChar(3)
  name                String    @db.VarChar(250)
  name2               String?   @db.VarChar(250)
  description         String?
  description2        String?
  display_order       Int?      @default(0)
  icon                String?   @db.VarChar(100)
  color               String?   @db.VarChar(60)
  symbol              String    @db.VarChar(10)
  symbol_position     String?   @default("after") @db.VarChar(10)
  decimal_places      Int?      @default(2)
  thousands_separator String?   @default(",") @db.VarChar(5)
  decimal_separator   String?   @default(".") @db.VarChar(5)
  iso_code            String    @unique @db.VarChar(3)
  iso_numeric         Int?
  is_default          Boolean?  @default(false)
  is_system           Boolean?  @default(true)
  is_active           Boolean?  @default(true)
  metadata            Json?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  created_by          String?   @db.Uuid
  updated_at          DateTime? @db.Timestamp(6)
  updated_by          String?   @db.Uuid
  rec_status          Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_currency_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_fabric_type_cd {
  code                    String    @id @db.VarChar(50)
  name                    String    @db.VarChar(250)
  name2                   String?   @db.VarChar(250)
  description             String?
  description2            String?
  display_order           Int?      @default(0)
  icon                    String?   @db.VarChar(100)
  color                   String?   @db.VarChar(60)
  fabric_category         String?   @db.VarChar(50)
  care_level              String?   @db.VarChar(20)
  temperature_max_celsius Int?
  requires_dry_clean      Boolean?  @default(false)
  requires_hand_wash      Boolean?  @default(false)
  can_bleach              Boolean?  @default(false)
  can_iron                Boolean?  @default(true)
  iron_temperature        String?   @db.VarChar(20)
  is_default              Boolean?  @default(false)
  is_system               Boolean?  @default(true)
  is_active               Boolean?  @default(true)
  metadata                Json?
  created_at              DateTime? @default(now()) @db.Timestamp(6)
  created_by              String?   @db.Uuid
  updated_at              DateTime? @db.Timestamp(6)
  updated_by              String?   @db.Uuid
  rec_status              Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_fabric_type_active")
  @@index([care_level, is_active], map: "idx_fabric_type_care_level")
  @@index([fabric_category, is_active], map: "idx_fabric_type_category")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_garment_type_cd {
  code                       String    @id @db.VarChar(50)
  name                       String    @db.VarChar(250)
  name2                      String?   @db.VarChar(250)
  description                String?
  description2               String?
  display_order              Int?      @default(0)
  icon                       String?   @db.VarChar(100)
  color                      String?   @db.VarChar(60)
  garment_category           String?   @db.VarChar(50)
  gender                     String?   @db.VarChar(20)
  care_instructions          String?
  default_base_price         Decimal?  @db.Decimal(10, 2)
  requires_special_handling  Boolean?  @default(false)
  handling_multiplier        Decimal?  @default(1.0) @db.Decimal(5, 2)
  default_service_types      String[]  @db.VarChar(50)
  estimated_processing_hours Int?
  is_default                 Boolean?  @default(false)
  is_system                  Boolean?  @default(true)
  is_active                  Boolean?  @default(true)
  metadata                   Json?
  created_at                 DateTime? @default(now()) @db.Timestamp(6)
  created_by                 String?   @db.Uuid
  updated_at                 DateTime? @db.Timestamp(6)
  updated_by                 String?   @db.Uuid
  rec_status                 Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_garment_type_active")
  @@index([garment_category, is_active], map: "idx_garment_type_category")
  @@index([gender, is_active], map: "idx_garment_type_gender")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_issue_type_cd {
  code                           String    @id @db.VarChar(50)
  name                           String    @db.VarChar(250)
  name2                          String?   @db.VarChar(250)
  description                    String?
  description2                   String?
  display_order                  Int?      @default(0)
  icon                           String?   @db.VarChar(100)
  color                          String?   @db.VarChar(60)
  issue_category                 String?   @db.VarChar(50)
  severity_level                 String?   @db.VarChar(20)
  requires_customer_notification Boolean?  @default(true)
  requires_refund                Boolean?  @default(false)
  requires_replacement           Boolean?  @default(false)
  default_resolution_action      String?
  estimated_resolution_hours     Int?
  is_default                     Boolean?  @default(false)
  is_system                      Boolean?  @default(true)
  is_active                      Boolean?  @default(true)
  metadata                       Json?
  created_at                     DateTime? @default(now()) @db.Timestamp(6)
  created_by                     String?   @db.Uuid
  updated_at                     DateTime? @db.Timestamp(6)
  updated_by                     String?   @db.Uuid
  rec_status                     Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_issue_type_active")
  @@index([issue_category, is_active], map: "idx_issue_type_category")
  @@index([severity_level, is_active], map: "idx_issue_type_severity")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_item_type_cd {
  item_type_code                String                          @id @db.VarChar(50)
  name                          String                          @db.VarChar(250)
  name2                         String?                         @db.VarChar(250)
  description                   String?
  description2                  String?
  display_order                 Int?                            @default(0)
  icon                          String?                         @db.VarChar(100)
  color                         String?                         @db.VarChar(60)
  is_garment                    Boolean?                        @default(true)
  is_retail                     Boolean?                        @default(false)
  is_default                    Boolean?                        @default(false)
  is_system                     Boolean?                        @default(true)
  is_active                     Boolean?                        @default(true)
  metadata                      Json?
  created_at                    DateTime?                       @default(now()) @db.Timestamp(6)
  created_by                    String?                         @db.VarChar(120)
  updated_at                    DateTime?                       @db.Timestamp(6)
  updated_by                    String?                         @db.VarChar(120)
  rec_status                    Int?                            @default(1) @db.SmallInt
  rec_order                     Int?
  org_product_data_mst          org_product_data_mst[]
  sys_items_data_list_cd        sys_items_data_list_cd[]
  sys_service_prod_templates_cd sys_service_prod_templates_cd[]

  @@index([is_active, display_order], map: "idx_item_type_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_items_data_list_cd {
  item_code                     String                          @id @db.VarChar(60)
  item_name                     String
  item_name2                    String?
  hint_text                     String?
  hint_text2                    String?
  item_type_code                String?                         @db.VarChar(60)
  is_retail_item                Boolean?                        @default(false)
  item_color1                   String?
  item_color2                   String?
  item_color3                   String?
  item_icon                     String?
  item_image                    String?
  tags                          Json?                           @db.Json
  id_sku                        String?
  metadata                      Json?
  is_active                     Boolean                         @default(true)
  rec_order                     Int?
  rec_notes                     String?
  rec_status                    Int?                            @default(1) @db.SmallInt
  created_at                    DateTime?                       @default(now()) @db.Timestamp(6)
  created_by                    String?
  created_info                  String?
  updated_at                    DateTime?                       @db.Timestamp(6)
  updated_by                    String?
  updated_info                  String?
  sys_item_type_cd              sys_item_type_cd?               @relation(fields: [item_type_code], references: [item_type_code], onUpdate: NoAction, map: "fk_item_type")
  sys_service_prod_templates_cd sys_service_prod_templates_cd[]

  @@index([is_active, rec_order], map: "idx_items_active")
  @@index([item_type_code], map: "idx_items_item_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_language_cd {
  code          String    @id @db.VarChar(2)
  name          String    @db.VarChar(250)
  name2         String?   @db.VarChar(250)
  description   String?
  description2  String?
  display_order Int?      @default(0)
  icon          String?   @db.VarChar(100)
  color         String?   @db.VarChar(60)
  iso_code      String    @unique @db.VarChar(2)
  iso_639_2     String?   @db.VarChar(3)
  is_rtl        Boolean?  @default(false)
  locale_code   String?   @db.VarChar(10)
  date_format   String?   @default("YYYY-MM-DD") @db.VarChar(20)
  time_format   String?   @default("HH:mm") @db.VarChar(20)
  is_default    Boolean?  @default(false)
  is_system     Boolean?  @default(true)
  is_active     Boolean?  @default(true)
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  created_by    String?   @db.Uuid
  updated_at    DateTime? @db.Timestamp(6)
  updated_by    String?   @db.Uuid
  rec_status    Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_language_active")
  @@index([is_rtl, is_active], map: "idx_language_rtl")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_main_business_type_cd {
  business_type_code            String                          @id @db.VarChar(60)
  business_type_name            String
  business_type_name2           String?
  business_type_desc            String?
  business_type_desc2           String?
  business_type_color1          String?
  business_type_color2          String?
  business_type_color3          String?
  business_type_icon            String?
  business_type_image           String?
  default_settings              Json?
  default_features              Json?
  is_active                     Boolean                         @default(true)
  rec_order                     Int?
  rec_notes                     String?
  rec_status                    Int?                            @default(1) @db.SmallInt
  created_at                    DateTime?                       @default(now()) @db.Timestamp(6)
  created_by                    String?
  created_info                  String?
  updated_at                    DateTime?                       @db.Timestamp(6)
  updated_by                    String?
  updated_info                  String?
  org_tenants_mst               org_tenants_mst[]
  sys_business_type_template_cf sys_business_type_template_cf[]

  @@index([is_active, rec_order], map: "idx_business_type_active")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_metric_type_cd {
  code                String    @id @db.VarChar(50)
  name                String    @db.VarChar(250)
  name2               String?   @db.VarChar(250)
  description         String?
  description2        String?
  display_order       Int?      @default(0)
  icon                String?   @db.VarChar(100)
  color               String?   @db.VarChar(60)
  category_code       String?   @db.VarChar(50)
  metric_group        String?   @db.VarChar(50)
  data_type           String    @db.VarChar(20)
  unit                String?   @db.VarChar(20)
  calculation_formula String?
  aggregation_period  String?   @db.VarChar(20)
  requires_date_range Boolean?  @default(true)
  format_pattern      String?   @db.VarChar(50)
  decimal_places      Int?      @default(2)
  show_trend          Boolean?  @default(true)
  show_percentage     Boolean?  @default(false)
  target_value        Decimal?  @db.Decimal(15, 2)
  warning_threshold   Decimal?  @db.Decimal(15, 2)
  critical_threshold  Decimal?  @db.Decimal(15, 2)
  is_default          Boolean?  @default(false)
  is_system           Boolean?  @default(true)
  is_active           Boolean?  @default(true)
  metadata            Json?
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  created_by          String?   @db.Uuid
  updated_at          DateTime? @db.Timestamp(6)
  updated_by          String?   @db.Uuid
  rec_status          Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_metric_type_active")
  @@index([category_code, is_active], map: "idx_metric_type_category")
  @@index([metric_group, is_active], map: "idx_metric_type_group")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_notification_channel_cd {
  code                   String    @id @db.VarChar(50)
  name                   String    @db.VarChar(250)
  name2                  String?   @db.VarChar(250)
  description            String?
  description2           String?
  display_order          Int?      @default(0)
  icon                   String?   @db.VarChar(100)
  color                  String?   @db.VarChar(60)
  channel_type           String?   @db.VarChar(20)
  requires_configuration Boolean?  @default(true)
  supports_rich_content  Boolean?  @default(false)
  supports_attachments   Boolean?  @default(false)
  max_length             Int?
  cost_per_message       Decimal?  @db.Decimal(10, 4)
  daily_limit            Int?
  rate_limit_per_minute  Int?
  is_default             Boolean?  @default(false)
  is_system              Boolean?  @default(true)
  is_active              Boolean?  @default(true)
  metadata               Json?
  created_at             DateTime? @default(now()) @db.Timestamp(6)
  created_by             String?   @db.Uuid
  updated_at             DateTime? @db.Timestamp(6)
  updated_by             String?   @db.Uuid
  rec_status             Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_notification_channel_active")
  @@index([channel_type, is_active], map: "idx_notification_channel_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_notification_type_cd {
  code                  String    @id @db.VarChar(50)
  name                  String    @db.VarChar(250)
  name2                 String?   @db.VarChar(250)
  description           String?
  description2          String?
  display_order         Int?      @default(0)
  icon                  String?   @db.VarChar(100)
  color                 String?   @db.VarChar(60)
  notification_category String?   @db.VarChar(50)
  priority              String?   @db.VarChar(20)
  requires_action       Boolean?  @default(false)
  auto_send             Boolean?  @default(true)
  default_template_code String?   @db.VarChar(50)
  default_subject       String?
  default_body_template String?
  is_default            Boolean?  @default(false)
  is_system             Boolean?  @default(true)
  is_active             Boolean?  @default(true)
  metadata              Json?
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.Uuid
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.Uuid
  rec_status            Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_notification_type_active")
  @@index([notification_category, is_active], map: "idx_notification_type_category")
  @@index([priority, is_active], map: "idx_notification_type_priority")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_permission_cd {
  code                 String    @id @db.VarChar(50)
  name                 String    @db.VarChar(250)
  name2                String?   @db.VarChar(250)
  description          String?
  description2         String?
  display_order        Int?      @default(0)
  icon                 String?   @db.VarChar(100)
  color                String?   @db.VarChar(60)
  permission_category  String?   @db.VarChar(50)
  permission_type      String?   @db.VarChar(20)
  resource_name        String?   @db.VarChar(50)
  rbac_permission_code String?   @db.VarChar(100)
  is_default           Boolean?  @default(false)
  is_system            Boolean?  @default(true)
  is_active            Boolean?  @default(true)
  metadata             Json?
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  created_by           String?   @db.Uuid
  updated_at           DateTime? @db.Timestamp(6)
  updated_by           String?   @db.Uuid
  rec_status           Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_permission_active")
  @@index([permission_category, is_active], map: "idx_permission_category")
  @@index([permission_type, is_active], map: "idx_permission_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_plan_features_cd {
  code             String    @id @db.VarChar(50)
  name             String    @db.VarChar(250)
  name2            String?   @db.VarChar(250)
  description      String?
  description2     String?
  display_order    Int?      @default(0)
  icon             String?   @db.VarChar(100)
  color            String?   @db.VarChar(60)
  feature_category String?   @db.VarChar(50)
  feature_type     String?   @db.VarChar(50)
  default_value    String?
  max_value        Int?
  unit             String?   @db.VarChar(20)
  is_default       Boolean?  @default(false)
  is_system        Boolean?  @default(true)
  is_active        Boolean?  @default(true)
  metadata         Json?
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  created_by       String?   @db.Uuid
  updated_at       DateTime? @db.Timestamp(6)
  updated_by       String?   @db.Uuid
  rec_status       Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_plan_features_active")
  @@index([feature_category, is_active], map: "idx_plan_features_category")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_plans_mst {
  code                 String    @id @db.VarChar(50)
  name                 String    @db.VarChar(250)
  name2                String?   @db.VarChar(250)
  description          String?
  description2         String?
  display_order        Int?      @default(0)
  icon                 String?   @db.VarChar(100)
  color                String?   @db.VarChar(60)
  plan_tier            String?   @db.VarChar(20)
  max_tenants          Int?
  max_users_per_tenant Int?
  max_storage_gb       Int?
  base_price_monthly   Decimal?  @db.Decimal(15, 2)
  base_price_annual    Decimal?  @db.Decimal(15, 2)
  currency_code        String?   @default("SAR") @db.VarChar(10)
  includes_features    String[]  @db.VarChar(50)
  is_default           Boolean?  @default(false)
  is_system            Boolean?  @default(true)
  is_active            Boolean?  @default(true)
  metadata             Json?
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  created_by           String?   @db.Uuid
  updated_at           DateTime? @db.Timestamp(6)
  updated_by           String?   @db.Uuid
  rec_status           Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_plans_active")
  @@index([plan_tier, is_active], map: "idx_plans_tier")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_quality_check_status_cd {
  code            String    @id @db.VarChar(50)
  name            String    @db.VarChar(250)
  name2           String?   @db.VarChar(250)
  description     String?
  description2    String?
  display_order   Int?      @default(0)
  icon            String?   @db.VarChar(100)
  color           String?   @db.VarChar(60)
  status_type     String?   @db.VarChar(20)
  allows_proceed  Boolean?  @default(true)
  requires_action Boolean?  @default(false)
  is_default      Boolean?  @default(false)
  is_system       Boolean?  @default(true)
  is_active       Boolean?  @default(true)
  metadata        Json?
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  created_by      String?   @db.Uuid
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      String?   @db.Uuid
  rec_status      Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_quality_status_active")
  @@index([status_type, is_active], map: "idx_quality_status_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_report_category_cd {
  code                  String    @id @db.VarChar(50)
  name                  String    @db.VarChar(250)
  name2                 String?   @db.VarChar(250)
  description           String?
  description2          String?
  display_order         Int?      @default(0)
  icon                  String?   @db.VarChar(100)
  color                 String?   @db.VarChar(60)
  parent_category_code  String?   @db.VarChar(50)
  report_type           String?   @db.VarChar(50)
  requires_admin_access Boolean?  @default(false)
  allowed_user_roles    String[]  @db.VarChar(50)
  is_default            Boolean?  @default(false)
  is_system             Boolean?  @default(true)
  is_active             Boolean?  @default(true)
  metadata              Json?
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.Uuid
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.Uuid
  rec_status            Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_report_category_active")
  @@index([report_type, is_active], map: "idx_report_category_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_service_prod_templates_cd {
  template_id                   String                          @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_code                 String                          @db.VarChar(50)
  name                          String                          @db.VarChar(250)
  name2                         String?                         @db.VarChar(250)
  description                   String?
  description2                  String?
  hint_text                     String?
  hint_text2                    String?
  service_category_code         String                          @db.VarChar(120)
  item_type_code                String?                         @db.VarChar(50)
  is_retail_item                Boolean?                        @default(false)
  product_group1                String?                         @db.VarChar(60)
  product_group2                String?                         @db.VarChar(60)
  product_group3                String?                         @db.VarChar(60)
  price_type                    String?                         @db.VarChar(20)
  product_unit                  String?                         @db.VarChar(60)
  default_sell_price            Decimal?                        @db.Decimal(19, 4)
  default_express_sell_price    Decimal?                        @db.Decimal(19, 4)
  product_cost                  Decimal?                        @db.Decimal(19, 4)
  min_sell_price                Decimal?                        @db.Decimal(19, 4)
  min_quantity                  Int?                            @default(1)
  pieces_per_product            Int?                            @default(1)
  turnaround_hh                 Decimal?                        @db.Decimal(4, 2)
  turnaround_hh_express         Decimal?                        @db.Decimal(4, 2)
  multiplier_express            Decimal?                        @default(1.50) @db.Decimal(4, 2)
  extra_days                    Int?                            @default(0)
  default_workflow_steps        String[]                        @db.VarChar(50)
  requires_item_count           Boolean?                        @default(true)
  requires_weight               Boolean?                        @default(false)
  requires_dimensions           Boolean?                        @default(false)
  is_to_seed                    Boolean?                        @default(true)
  seed_priority                 Int?                            @default(100)
  seed_options                  Json?
  is_express_available          Boolean?                        @default(true)
  is_subscription_available     Boolean?                        @default(true)
  tags                          Json?                           @db.Json
  id_sku                        String?                         @db.VarChar(100)
  metadata                      Json?
  product_color1                String?                         @db.VarChar(60)
  product_color2                String?                         @db.VarChar(60)
  product_color3                String?                         @db.VarChar(60)
  product_icon                  String?                         @db.VarChar(120)
  product_image                 String?
  created_at                    DateTime?                       @default(now()) @db.Timestamp(6)
  created_by                    String?                         @db.VarChar(120)
  created_info                  String?
  updated_at                    DateTime?                       @db.Timestamp(6)
  updated_by                    String?                         @db.VarChar(120)
  updated_info                  String?
  rec_status                    Int?                            @default(1) @db.SmallInt
  rec_order                     Int?
  rec_notes                     String?                         @db.VarChar(200)
  is_active                     Boolean                         @default(true)
  item_code                     String                          @db.VarChar(60)
  sys_business_type_template_cf sys_business_type_template_cf[]
  sys_service_category_cd       sys_service_category_cd         @relation(fields: [service_category_code], references: [service_category_code], onDelete: SetNull, onUpdate: NoAction, map: "fk_template_category")
  sys_items_data_list_cd        sys_items_data_list_cd          @relation(fields: [item_code], references: [item_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_template_item")
  sys_item_type_cd              sys_item_type_cd?               @relation(fields: [item_type_code], references: [item_type_code], onUpdate: NoAction, map: "fk_template_item_type")

  @@id([item_code, service_category_code], map: "pk_sys_service_prod_templates_")
  @@index([is_active, rec_order], map: "idx_templates_active")
  @@index([service_category_code], map: "idx_templates_category")
  @@index([item_code, service_category_code], map: "idx_templates_item_category")
  @@index([item_code], map: "idx_templates_item_code")
  @@index([item_type_code], map: "idx_templates_item_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_timezone_cd {
  code               String    @id @db.VarChar(50)
  name               String    @db.VarChar(250)
  name2              String?   @db.VarChar(250)
  description        String?
  description2       String?
  display_order      Int?      @default(0)
  icon               String?   @db.VarChar(100)
  color              String?   @db.VarChar(60)
  utc_offset_hours   Int
  utc_offset_minutes Int?      @default(0)
  utc_offset_string  String?   @db.VarChar(10)
  uses_dst           Boolean?  @default(false)
  dst_start_rule     String?
  dst_end_rule       String?
  region             String?   @db.VarChar(50)
  country_code       String?   @db.VarChar(2)
  is_default         Boolean?  @default(false)
  is_system          Boolean?  @default(true)
  is_active          Boolean?  @default(true)
  metadata           Json?
  created_at         DateTime? @default(now()) @db.Timestamp(6)
  created_by         String?   @db.Uuid
  updated_at         DateTime? @db.Timestamp(6)
  updated_by         String?   @db.Uuid
  rec_status         Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_timezone_active")
  @@index([region, is_active], map: "idx_timezone_region")
  @@index([utc_offset_hours, is_active], map: "idx_timezone_utc_offset")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_user_role_cd {
  code             String    @id @db.VarChar(50)
  name             String    @db.VarChar(250)
  name2            String?   @db.VarChar(250)
  description      String?
  description2     String?
  display_order    Int?      @default(0)
  icon             String?   @db.VarChar(100)
  color            String?   @db.VarChar(60)
  role_level       String?   @db.VarChar(20)
  access_level     String?   @db.VarChar(20)
  is_platform_role Boolean?  @default(false)
  is_tenant_role   Boolean?  @default(true)
  rbac_role_code   String?   @db.VarChar(50)
  is_default       Boolean?  @default(false)
  is_system        Boolean?  @default(true)
  is_active        Boolean?  @default(true)
  metadata         Json?
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  created_by       String?   @db.Uuid
  updated_at       DateTime? @db.Timestamp(6)
  updated_by       String?   @db.Uuid
  rec_status       Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_user_role_active")
  @@index([role_level, is_active], map: "idx_user_role_level")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_workflow_step_cd {
  code                     String    @id @db.VarChar(50)
  name                     String    @db.VarChar(250)
  name2                    String?   @db.VarChar(250)
  description              String?
  description2             String?
  display_order            Int?      @default(0)
  icon                     String?   @db.VarChar(100)
  color                    String?   @db.VarChar(60)
  step_category            String?   @db.VarChar(50)
  step_type                String?   @db.VarChar(50)
  is_required              Boolean?  @default(true)
  estimated_duration_hours Int?
  allowed_next_steps       String[]  @db.VarChar(50)
  requires_scan            Boolean?  @default(false)
  requires_signature       Boolean?  @default(false)
  requires_photo           Boolean?  @default(false)
  is_default               Boolean?  @default(false)
  is_system                Boolean?  @default(true)
  is_active                Boolean?  @default(true)
  metadata                 Json?
  created_at               DateTime? @default(now()) @db.Timestamp(6)
  created_by               String?   @db.Uuid
  updated_at               DateTime? @db.Timestamp(6)
  updated_by               String?   @db.Uuid
  rec_status               Int?      @default(1) @db.SmallInt

  @@index([is_active, display_order], map: "idx_workflow_step_active")
  @@index([step_category, is_active], map: "idx_workflow_step_category")
  @@index([step_type, is_active], map: "idx_workflow_step_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_components_cd {
  comp_id                 String              @id(map: "pk_sys_components_cd") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  parent_comp_id          String?             @db.Uuid
  comp_code               String              @unique(map: "ak_sys_comp_code")
  parent_comp_code        String?
  label                   String?
  label2                  String?
  description             String?
  description2            String?
  comp_level              Int?
  comp_path               String?
  feature_code            String?
  main_permission_code    String?
  role_code               String?
  screen_code             String?
  badge                   String?
  display_order           Int?
  is_leaf                 Boolean?            @default(true)
  is_navigable            Boolean?            @default(true)
  is_active               Boolean?            @default(true)
  is_system               Boolean?            @default(true)
  is_for_tenant_use       Boolean?            @default(true)
  roles                   Json?               @default("[]")
  permissions             Json?               @default("[]")
  require_all_permissions Boolean?            @default(false)
  feature_flag            Json?               @default("[]")
  metadata                Json?               @default("{}")
  comp_value1             String?
  comp_value2             String?
  comp_value3             String?
  comp_value4             String?
  comp_value5             String?
  color1                  String?             @db.VarChar(60)
  color2                  String?             @db.VarChar(60)
  color3                  String?             @db.VarChar(60)
  comp_icon               String?             @db.VarChar(120)
  comp_image              String?             @db.VarChar(120)
  rec_order               Int?
  rec_notes               String?
  rec_status              Int?                @default(1) @db.SmallInt
  created_at              DateTime            @default(now()) @db.Timestamp(6)
  created_by              String?
  created_info            String?
  updated_at              DateTime?           @db.Timestamp(6)
  updated_by              String?
  updated_info            String?
  sys_components_cd       sys_components_cd?  @relation("sys_components_cdTosys_components_cd", fields: [parent_comp_id], references: [comp_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comp_parent")
  other_sys_components_cd sys_components_cd[] @relation("sys_components_cdTosys_components_cd")

  @@index([comp_code], map: "idx_comp_code")
  @@index([comp_level, display_order], map: "idx_comp_level")
  @@index([parent_comp_id], map: "idx_comp_parent")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model hq_ff_audit_history_tr {
  id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  entity_type        String    @db.VarChar(30)
  entity_id          String?   @db.Uuid
  tenant_org_id      String?   @db.Uuid
  flag_key           String    @db.VarChar(100)
  action             String    @db.VarChar(50)
  before_value       Json?
  after_value        Json?
  changed_fields     Json?
  change_type        String?   @default("manual") @db.VarChar(30)
  bulk_operation_id  String?   @db.Uuid
  performed_by       String?   @db.Uuid
  performed_by_email String?   @db.VarChar(255)
  ip_address         String?   @db.Inet
  user_agent         String?
  created_at         DateTime? @default(now()) @db.Timestamp(6)
  performed_info     String?

  @@index([performed_by, created_at(sort: Desc)], map: "idx_hq_ff_audit_actor")
  @@index([created_at(sort: Desc)], map: "idx_hq_ff_audit_created")
  @@index([flag_key, created_at(sort: Desc)], map: "idx_hq_ff_audit_flag")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model hq_ff_feature_flags_mst {
  flag_key                   String    @id(map: "hq_feature_flags_mst_pkey") @db.VarChar(100)
  flag_name                  String
  flag_name2                 String?
  flag_description           String?
  flag_description2          String?
  governance_category        String    @db.VarChar(50)
  is_billable                Boolean   @default(false)
  is_kill_switch             Boolean   @default(false)
  is_sensitive               Boolean   @default(false)
  allowed_values             Json?
  min_value                  Decimal?  @db.Decimal
  max_value                  Decimal?  @db.Decimal
  json_schema                Json?
  data_type                  String    @db.VarChar(20)
  default_value              Json
  validation_rules           Json?
  plan_binding_type          String    @default("independent") @db.VarChar(20)
  enabled_plan_codes         Json?     @default("[]")
  allows_tenant_override     Boolean?  @default(true)
  override_requires_approval Boolean?  @default(false)
  ui_group                   String?   @db.VarChar(100)
  comp_code                  String?
  ui_display_order           Int?      @default(0)
  ui_icon                    String?   @db.VarChar(120)
  ui_color                   String?   @db.VarChar(60)
  is_active                  Boolean?  @default(true)
  created_at                 DateTime? @default(now()) @db.Timestamp(6)
  created_by                 String?
  created_info               String?
  updated_at                 DateTime? @db.Timestamp(6)
  updated_by                 String?
  updated_info               String?
  rec_status                 Int?      @default(1) @db.SmallInt
  rec_order                  Int?
  rec_notes                  String?

  @@index([is_active, ui_display_order], map: "idx_hq_ff_flags_active")
  @@index([governance_category], map: "idx_hq_ff_flags_category")
  @@index([ui_group, ui_display_order], map: "idx_hq_ff_flags_group")
  @@index([plan_binding_type], map: "idx_hq_ff_flags_plan_binding")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_asm_exceptions_tr {
  id                  String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  task_id             String            @db.Uuid
  tenant_org_id       String            @db.Uuid
  exception_type_code String            @db.VarChar(50)
  severity            String?           @default("MEDIUM") @db.VarChar(20)
  description         String
  description2        String?
  photo_urls          Json?             @default("[]")
  notes               String?
  exception_status    String?           @default("OPEN") @db.VarChar(50)
  resolved_at         DateTime?         @db.Timestamp(6)
  resolved_by         String?           @db.Uuid
  resolution          String?
  refund_amount       Decimal?          @db.Decimal(19, 4)
  is_active           Boolean           @default(true)
  rec_status          Int?              @default(1) @db.SmallInt
  rec_order           Int?
  rec_notes           String?           @db.VarChar(200)
  created_at          DateTime?         @default(now()) @db.Timestamp(6)
  created_by          String?           @db.VarChar(120)
  created_info        String?
  updated_at          DateTime?         @db.Timestamp(6)
  updated_by          String?           @db.VarChar(120)
  updated_info        String?
  org_asm_tasks_mst   org_asm_tasks_mst @relation(fields: [task_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_exception_task")

  @@index([task_id, exception_status], map: "idx_asm_exceptions_status")
  @@index([task_id], map: "idx_asm_exceptions_task")
  @@index([tenant_org_id, exception_type_code], map: "idx_asm_exceptions_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_asm_items_dtl {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  task_id             String              @db.Uuid
  order_item_id       String              @db.Uuid
  tenant_org_id       String              @db.Uuid
  item_name           String?             @db.VarChar(250)
  item_name2          String?             @db.VarChar(250)
  barcode             String?
  item_status         String?             @default("PENDING") @db.VarChar(50)
  scanned_at          DateTime?           @db.Timestamp(6)
  scanned_by          String?             @db.Uuid
  has_exception       Boolean?            @default(false)
  exception_id        String?             @db.Uuid
  is_active           Boolean             @default(true)
  rec_status          Int?                @default(1) @db.SmallInt
  rec_order           Int?
  rec_notes           String?             @db.VarChar(200)
  created_at          DateTime?           @default(now()) @db.Timestamp(6)
  created_by          String?             @db.VarChar(120)
  created_info        String?
  updated_at          DateTime?           @db.Timestamp(6)
  updated_by          String?             @db.VarChar(120)
  updated_info        String?
  org_order_items_dtl org_order_items_dtl @relation(fields: [order_item_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_item_order_item")
  org_asm_tasks_mst   org_asm_tasks_mst   @relation(fields: [task_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_item_task")

  @@unique([task_id, order_item_id])
  @@index([order_item_id], map: "idx_asm_items_order_item")
  @@index([task_id, item_status], map: "idx_asm_items_status")
  @@index([task_id], map: "idx_asm_items_task")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_asm_locations_mst {
  id                 String              @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id      String              @db.Uuid
  branch_id          String?             @db.Uuid
  location_code      String              @db.VarChar(100)
  location_name      String              @db.VarChar(250)
  location_name2     String?             @db.VarChar(250)
  location_type_code String              @db.VarChar(50)
  capacity           Int?                @default(50)
  current_load       Int?                @default(0)
  is_active          Boolean             @default(true)
  rec_status         Int?                @default(1) @db.SmallInt
  rec_order          Int?
  rec_notes          String?             @db.VarChar(200)
  created_at         DateTime?           @default(now()) @db.Timestamp(6)
  created_by         String?             @db.VarChar(120)
  created_info       String?
  updated_at         DateTime?           @db.Timestamp(6)
  updated_by         String?             @db.VarChar(120)
  updated_info       String?
  org_branches_mst   org_branches_mst?   @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_asm_location_branch")
  org_tenants_mst    org_tenants_mst     @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_location_tenant")
  org_asm_tasks_mst  org_asm_tasks_mst[]

  @@id([id, tenant_org_id], map: "pk_org_asm_locations_mst")
  @@unique([tenant_org_id, location_code])
  @@index([tenant_org_id, branch_id], map: "idx_asm_locations_branch")
  @@index([tenant_org_id], map: "idx_asm_locations_tenant")
  @@index([tenant_org_id, is_active], map: "idx_asm_locations_tenant_active")
  @@index([tenant_org_id, rec_status], map: "idx_asm_locations_tenant_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_asm_tasks_mst {
  id                        String                      @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id             String                      @db.Uuid
  order_id                  String                      @db.Uuid
  branch_id                 String?                     @db.Uuid
  assigned_to               String?                     @db.Uuid
  location_id               String?                     @db.Uuid
  task_status               String?                     @default("PENDING") @db.VarChar(50)
  total_items               Int?                        @default(0)
  scanned_items             Int?                        @default(0)
  exception_items           Int?                        @default(0)
  started_at                DateTime?                   @db.Timestamp(6)
  completed_at              DateTime?                   @db.Timestamp(6)
  qa_status                 String?                     @db.VarChar(50)
  qa_by                     String?                     @db.Uuid
  qa_at                     DateTime?                   @db.Timestamp(6)
  qa_note                   String?
  qa_photo_url              String?
  packaging_type_code       String?                     @db.VarChar(50)
  packing_note              String?
  packed_at                 DateTime?                   @db.Timestamp(6)
  packed_by                 String?                     @db.Uuid
  is_active                 Boolean                     @default(true)
  rec_status                Int?                        @default(1) @db.SmallInt
  rec_order                 Int?
  rec_notes                 String?                     @db.VarChar(200)
  created_at                DateTime?                   @default(now()) @db.Timestamp(6)
  created_by                String?                     @db.VarChar(120)
  created_info              String?
  updated_at                DateTime?                   @db.Timestamp(6)
  updated_by                String?                     @db.VarChar(120)
  updated_info              String?
  org_asm_exceptions_tr     org_asm_exceptions_tr[]
  org_asm_items_dtl         org_asm_items_dtl[]
  org_asm_locations_mst     org_asm_locations_mst?      @relation(fields: [location_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_asm_task_location")
  org_orders_mst            org_orders_mst              @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_task_order")
  org_tenants_mst           org_tenants_mst             @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_asm_task_tenant")
  org_pck_packing_lists_mst org_pck_packing_lists_mst[]
  org_qa_decisions_tr       org_qa_decisions_tr[]

  @@id([id, tenant_org_id], map: "pk_org_asm_tasks_mst")
  @@unique([tenant_org_id, order_id])
  @@index([tenant_org_id, assigned_to], map: "idx_asm_tasks_assigned")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_asm_tasks_created")
  @@index([tenant_org_id, location_id], map: "idx_asm_tasks_location")
  @@index([order_id], map: "idx_asm_tasks_order")
  @@index([tenant_org_id, task_status], map: "idx_asm_tasks_status")
  @@index([tenant_org_id], map: "idx_asm_tasks_tenant")
  @@index([tenant_org_id, rec_status], map: "idx_asm_tasks_tenant_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_dlv_pod_tr {
  id                String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stop_id           String            @db.Uuid
  tenant_org_id     String            @db.Uuid
  pod_method_code   String            @db.VarChar(50)
  otp_code          String?           @db.VarChar(10)
  otp_verified      Boolean?          @default(false)
  signature_url     String?
  photo_urls        Json?             @default("[]")
  verified_at       DateTime?         @db.Timestamp(6)
  verified_by       String?           @db.Uuid
  metadata          Json?             @default("{}")
  is_active         Boolean           @default(true)
  rec_status        Int?              @default(1) @db.SmallInt
  rec_order         Int?
  rec_notes         String?           @db.VarChar(200)
  created_at        DateTime?         @default(now()) @db.Timestamp(6)
  created_by        String?           @db.VarChar(120)
  created_info      String?
  updated_at        DateTime?         @db.Timestamp(6)
  updated_by        String?           @db.VarChar(120)
  updated_info      String?
  org_dlv_stops_dtl org_dlv_stops_dtl @relation(fields: [stop_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dlv_pod_stop")

  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_dlv_pod_created")
  @@index([stop_id], map: "idx_dlv_pod_stop")
  @@index([tenant_org_id], map: "idx_dlv_pod_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_dlv_routes_mst {
  id                         String              @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id              String              @db.Uuid
  branch_id                  String?             @db.Uuid
  route_number               String              @db.VarChar(100)
  driver_id                  String?             @db.Uuid
  route_status_code          String?             @default("planned") @db.VarChar(50)
  total_stops                Int?                @default(0)
  completed_stops            Int?                @default(0)
  started_at                 DateTime?           @db.Timestamp(6)
  completed_at               DateTime?           @db.Timestamp(6)
  estimated_duration_minutes Int?
  total_distance_km          Decimal?            @db.Decimal(10, 2)
  is_active                  Boolean             @default(true)
  rec_status                 Int?                @default(1) @db.SmallInt
  rec_order                  Int?
  rec_notes                  String?             @db.VarChar(200)
  created_at                 DateTime?           @default(now()) @db.Timestamp(6)
  created_by                 String?             @db.VarChar(120)
  created_info               String?
  updated_at                 DateTime?           @db.Timestamp(6)
  updated_by                 String?             @db.VarChar(120)
  updated_info               String?
  org_branches_mst           org_branches_mst?   @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_dlv_route_branch")
  org_tenants_mst            org_tenants_mst     @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dlv_route_tenant")
  org_dlv_stops_dtl          org_dlv_stops_dtl[]

  @@id([id, tenant_org_id], map: "pk_org_dlv_routes_mst")
  @@unique([tenant_org_id, route_number])
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_dlv_routes_created")
  @@index([tenant_org_id, driver_id], map: "idx_dlv_routes_driver")
  @@index([tenant_org_id, route_status_code], map: "idx_dlv_routes_status")
  @@index([tenant_org_id], map: "idx_dlv_routes_tenant")
  @@index([tenant_org_id, rec_status], map: "idx_dlv_routes_tenant_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_dlv_slots_mst {
  id               String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String            @db.Uuid
  branch_id        String?           @db.Uuid
  slot_date        DateTime          @db.Date
  time_range_start DateTime          @db.Time(6)
  time_range_end   DateTime          @db.Time(6)
  slot_type        String            @db.VarChar(20)
  capacity         Int?              @default(10)
  booked_count     Int?              @default(0)
  is_active        Boolean           @default(true)
  rec_status       Int?              @default(1) @db.SmallInt
  rec_order        Int?
  rec_notes        String?           @db.VarChar(200)
  created_at       DateTime?         @default(now()) @db.Timestamp(6)
  created_by       String?           @db.VarChar(120)
  created_info     String?
  updated_at       DateTime?         @db.Timestamp(6)
  updated_by       String?           @db.VarChar(120)
  updated_info     String?
  org_branches_mst org_branches_mst? @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_dlv_slot_branch")
  org_tenants_mst  org_tenants_mst   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dlv_slot_tenant")

  @@unique([tenant_org_id, slot_date, time_range_start, time_range_end, slot_type])
  @@index([tenant_org_id, slot_date], map: "idx_dlv_slots_date")
  @@index([tenant_org_id], map: "idx_dlv_slots_tenant")
  @@index([tenant_org_id, slot_type], map: "idx_dlv_slots_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_dlv_stops_dtl {
  id                 String             @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  route_id           String             @db.Uuid
  order_id           String             @db.Uuid
  tenant_org_id      String             @db.Uuid
  sequence           Int
  address            String
  address_lat        Decimal?           @db.Decimal(10, 8)
  address_lng        Decimal?           @db.Decimal(11, 8)
  stop_status_code   String?            @default("pending") @db.VarChar(50)
  scheduled_time     DateTime?          @db.Timestamp(6)
  estimated_arrival  DateTime?          @db.Timestamp(6)
  actual_time        DateTime?          @db.Timestamp(6)
  contact_name       String?            @db.VarChar(255)
  contact_phone      String?            @db.VarChar(50)
  notes              String?
  is_active          Boolean            @default(true)
  rec_status         Int?               @default(1) @db.SmallInt
  rec_order          Int?
  rec_notes          String?            @db.VarChar(200)
  created_at         DateTime?          @default(now()) @db.Timestamp(6)
  created_by         String?            @db.VarChar(120)
  created_info       String?
  updated_at         DateTime?          @db.Timestamp(6)
  updated_by         String?            @db.VarChar(120)
  updated_info       String?
  org_dlv_pod_tr     org_dlv_pod_tr[]
  org_orders_mst     org_orders_mst     @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dlv_stop_order")
  org_dlv_routes_mst org_dlv_routes_mst @relation(fields: [route_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dlv_stop_route")

  @@id([id, tenant_org_id], map: "pk_org_dlv_stops_dtl")
  @@unique([tenant_org_id, route_id, order_id])
  @@index([order_id], map: "idx_dlv_stops_order")
  @@index([route_id], map: "idx_dlv_stops_route")
  @@index([tenant_org_id, scheduled_time], map: "idx_dlv_stops_scheduled")
  @@index([route_id, stop_status_code], map: "idx_dlv_stops_status")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_ff_overrides_cf {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String          @db.Uuid
  flag_key         String          @db.VarChar(100)
  data_type        String          @db.VarChar(20)
  override_value   Json
  override_reason  String?
  override_type    String?         @default("manual") @db.VarChar(30)
  approval_status  String?         @default("approved") @db.VarChar(20)
  approved_by      String?         @db.VarChar(120)
  approved_at      DateTime?       @db.Timestamp(6)
  rejection_reason String?
  effective_from   DateTime?       @db.Timestamp(6)
  effective_until  DateTime?       @db.Timestamp(6)
  is_active        Boolean?        @default(true)
  created_at       DateTime?       @default(now()) @db.Timestamp(6)
  created_by       String?
  created_info     String?
  updated_at       DateTime?       @db.Timestamp(6)
  updated_by       String?
  updated_info     String?
  rec_status       Int?            @default(1) @db.SmallInt
  rec_order        Int?
  rec_notes        String?         @db.VarChar(200)
  org_tenants_mst  org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, flag_key, is_active])
  @@index([effective_from, effective_until], map: "idx_org_ff_overrides_effective")
  @@index([flag_key, is_active], map: "idx_org_ff_overrides_flag")
  @@index([tenant_org_id, is_active], map: "idx_org_ff_overrides_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_pck_packing_lists_mst {
  id                  String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id       String            @db.Uuid
  order_id            String            @db.Uuid
  task_id             String            @db.Uuid
  list_number         String            @db.VarChar(100)
  items_summary       Json              @default("[]")
  packaging_type_code String            @db.VarChar(50)
  item_count          Int?              @default(0)
  qr_code             String?
  generated_at        DateTime?         @default(now()) @db.Timestamp(6)
  generated_by        String            @db.Uuid
  printed_at          DateTime?         @db.Timestamp(6)
  print_count         Int?              @default(0)
  is_active           Boolean           @default(true)
  rec_status          Int?              @default(1) @db.SmallInt
  rec_order           Int?
  rec_notes           String?           @db.VarChar(200)
  created_at          DateTime?         @default(now()) @db.Timestamp(6)
  created_by          String?           @db.VarChar(120)
  created_info        String?
  updated_at          DateTime?         @db.Timestamp(6)
  updated_by          String?           @db.VarChar(120)
  updated_info        String?
  org_orders_mst      org_orders_mst    @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_pck_list_order")
  org_asm_tasks_mst   org_asm_tasks_mst @relation(fields: [task_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_pck_list_task")
  org_tenants_mst     org_tenants_mst   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_pck_list_tenant")

  @@unique([tenant_org_id, order_id])
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_pck_lists_created")
  @@index([order_id], map: "idx_pck_lists_order")
  @@index([task_id], map: "idx_pck_lists_task")
  @@index([tenant_org_id], map: "idx_pck_lists_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_qa_decisions_tr {
  id                 String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  task_id            String            @db.Uuid
  tenant_org_id      String            @db.Uuid
  order_id           String            @db.Uuid
  decision_type_code String            @db.VarChar(50)
  qa_by              String            @db.Uuid
  qa_at              DateTime?         @default(now()) @db.Timestamp(6)
  qa_note            String?
  qa_photo_url       String?
  is_active          Boolean           @default(true)
  rec_status         Int?              @default(1) @db.SmallInt
  rec_order          Int?
  rec_notes          String?           @db.VarChar(200)
  created_at         DateTime?         @default(now()) @db.Timestamp(6)
  created_by         String?           @db.VarChar(120)
  created_info       String?
  updated_at         DateTime?         @db.Timestamp(6)
  updated_by         String?           @db.VarChar(120)
  updated_info       String?
  org_orders_mst     org_orders_mst    @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_qa_decision_order")
  org_asm_tasks_mst  org_asm_tasks_mst @relation(fields: [task_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_qa_decision_task")

  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_qa_decisions_created")
  @@index([order_id], map: "idx_qa_decisions_order")
  @@index([task_id], map: "idx_qa_decisions_task")
  @@index([tenant_org_id], map: "idx_qa_decisions_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_rcpt_receipts_mst {
  id                    String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id         String          @db.Uuid
  order_id              String          @db.Uuid
  receipt_type_code     String          @db.VarChar(50)
  delivery_channel_code String          @db.VarChar(50)
  delivery_status_code  String?         @default("pending") @db.VarChar(50)
  content_text          String?
  content_html          String?
  qr_code               String?
  recipient_phone       String?         @db.VarChar(50)
  recipient_email       String?         @db.VarChar(255)
  sent_at               DateTime?       @db.Timestamp(6)
  delivered_at          DateTime?       @db.Timestamp(6)
  retry_count           Int?            @default(0)
  max_retries           Int?            @default(3)
  metadata              Json?           @default("{}")
  is_active             Boolean         @default(true)
  rec_status            Int?            @default(1) @db.SmallInt
  rec_order             Int?
  rec_notes             String?         @db.VarChar(200)
  created_at            DateTime?       @default(now()) @db.Timestamp(6)
  created_by            String?         @db.VarChar(120)
  created_info          String?
  updated_at            DateTime?       @db.Timestamp(6)
  updated_by            String?         @db.VarChar(120)
  updated_info          String?
  org_orders_mst        org_orders_mst  @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_rcpt_receipt_order")
  org_tenants_mst       org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_rcpt_receipt_tenant")

  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_rcpt_receipts_created")
  @@index([tenant_org_id, delivery_status_code, created_at], map: "idx_rcpt_receipts_delivery_status")
  @@index([order_id], map: "idx_rcpt_receipts_order")
  @@index([tenant_org_id], map: "idx_rcpt_receipts_tenant")
  @@index([tenant_org_id, rec_status], map: "idx_rcpt_receipts_tenant_status")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_rcpt_templates_cf {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id    String          @db.Uuid
  template_type    String          @db.VarChar(50)
  language         String          @db.VarChar(10)
  template_content String
  is_active        Boolean         @default(true)
  rec_status       Int?            @default(1) @db.SmallInt
  rec_order        Int?
  rec_notes        String?         @db.VarChar(200)
  created_at       DateTime?       @default(now()) @db.Timestamp(6)
  created_by       String?         @db.VarChar(120)
  created_info     String?
  updated_at       DateTime?       @db.Timestamp(6)
  updated_by       String?         @db.VarChar(120)
  updated_info     String?
  org_tenants_mst  org_tenants_mst @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_rcpt_template_tenant")

  @@unique([tenant_org_id, template_type, language])
  @@index([tenant_org_id], map: "idx_rcpt_templates_tenant")
  @@index([tenant_org_id, template_type, language], map: "idx_rcpt_templates_type_lang")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_asm_exception_type_cd {
  code            String    @id @db.VarChar(50)
  name            String    @db.VarChar(250)
  name2           String?   @db.VarChar(250)
  description     String?
  description2    String?
  severity_level  String?   @default("MEDIUM") @db.VarChar(20)
  requires_action Boolean?  @default(true)
  is_active       Boolean   @default(true)
  rec_status      Int?      @default(1) @db.SmallInt
  rec_order       Int?
  rec_notes       String?   @db.VarChar(200)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  created_by      String?   @db.VarChar(120)
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_asm_location_type_cd {
  code             String    @id @db.VarChar(50)
  name             String    @db.VarChar(250)
  name2            String?   @db.VarChar(250)
  description      String?
  description2     String?
  default_capacity Int?      @default(50)
  is_active        Boolean   @default(true)
  rec_status       Int?      @default(1) @db.SmallInt
  rec_order        Int?
  rec_notes        String?   @db.VarChar(200)
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  created_by       String?   @db.VarChar(120)
  updated_at       DateTime? @db.Timestamp(6)
  updated_by       String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_dlv_pod_method_cd {
  code                  String    @id @db.VarChar(50)
  name                  String    @db.VarChar(250)
  name2                 String?   @db.VarChar(250)
  description           String?
  description2          String?
  requires_verification Boolean?  @default(true)
  is_active             Boolean   @default(true)
  rec_status            Int?      @default(1) @db.SmallInt
  rec_order             Int?
  rec_notes             String?   @db.VarChar(200)
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  created_by            String?   @db.VarChar(120)
  updated_at            DateTime? @db.Timestamp(6)
  updated_by            String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_dlv_route_status_cd {
  code                String    @id @db.VarChar(50)
  name                String    @db.VarChar(250)
  name2               String?   @db.VarChar(250)
  description         String?
  description2        String?
  allows_modification Boolean?  @default(true)
  is_active           Boolean   @default(true)
  rec_status          Int?      @default(1) @db.SmallInt
  rec_order           Int?
  rec_notes           String?   @db.VarChar(200)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  created_by          String?   @db.VarChar(120)
  updated_at          DateTime? @db.Timestamp(6)
  updated_by          String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_dlv_stop_status_cd {
  code         String    @id @db.VarChar(50)
  name         String    @db.VarChar(250)
  name2        String?   @db.VarChar(250)
  description  String?
  description2 String?
  is_final     Boolean?  @default(false)
  is_active    Boolean   @default(true)
  rec_status   Int?      @default(1) @db.SmallInt
  rec_order    Int?
  rec_notes    String?   @db.VarChar(200)
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  created_by   String?   @db.VarChar(120)
  updated_at   DateTime? @db.Timestamp(6)
  updated_by   String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_ff_pln_flag_mappings_dtl {
  id                             String                         @id(map: "sys_pln_flag_mappings_dtl_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  plan_code                      String                         @db.VarChar(50)
  flag_key                       String                         @db.VarChar(100)
  plan_specific_value            Json?
  is_enabled                     Boolean?                       @default(true)
  notes                          String?
  created_at                     DateTime?                      @default(now()) @db.Timestamp(6)
  created_by                     String?
  created_info                   String?
  updated_at                     DateTime?                      @db.Timestamp(6)
  updated_by                     String?
  updated_info                   String?
  rec_status                     Int?                           @default(1) @db.SmallInt
  rec_order                      Int?
  rec_notes                      String?                        @db.VarChar(200)
  is_active                      Boolean?                       @default(true)
  sys_pln_subscription_plans_mst sys_pln_subscription_plans_mst @relation(fields: [plan_code], references: [plan_code], onDelete: Cascade, onUpdate: NoAction, map: "sys_pln_flag_mappings_dtl_plan_code_fkey")

  @@unique([plan_code, flag_key], map: "sys_pln_flag_mappings_dtl_plan_code_flag_key_key")
  @@index([is_active, is_enabled], map: "idx_sys_pln_flag_mappings_active")
  @@index([flag_key, is_enabled], map: "idx_sys_pln_flag_mappings_flag")
  @@index([plan_code, is_enabled], map: "idx_sys_pln_flag_mappings_plan")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_pck_packaging_type_cd {
  code         String    @id @db.VarChar(50)
  name         String    @db.VarChar(250)
  name2        String?   @db.VarChar(250)
  description  String?
  description2 String?
  is_active    Boolean   @default(true)
  rec_status   Int?      @default(1) @db.SmallInt
  rec_order    Int?
  rec_notes    String?   @db.VarChar(200)
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  created_by   String?   @db.VarChar(120)
  updated_at   DateTime? @db.Timestamp(6)
  updated_by   String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_qa_decision_type_cd {
  code            String    @id @db.VarChar(50)
  name            String    @db.VarChar(250)
  name2           String?   @db.VarChar(250)
  description     String?
  description2    String?
  allows_proceed  Boolean?  @default(false)
  requires_rework Boolean?  @default(false)
  is_active       Boolean   @default(true)
  rec_status      Int?      @default(1) @db.SmallInt
  rec_order       Int?
  rec_notes       String?   @db.VarChar(200)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  created_by      String?   @db.VarChar(120)
  updated_at      DateTime? @db.Timestamp(6)
  updated_by      String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_rcpt_delivery_channel_cd {
  code             String    @id @db.VarChar(50)
  name             String    @db.VarChar(250)
  name2            String?   @db.VarChar(250)
  description      String?
  description2     String?
  requires_api_key Boolean?  @default(false)
  is_active        Boolean   @default(true)
  rec_status       Int?      @default(1) @db.SmallInt
  rec_order        Int?
  rec_notes        String?   @db.VarChar(200)
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  created_by       String?   @db.VarChar(120)
  updated_at       DateTime? @db.Timestamp(6)
  updated_by       String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_rcpt_delivery_status_cd {
  code         String    @id @db.VarChar(50)
  name         String    @db.VarChar(250)
  name2        String?   @db.VarChar(250)
  description  String?
  description2 String?
  is_final     Boolean?  @default(false)
  allows_retry Boolean?  @default(true)
  is_active    Boolean   @default(true)
  rec_status   Int?      @default(1) @db.SmallInt
  rec_order    Int?
  rec_notes    String?   @db.VarChar(200)
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  created_by   String?   @db.VarChar(120)
  updated_at   DateTime? @db.Timestamp(6)
  updated_by   String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_rcpt_receipt_type_cd {
  code               String    @id @db.VarChar(50)
  name               String    @db.VarChar(250)
  name2              String?   @db.VarChar(250)
  description        String?
  description2       String?
  supports_bilingual Boolean?  @default(true)
  supports_qr_code   Boolean?  @default(true)
  is_active          Boolean   @default(true)
  rec_status         Int?      @default(1) @db.SmallInt
  rec_order          Int?
  rec_notes          String?   @db.VarChar(200)
  created_at         DateTime? @default(now()) @db.Timestamp(6)
  created_by         String?   @db.VarChar(120)
  updated_at         DateTime? @db.Timestamp(6)
  updated_by         String?   @db.VarChar(120)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_stng_audit_log_tr {
  id                      String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id           String            @db.Uuid
  stng_code               String
  stng_audit_scope        String
  stng_audit_action       String
  branch_id               String?           @db.Uuid
  user_id                 String?           @db.Uuid
  stng_before_value_jsonb Json?
  stng_after_value_jsonb  Json?
  stng_change_reason      String?
  stng_request_id         String?
  stng_ip_address         String?
  changed_at              DateTime?         @default(now()) @db.Timestamptz(6)
  changed_by              String?           @db.Uuid
  changed_by_name         String?           @db.VarChar(120)
  created_at              DateTime?         @default(now()) @db.Timestamp(6)
  created_info            String?
  rec_status              Int?              @default(1) @db.SmallInt
  is_active               Boolean           @default(true)
  org_branches_mst        org_branches_mst? @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_stng_audit_log_tr_branches")
  org_tenants_mst         org_tenants_mst   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_users_mst           org_users_mst?    @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([changed_at(sort: Desc)], map: "idx_org_stng_audit_changed")
  @@index([changed_by], map: "idx_org_stng_audit_changed_by")
  @@index([stng_code], map: "idx_org_stng_audit_code")
  @@index([stng_audit_scope], map: "idx_org_stng_audit_scope")
  @@index([tenant_org_id], map: "idx_org_stng_audit_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_stng_effective_cache_cf {
  id                String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id     String            @db.Uuid
  branch_id         String?           @db.Uuid
  user_id           String?           @db.Uuid
  stng_cache_jsonb  Json
  stng_computed_at  DateTime?         @default(now()) @db.Timestamptz(6)
  stng_compute_hash String
  created_at        DateTime?         @default(now()) @db.Timestamp(6)
  created_by        String?           @db.VarChar(120)
  updated_at        DateTime?         @db.Timestamp(6)
  updated_by        String?           @db.VarChar(120)
  rec_status        Int?              @default(1) @db.SmallInt
  is_active         Boolean           @default(true)
  org_branches_mst  org_branches_mst? @relation(fields: [branch_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_stng_effective_cache_cf_branches")
  org_tenants_mst   org_tenants_mst   @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_users_mst     org_users_mst?    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, branch_id, user_id])
  @@index([stng_computed_at], map: "idx_org_stng_cache_computed")
  @@index([stng_compute_hash], map: "idx_org_stng_cache_hash")
  @@index([tenant_org_id], map: "idx_org_stng_cache_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_stng_categories_cd {
  stng_category_code     String                   @id
  stng_category_name     String                   @db.VarChar(250)
  stng_category_name2    String?                  @db.VarChar(250)
  stng_category_desc     String?
  stng_category_desc2    String?
  stng_category_order    Int?
  stng_category_icon     String?                  @db.VarChar(120)
  created_at             DateTime?                @default(now()) @db.Timestamp(6)
  created_by             String?                  @db.VarChar(120)
  created_info           String?
  updated_at             DateTime?                @db.Timestamp(6)
  updated_by             String?                  @db.VarChar(120)
  updated_info           String?
  rec_status             Int?                     @default(1) @db.SmallInt
  rec_order              Int?
  rec_notes              String?                  @db.VarChar(200)
  is_active              Boolean                  @default(true)
  sys_stng_settings_cd   sys_stng_settings_cd[]
  sys_tenant_settings_cd sys_tenant_settings_cd[]

  @@index([is_active], map: "idx_sys_stng_categories_active")
  @@index([stng_category_order], map: "idx_sys_stng_categories_order")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_stng_profile_values_dtl {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stng_profile_code      String
  stng_code              String
  stng_value_jsonb       Json
  created_at             DateTime?              @default(now()) @db.Timestamp(6)
  created_by             String?                @db.VarChar(120)
  created_info           String?
  updated_at             DateTime?              @db.Timestamp(6)
  updated_by             String?                @db.VarChar(120)
  updated_info           String?
  rec_status             Int?                   @default(1) @db.SmallInt
  rec_order              Int?
  rec_notes              String?                @db.VarChar(200)
  is_active              Boolean                @default(true)
  sys_tenant_settings_cd sys_tenant_settings_cd @relation(fields: [stng_code], references: [setting_code], onDelete: NoAction, onUpdate: NoAction)
  sys_stng_profiles_mst  sys_stng_profiles_mst  @relation(fields: [stng_profile_code], references: [stng_profile_code], onDelete: Cascade, onUpdate: NoAction)

  @@unique([stng_profile_code, stng_code])
  @@index([stng_profile_code, is_active], map: "idx_sys_stng_profile_values_active")
  @@index([stng_code], map: "idx_sys_stng_profile_values_code")
  @@index([stng_profile_code], map: "idx_sys_stng_profile_values_profile")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_stng_profiles_mst {
  stng_profile_code           String                        @id
  stng_profile_id             String?                       @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stng_profile_name           String                        @db.VarChar(250)
  stng_profile_name2          String?                       @db.VarChar(250)
  stng_profile_desc           String?
  stng_profile_desc2          String?
  country_code                String?                       @db.VarChar(5)
  segment_code                String?                       @db.VarChar(50)
  parent_profile_code         String?
  stng_profile_version        Int?                          @default(1)
  created_at                  DateTime?                     @default(now()) @db.Timestamp(6)
  created_by                  String?                       @db.VarChar(120)
  created_info                String?
  updated_at                  DateTime?                     @db.Timestamp(6)
  updated_by                  String?                       @db.VarChar(120)
  updated_info                String?
  rec_status                  Int?                          @default(1) @db.SmallInt
  rec_order                   Int?
  rec_notes                   String?                       @db.VarChar(200)
  is_active                   Boolean                       @default(true)
  org_tenants_mst             org_tenants_mst[]
  sys_stng_profile_values_dtl sys_stng_profile_values_dtl[]
  sys_stng_profiles_mst       sys_stng_profiles_mst?        @relation("sys_stng_profiles_mstTosys_stng_profiles_mst", fields: [parent_profile_code], references: [stng_profile_code], onDelete: NoAction, onUpdate: NoAction)
  other_sys_stng_profiles_mst sys_stng_profiles_mst[]       @relation("sys_stng_profiles_mstTosys_stng_profiles_mst")

  @@index([is_active], map: "idx_sys_stng_profiles_active")
  @@index([country_code], map: "idx_sys_stng_profiles_country")
  @@index([parent_profile_code], map: "idx_sys_stng_profiles_parent")
  @@index([segment_code], map: "idx_sys_stng_profiles_segment")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_order_item_pieces_dtl {
  id                      String                   @id(map: "pk_org_order_item_pieces_dtl") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id           String                   @db.Uuid
  order_id                String                   @db.Uuid
  order_item_id           String                   @db.Uuid
  piece_seq               Int
  piece_code              String?                  @default(dbgenerated("(((((order_id)::text || '-'::text) || (order_item_id)::text) || '-'::text) || piece_seq)"))
  service_category_code   String?                  @db.VarChar(120)
  product_id              String?                  @db.Uuid
  scan_state              String?
  barcode                 String?
  quantity                Int?                     @default(1)
  price_per_unit          Decimal                  @db.Decimal(19, 4)
  total_price             Decimal                  @db.Decimal(19, 4)
  piece_status            String?                  @default("processing")
  piece_stage             String?
  is_rejected             Boolean?                 @default(false)
  issue_id                String?                  @db.Uuid
  rack_location           String?
  last_step_at            DateTime?                @db.Timestamp(6)
  last_step_by            String?
  last_step               String?
  notes                   String?
  color                   String?                  @db.VarChar(50)
  brand                   String?                  @db.VarChar(100)
  has_stain               Boolean?
  has_damage              Boolean?
  metadata                Json?                    @default("{}")
  created_at              DateTime?                @default(now()) @db.Timestamp(6)
  rec_order               Int?
  rec_notes               String?
  rec_status              Int?                     @default(1) @db.SmallInt
  created_by              String?
  created_info            String?
  updated_at              DateTime?                @db.Timestamp(6)
  updated_by              String?
  updated_info            String?
  is_ready                Boolean                  @default(false)
  org_order_items_dtl     org_order_items_dtl      @relation(fields: [order_item_id], references: [id], onUpdate: Restrict, map: "fk_org_orde_reference_org_orde")
  org_orders_mst          org_orders_mst           @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_pieces_order")
  org_product_data_mst    org_product_data_mst?    @relation(fields: [product_id], references: [id], onUpdate: NoAction, map: "fk_org_pieces_product")
  org_service_category_cf org_service_category_cf? @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: SetNull, onUpdate: NoAction, map: "fk_org_pieces_service_category")
  org_tenants_mst         org_tenants_mst          @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_pieces_tenant")

  @@unique([tenant_org_id, order_id, order_item_id, piece_seq], map: "ak_piece_seq_unique_ord_item")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_order_pieces_created")
  @@index([order_id, order_item_id], map: "idx_order_pieces_order_item")
  @@index([order_id, order_item_id, piece_status], map: "idx_order_pieces_order_item_status")
  @@index([tenant_org_id, scan_state], map: "idx_order_pieces_scan_state")
  @@index([tenant_org_id, piece_status], map: "idx_order_pieces_status")
  @@index([tenant_org_id], map: "idx_order_pieces_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_ord_custom_validations_cf {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id       String?   @db.Uuid
  screen_key          String
  validation_key      String
  validation_function String?
  validation_config   Json?     @default("{}")
  is_active           Boolean?  @default(true)
  created_at          DateTime? @default(now()) @db.Timestamptz(6)
  updated_at          DateTime? @default(now()) @db.Timestamptz(6)
  created_by          String?   @db.Uuid
  updated_by          String?   @db.Uuid

  @@unique([tenant_org_id, screen_key, validation_key])
  @@index([tenant_org_id, screen_key], map: "idx_org_ord_custom_validations_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_ord_screen_contracts_cf {
  id                   String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id        String?   @db.Uuid
  screen_key           String
  pre_conditions       Json
  required_permissions Json
  is_active            Boolean?  @default(true)
  created_at           DateTime? @default(now()) @db.Timestamptz(6)
  updated_at           DateTime? @default(now()) @db.Timestamptz(6)
  created_by           String?   @db.Uuid
  updated_by           String?   @db.Uuid

  @@unique([tenant_org_id, screen_key])
  @@index([tenant_org_id, screen_key], map: "idx_org_ord_screen_contracts_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_ord_transition_events {
  id             String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id  String         @db.Uuid
  order_id       String         @db.Uuid
  screen         String
  from_status    String?
  to_status      String?
  event_type     String
  event_data     Json?          @default("{}")
  created_at     DateTime?      @default(now()) @db.Timestamptz(6)
  org_orders_mst org_orders_mst @relation(fields: [order_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_transition_events_order")

  @@index([order_id, created_at(sort: Desc)], map: "idx_org_ord_transition_events_order")
  @@index([tenant_org_id, created_at(sort: Desc)], map: "idx_org_ord_transition_events_tenant")
  @@index([event_type, created_at(sort: Desc)], map: "idx_org_ord_transition_events_type")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_ord_webhook_subscriptions_cf {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id   String?   @db.Uuid
  screen_key      String?
  event_type      String
  webhook_url     String
  webhook_secret  String?
  is_active       Boolean?  @default(true)
  retry_count     Int?      @default(3)
  timeout_seconds Int?      @default(30)
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)
  created_by      String?   @db.Uuid
  updated_by      String?   @db.Uuid

  @@index([tenant_org_id, screen_key], map: "idx_org_ord_webhook_subscriptions_tenant")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model org_stng_settings_cf {
  id                   String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id        String               @db.Uuid
  branch_id            String?              @db.Uuid
  user_id              String?              @db.Uuid
  service_category_id  String?              @db.Uuid
  setting_code         String
  stng_scope           String
  value_jsonb          Json
  effective_from       DateTime?            @db.Timestamptz(6)
  effective_to         DateTime?            @db.Timestamptz(6)
  notes                String?
  is_active            Boolean              @default(true)
  rec_order            Int?
  rec_notes            String?
  rec_status           Int                  @default(1) @db.SmallInt
  created_at           DateTime             @default(now()) @db.Timestamptz(6)
  created_by           String?              @db.Uuid
  created_info         String?
  updated_at           DateTime?            @db.Timestamptz(6)
  updated_by           String?              @db.Uuid
  updated_info         String?
  sys_stng_settings_cd sys_stng_settings_cd @relation(fields: [setting_code], references: [setting_code])

  @@unique([tenant_org_id, branch_id, user_id, service_category_id, setting_code], map: "uq_org_stng_values")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sys_ord_workflow_template_versions {
  id                       String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_id              String                   @db.Uuid
  version_number           Int
  template_snapshot        Json
  change_description       String?
  created_by               String?                  @db.Uuid
  created_at               DateTime?                @default(now()) @db.Timestamptz(6)
  sys_workflow_template_cd sys_workflow_template_cd @relation(fields: [template_id], references: [template_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([template_id, version_number], map: "sys_ord_workflow_template_versio_template_id_version_number_key")
  @@index([template_id, version_number(sort: Desc)], map: "idx_sys_ord_workflow_template_versions_template")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_plan_setting_constraints {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  plan_code         String
  stng_code         String
  constraint_type   String
  constraint_value  Json?
  constraint_reason String?
  created_at        DateTime? @default(now()) @db.Timestamp(6)
  created_by        String?   @db.VarChar(120)
  created_info      String?
  updated_at        DateTime? @db.Timestamp(6)
  updated_by        String?   @db.VarChar(120)
  updated_info      String?
  rec_status        Int?      @default(1) @db.SmallInt
  rec_order         Int?
  rec_notes         String?   @db.VarChar(200)
  is_active         Boolean   @default(true)

  @@unique([plan_code, stng_code, constraint_type])
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model sys_stng_settings_cd {
  setting_code                  String                 @id
  stng_category_code            String
  setting_name                  String
  setting_name2                 String?
  setting_desc                  String
  setting_desc2                 String?
  tech_explain_for_developers   String
  is_allow_for_system           Boolean                @default(false)
  is_allow_for_tenant_org       Boolean                @default(false)
  is_allow_for_branch           Boolean                @default(false)
  is_allow_for_user             Boolean                @default(false)
  is_allow_for_service_category Boolean                @default(false)
  is_for_system_only            Boolean                @default(false)
  stng_scope                    String
  stng_data_type                String
  stng_default_value_jsonb      Json?
  stng_allowed_values_json      Json?
  stng_validation_jsonb         Json?
  stng_is_overridable           Boolean?               @default(true)
  stng_is_sensitive             Boolean?               @default(false)
  stng_requires_restart         Boolean?               @default(false)
  stng_is_feature_gated         Boolean                @default(false)
  stng_depends_on_flags         Json?
  is_active                     Boolean?               @default(true)
  rec_order                     Int?
  rec_notes                     String?
  rec_status                    Int?                   @default(1) @db.SmallInt
  created_at                    DateTime               @default(now()) @db.Timestamptz(6)
  created_by                    String?
  created_info                  String?
  updated_at                    DateTime?              @db.Timestamptz(6)
  updated_by                    String?
  updated_info                  String?
  org_stng_settings_cf          org_stng_settings_cf[]
  sys_stng_categories_cd        sys_stng_categories_cd @relation(fields: [stng_category_code], references: [stng_category_code], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model org_price_history_audit {
  id                   String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id        String                @db.Uuid
  entity_type          String                @db.VarChar(50)
  entity_id            String                @db.Uuid
  price_list_id        String?               @db.Uuid
  product_id           String?               @db.Uuid
  old_price            Decimal?              @db.Decimal(10, 3)
  new_price            Decimal?              @db.Decimal(10, 3)
  old_discount_percent Decimal?              @db.Decimal(5, 2)
  new_discount_percent Decimal?              @db.Decimal(5, 2)
  change_reason        String?
  effective_from       DateTime?             @db.Date
  effective_to         DateTime?             @db.Date
  created_at           DateTime?             @default(now()) @db.Timestamp(6)
  created_by           String?               @db.Uuid
  created_info         String?
  org_price_lists_mst  org_price_lists_mst?  @relation(fields: [price_list_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  org_product_data_mst org_product_data_mst? @relation(fields: [product_id, tenant_org_id], references: [id, tenant_org_id], onDelete: Cascade, onUpdate: NoAction)
  org_tenants_mst      org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_price_history_created")
  @@index([entity_type, entity_id], map: "idx_price_history_entity")
  @@index([price_list_id], map: "idx_price_history_price_list")
  @@index([product_id], map: "idx_price_history_product")
  @@index([tenant_org_id], map: "idx_price_history_tenant")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_svc_cat_proc_steps_cf {
  id                      String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id           String                  @db.Uuid
  service_category_code   String                  @db.VarChar(120)
  step_code               String                  @db.VarChar(50)
  step_seq                Int
  step_name               String                  @db.VarChar(250)
  step_name2              String?                 @db.VarChar(250)
  step_color              String?                 @db.VarChar(60)
  step_icon               String?                 @db.VarChar(120)
  is_active               Boolean?                @default(true)
  display_order           Int?                    @default(0)
  created_at              DateTime?               @default(now()) @db.Timestamptz(6)
  created_by              String?                 @db.Uuid
  updated_at              DateTime?               @db.Timestamptz(6)
  updated_by              String?                 @db.Uuid
  rec_status              Int?                    @default(1) @db.SmallInt
  rec_order               Int?
  rec_notes               String?                 @db.VarChar(200)
  org_service_category_cf org_service_category_cf @relation(fields: [tenant_org_id, service_category_code], references: [tenant_org_id, service_category_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_steps_category")
  org_tenants_mst         org_tenants_mst         @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_org_steps_tenant")

  @@unique([tenant_org_id, service_category_code, step_code])
  @@index([tenant_org_id, service_category_code, step_seq], map: "idx_org_steps_tenant_category")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_jwt_tenant_health_log {
  id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id            String    @db.Uuid
  event_type         String    @db.VarChar(50)
  tenant_id          String?   @db.Uuid
  org_user_id        String?   @db.Uuid
  auth_user_id       String?   @db.Uuid
  had_tenant_context Boolean
  repair_attempted   Boolean?  @default(false)
  repair_successful  Boolean?  @default(false)
  error_message      String?
  metadata           Json?
  created_at         DateTime? @default(now()) @db.Timestamptz(6)

  @@index([event_type, created_at(sort: Desc)], map: "idx_jwt_health_event")
  @@index([repair_attempted, repair_successful, created_at(sort: Desc)], map: "idx_jwt_health_repair")
  @@index([user_id, created_at(sort: Desc)], map: "idx_jwt_health_user")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sys_svc_cat_proc_steps {
  id                      String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  service_category_code   String                  @db.VarChar(120)
  step_code               String                  @db.VarChar(50)
  step_seq                Int
  step_name               String                  @db.VarChar(250)
  step_name2              String?                 @db.VarChar(250)
  step_color              String?                 @db.VarChar(60)
  step_icon               String?                 @db.VarChar(120)
  is_active               Boolean?                @default(true)
  display_order           Int?                    @default(0)
  created_at              DateTime?               @default(now()) @db.Timestamptz(6)
  created_by              String?                 @db.Uuid
  updated_at              DateTime?               @db.Timestamptz(6)
  updated_by              String?                 @db.Uuid
  rec_status              Int?                    @default(1) @db.SmallInt
  rec_order               Int?
  rec_notes               String?                 @db.VarChar(200)
  sys_service_category_cd sys_service_category_cd @relation(fields: [service_category_code], references: [service_category_code], onDelete: Cascade, onUpdate: NoAction, map: "fk_sys_steps_category")

  @@unique([service_category_code, step_code])
  @@index([service_category_code, step_seq], map: "idx_sys_steps_category")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model org_payment_reconciliation_log {
  id                    String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_org_id         String                @db.Uuid
  reconciliation_date   DateTime              @db.Date
  payment_method_code   String                @db.VarChar(50)
  expected_amount       Decimal               @db.Decimal(19, 4)
  actual_amount         Decimal               @db.Decimal(19, 4)
  variance              Decimal?              @default(dbgenerated("(actual_amount - expected_amount)")) @db.Decimal(19, 4)
  reconciled_by         String?               @db.VarChar(120)
  reconciled_at         DateTime?             @db.Timestamptz(6)
  notes                 String?
  status                String                @default("pending") @db.VarChar(20)
  created_at            DateTime              @default(now()) @db.Timestamptz(6)
  created_by            String?               @db.VarChar(120)
  updated_at            DateTime?             @db.Timestamptz(6)
  updated_by            String?               @db.VarChar(120)
  sys_payment_method_cd sys_payment_method_cd @relation(fields: [payment_method_code], references: [payment_method_code], onUpdate: NoAction)
  org_tenants_mst       org_tenants_mst       @relation(fields: [tenant_org_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([tenant_org_id, reconciliation_date, payment_method_code], map: "uq_recon_tenant_date_method")
  @@index([tenant_org_id, reconciliation_date(sort: Desc)], map: "idx_recon_tenant_date")
  @@index([tenant_org_id, status], map: "idx_recon_tenant_status")
  @@schema("public")
}

enum aal_level {
  aal1
  aal2
  aal3

  @@schema("auth")
}

enum code_challenge_method {
  s256
  plain

  @@schema("auth")
}

enum factor_status {
  unverified
  verified

  @@schema("auth")
}

enum factor_type {
  totp
  webauthn
  phone

  @@schema("auth")
}

enum oauth_registration_type {
  dynamic
  manual

  @@schema("auth")
}

enum one_time_token_type {
  confirmation_token
  reauthentication_token
  recovery_token
  email_change_token_new
  email_change_token_current
  phone_change_token

  @@schema("auth")
}
